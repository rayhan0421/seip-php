var _proxy_jslib_SCRIPT_NAME="/orange/pooxy4/nph-poxy.pl";var _proxy_jslib_SCRIPT_URL="http://quia.cf/orange/pooxy4/nph-poxy.pl";var _proxy_jslib_THIS_HOST="quia.cf";var _proxy_jslib_PROXY_GROUP=[];var _proxy_jslib_ALL_TYPES=['','application/x-javascript','application/x-ecmascript','application/x-vbscript','application/x-perlscript','application/javascript','application/ecmascript','text/javascript','text/ecmascript','text/jscript','text/livescript','text/vbscript','text/vbs','text/perlscript','text/tcl','text/x-scriptlet','text/scriptlet','application/hta','application/x-shockwave-flash','text/css','x-proxy/xhr'];var _proxy_jslib_MIME_TYPE_ID={'':0,'text/javascript':7,'application/x-javascript':1,'application/x-perlscript':4,'application/x-vbscript':3,'x-proxy/xhr':20,'text/tcl':14,'text/vbs':12,'text/jscript':9,'text/ecmascript':8,'application/javascript':5,'text/perlscript':13,'text/livescript':10,'application/ecmascript':6,'application/x-ecmascript':2,'text/vbscript':11,'text/x-scriptlet':15,'text/css':19,'application/x-shockwave-flash':18,'text/scriptlet':16,'application/hta':17};function _proxy_jslib_proxy_encode(URL){URL=URL.replace(/^([\w\+\.\-]+)\:\/\//,'$1/');return URL;}
function _proxy_jslib_proxy_decode(enc_URL){enc_URL=enc_URL.replace(/^([\w\+\.\-]+)\//,'$1://');return enc_URL;}
function _proxy_jslib_cookie_encode(cookie){cookie=cookie.replace(/(\W)/g,function(s,p1){return'%'+p1.charCodeAt(0).toString(16)});return cookie;}
function _proxy_jslib_cookie_decode(enc_cookie){enc_cookie=enc_cookie.replace(/%([\da-fA-F]{2})/g,function(s,p1){return String.fromCharCode(eval('0x'+p1))});return enc_cookie;}
var _proxy_jslib_browser_family;var _proxy_jslib_RE_FULL_PATH;var _proxy_jslib_url_start,_proxy_jslib_url_start_inframe,_proxy_jslib_url_start_noframe,_proxy_jslib_base_unframes,_proxy_jslib_is_in_frame,_proxy_jslib_lang,_proxy_jslib_flags,_proxy_jslib_URL,_proxy_jslib_origin;var _proxy_jslib_cookies_are_banned_here,_proxy_jslib_doing_insert_here,_proxy_jslib_SESSION_COOKIES_ONLY,_proxy_jslib_COOKIE_PATH_FOLLOWS_SPEC,_proxy_jslib_RESPECT_THREE_DOT_RULE,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,_proxy_jslib_RTMP_SERVER_PORT,_proxy_jslib_default_script_type,_proxy_jslib_default_style_type,_proxy_jslib_USE_DB_FOR_COOKIES,_proxy_jslib_PROXIFY_COMMENTS,_proxy_jslib_COOKIES_FROM_DB,_proxy_jslib_csp,_proxy_jslib_csp_st,_proxy_jslib_csp_is_supported,_proxy_jslib_eval_ok,_proxy_jslib_ALERT_ON_CSP_VIOLATIONi,_proxy_jslib_TIMEOUT_MULTIPLIER;var _proxy_jslib_RE,_proxy_jslib_ARRAY64,_proxy_jslib_UNARRAY64;var _proxy_jslib_does_write;var _proxy_jslib_write_buffers=[{doc:document,has_jslib:true}];var _proxy_jslib_locations=[];var _proxy_jslib_xhrwins=[];var _proxy_jslib_ret;var _proxy_jslib_temp_counter=1000;var _proxy_jslib_current_object_classid;var _proxy_jslib_increments={applets:0,embeds:0,forms:0,ids:0,layers:0,anchors:0,images:0,links:0};var _proxy_jslib_handle_properties='eval insertAdjacentHTML setAttribute setAttributeNode getAttribute value insertRule innerHTML outerHTML outerText src currentSrc href background lowsrc action formAction useMap longDesc cite codeBase location poster open write writeln URL url newURL oldURL referrer baseURI body parentNode toString String setInterval setTimeout cookie domain frames parent top opener protocol host hostname port pathname search setStringValue setProperty setNamedItem load execScript navigate showModalDialog showModelessDialog addImport execCommand LoadMovie getElementById getElementsByTagName appendChild replaceChild insertBefore removeChild createElement text close origin postMessage pushState replaceState localStorage sessionStorage querySelector querySelectorAll send setRequestHeader'.split(/\s+/);var _proxy_jslib_assign_properties='background src href lowsrc action useMap longDesc cite codeBase location poster profile cssText innerHTML outerHTML outerText nodeValue protocol host hostname port pathname search cookie domain value backgroundImage content cursor listStyle listStyleImage text textContent withCredentials'.split(/\s+/);var _proxy_jslib_handle_props_hash,_proxy_jslib_assign_props_hash;try{var _proxy_jslib_ORIGINAL_ARRAY_push=Array.prototype.push}catch(e){}
try{var _proxy_jslib_ORIGINAL_WINDOW_alert=Window.prototype.alert}catch(e){}
function _proxy_jslib_init(){_proxy_jslib_csp_is_supported=_proxy_jslib_csp_is_supported_test();_proxy_jslib_browser_family=navigator.appName.match(/Netscape/i)?'netscape':navigator.appName.match(/Microsoft/i)?'msie':'';_proxy_jslib_set_RE();_proxy_jslib_ARRAY64='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('');_proxy_jslib_UNARRAY64={};for(var i=0;i<64;i++){_proxy_jslib_UNARRAY64[_proxy_jslib_ARRAY64[i]]=i}
_proxy_jslib_handle_props_hash={};for(var i=0;i<_proxy_jslib_handle_properties.length;i++)
_proxy_jslib_handle_props_hash['p_'+_proxy_jslib_handle_properties[i]]=true;_proxy_jslib_assign_props_hash={};for(var i=0;i<_proxy_jslib_assign_properties.length;i++)
_proxy_jslib_assign_props_hash['p_'+_proxy_jslib_assign_properties[i]]=true;var URL=document.URL.replace(/^wyciwyg:\/\/\d+\//i,'');var u=_proxy_jslib_parse_full_url(URL);_proxy_jslib_lang=u[1];_proxy_jslib_flags=_proxy_jslib_unpack_flags(u[2]);_proxy_jslib_URL=u[3];_proxy_jslib_flags[6]='';if(_proxy_jslib_PROXY_GROUP.length){_proxy_jslib_url_start=_proxy_jslib_PROXY_GROUP[Math.floor(Math.random()*_proxy_jslib_PROXY_GROUP.length)]
+'/'+u[1]+'/'+_proxy_jslib_pack_flags(_proxy_jslib_flags)+'/';}else{_proxy_jslib_url_start=u[0]+'/'+u[1]+'/'+_proxy_jslib_pack_flags(_proxy_jslib_flags)+'/';}
_proxy_jslib_is_in_frame=_proxy_jslib_flags[5];_proxy_jslib_flags[5]=1;_proxy_jslib_url_start_inframe=u[0]+'/'+u[1]+'/'+_proxy_jslib_pack_flags(_proxy_jslib_flags)+'/';_proxy_jslib_flags[5]=0;_proxy_jslib_url_start_noframe=u[0]+'/'+u[1]+'/'+_proxy_jslib_pack_flags(_proxy_jslib_flags)+'/';_proxy_jslib_flags[5]=_proxy_jslib_is_in_frame;_proxy_jslib_init_domain(window,_proxy_jslib_URL);_proxy_jslib_eval_ok=_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-eval'");var old_onload=window.onload;window.onload=function(){try{if(old_onload)old_onload()}catch(e){};_proxy_jslib_onload();}}
function _proxy_jslib_pass_vars(base_url,origin,cookies_are_banned_here,doing_insert_here,SESSION_COOKIES_ONLY,COOKIE_PATH_FOLLOWS_SPEC,RESPECT_THREE_DOT_RULE,ALLOW_UNPROXIFIED_SCRIPTS,RTMP_SERVER_PORT,default_script_type,default_style_type,USE_DB_FOR_COOKIES,PROXIFY_COMMENTS,ALERT_ON_CSP_VIOLATION,COOKIES_FROM_DB,TIMEOUT_MULTIPLIER,csp){var RE_SCRIPT_NAME=(_proxy_jslib_SCRIPT_NAME!='')?_proxy_jslib_SCRIPT_NAME.replace(/(\W)/g,function(p){return'\\'+p}):'.{0}';_proxy_jslib_RE_FULL_PATH=new RegExp('^('+RE_SCRIPT_NAME+')\\/?([^\\/]*)\\/?([^\\/]*)\\/?(.*)');_proxy_jslib_set_base_vars(window.document,base_url);_proxy_jslib_origin=origin;_proxy_jslib_cookies_are_banned_here=cookies_are_banned_here;_proxy_jslib_doing_insert_here=doing_insert_here;_proxy_jslib_SESSION_COOKIES_ONLY=SESSION_COOKIES_ONLY;_proxy_jslib_COOKIE_PATH_FOLLOWS_SPEC=COOKIE_PATH_FOLLOWS_SPEC;_proxy_jslib_RESPECT_THREE_DOT_RULE=RESPECT_THREE_DOT_RULE;_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS=ALLOW_UNPROXIFIED_SCRIPTS;_proxy_jslib_USE_DB_FOR_COOKIES=USE_DB_FOR_COOKIES;_proxy_jslib_PROXIFY_COMMENTS=PROXIFY_COMMENTS;_proxy_jslib_ALERT_ON_CSP_VIOLATION=ALERT_ON_CSP_VIOLATION;_proxy_jslib_COOKIES_FROM_DB=COOKIES_FROM_DB;_proxy_jslib_TIMEOUT_MULTIPLIER=TIMEOUT_MULTIPLIER;_proxy_jslib_RTMP_SERVER_PORT=RTMP_SERVER_PORT||1935;_proxy_jslib_default_script_type=default_script_type.toLowerCase();_proxy_jslib_default_style_type=default_style_type.toLowerCase();_proxy_jslib_csp=(csp!='')?eval('('+ csp+')')||{}:{};_proxy_jslib_csp_st=csp;_proxy_jslib_init();}
function _proxy_jslib_onload(){if(_proxy_jslib_is_in_frame&&(window.parent===window.top)&&top._proxy_jslib_insertion_frame)
top._proxy_jslib_insertion_frame.document.URLform.URL.value=_proxy_jslib_URL;}
function _proxy_jslib_handle(o,property,cur_val,calls_now,in_new_statement){if(typeof(property)=='number')return _handle_default();if((o===null)&&(typeof(property)=='string')&&property.match(/^(location|open|setInterval|setTimeout|frames|parent|top|opener|execScript|navigate|showModalDialog|showModelessDialog|parentWindow|String)$/)&&(window[property]===cur_val))o=window;if(property=='eval'){if(!_proxy_jslib_eval_ok)_proxy_jslib_throw_csp_error("disallowed eval in handle()");if((o!=null)&&(o.eval)){var oldeval=o.eval;return function(code){var ret;o._proxy_jslib_oldeval=oldeval;ret=o._proxy_jslib_oldeval(_proxy_jslib_proxify_js(code,0));delete o._proxy_jslib_oldeval;return ret;};}else{if(o!=null)return undefined;var oldeval=eval;return function(code){return oldeval(_proxy_jslib_proxify_js(code,0));};}}
if(o==null)return cur_val;if(typeof(o)=='object'&&!(property in o))return void 0;if(!_proxy_jslib_handle_props_hash['p_'+property])return _handle_default();if(_proxy_jslib_instanceof(o,'Element')&&!_proxy_jslib_instanceof(o,'HTMLElement')){return _handle_default();}
switch(property){case'src':case'href':case'background':case'lowsrc':case'action':case'formAction':case'useMap':case'longDesc':case'cite':case'codeBase':case'baseURI':case'poster':var u=(o!=void 0)?o[property]:cur_val;if(u==void 0)return void 0;if(typeof u=='number')return u;if(typeof u=='function')return _handle_default();if(u&&(typeof u=='object')&&!('toLowerCase'in u))return u;if(!_proxy_jslib_instanceof(o,'Node'))return u;var pu=_proxy_jslib_parse_full_url(u);if(pu==void 0)return u;return pu[3];case'location':if(_proxy_jslib_instanceof(o,'Window')||_proxy_jslib_instanceof(o,'Document')){return _proxy_jslib_dup_location(o);}else{return _handle_default();}
case'open':if(_proxy_jslib_instanceof(o,'XMLHttpRequest')||_proxy_jslib_instanceof(o,'AnonXMLHttpRequest')){return function(method,url,asyncflag,username,password){if(typeof o._proxy_jslib_xhrdata.win=='number')
o._proxy_jslib_xhrdata.win=_proxy_jslib_xhrwins[o._proxy_jslib_xhrdata.win];url=_proxy_jslib_absolute_url(url.toString(),o._proxy_jslib_xhrdata.win.document);if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['connect-src'],url))
_proxy_jslib_throw_csp_error('connect-src violation in XHR.open()');if(this!==window)o=this;if(method.match(/^(?:CONNECT|DELETE|GET|HEAD|OPTIONS|POST|PUT|TRACE|TRACK)$/i))
method=method.toUpperCase();if(method.match(/^(?:CONNECT|TRACE|TRACK)$/))
throw new Error('SecurityError in XMLHttpRequest.open(): method is ['+ method+']');var xhr_base_url=url.replace(/#.*/,'');var pu=_proxy_jslib_parse_url(xhr_base_url);var tup=pu[2].match(/^([^:]*):?(.*)/);var temp_user=tup[1];var temp_pwd=tup[2];if(!((arguments.length==2)?true:asyncflag)&&o._proxy_jslib_xhrdata.win.document&&(o.timeout!=0||o.withCredentials||o.responseType!=''))
throw new Error('InvalidAccessError in XMLHttpRequest.open()');if(arguments.length>=4){if(username!=null&&!_proxy_jslib_same_origin(url,o._proxy_jslib_xhrdata.origin))
throw new Error('InvalidAccessError in XMLHttpRequest.open()');temp_user=username;}
if(arguments.length>=5){if(password!=null&&!_proxy_jslib_same_origin(url,o._proxy_jslib_xhrdata.origin))
throw new Error('InvalidAccessError in XMLHttpRequest.open()');temp_pwd=password;}
o._proxy_jslib_xhrdata.url=url;o._proxy_jslib_xhrdata.method=method;o._proxy_jslib_xhrdata.username=temp_user;o._proxy_jslib_xhrdata.password=temp_pwd;o._proxy_jslib_xhrdata.headers={};var flags_5=_proxy_jslib_flags[5];var flags_6=_proxy_jslib_flags[6];_proxy_jslib_flags[5]=1;_proxy_jslib_flags[6]='x-proxy/xhr';var old_url_start=_proxy_jslib_url_start;try{_proxy_jslib_url_start=_proxy_jslib_url_start_by_flags(_proxy_jslib_flags);if(!_proxy_jslib_same_origin(url,o._proxy_jslib_xhrdata.origin)){url=url.replace(/\:\/\//,'/');var origin=o._proxy_jslib_xhrdata.origin.replace(/\//g,'%2f');var headers='';for(var name in o._proxy_jslib_xhrdata.headers)headers+=name+':';if(headers!='')headers=headers.replace(/:$/,'');else headers=':';var omit_credentials=o.withCredentials?0:1;url=_proxy_jslib_full_url('x-proxy://xhr/'+ origin+'/'+ headers
+'/'+ omit_credentials+'/'+ url);}else{url=_proxy_jslib_full_url(url);}}finally{_proxy_jslib_url_start=old_url_start;_proxy_jslib_flags[5]=flags_5;_proxy_jslib_flags[6]=flags_6;}
if(arguments.length==2){return o.open(method,url);}else{o._proxy_jslib_xhrdata.sync=!asyncflag;return o.open(method,url,asyncflag,username,password);}};}else if(_proxy_jslib_instanceof(o,'Window')){return function(url,name,features,replace){if(this!==window)o=this;var full_url=_proxy_jslib_full_url(url);var win=o.open(full_url,name,features,replace);if(url)_proxy_jslib_init_domain(win);else win._proxy_jslib_document_domain=o._proxy_jslib_document_domain;return win;};}else if(_proxy_jslib_instanceof(o,'Document')){return function(arg1,name,features,replace){if(arg1==void 0)arg1='text/html';if(this!==window)o=this;if(arguments.length<=2){return o.open(arg1,name);}else{return o.open(_proxy_jslib_full_url(arg1,o),name,features,replace);}};}else{return _handle_default();}
case'send':if(_proxy_jslib_instanceof(o,'XMLHttpRequest')||_proxy_jslib_instanceof(o,'AnonXMLHttpRequest')){return function(data){var body,result;if(o._proxy_jslib_xhrdata.method.match(/^(GET|HEAD)$/)){data=null;}
if(arguments.length>0&&data!=null){var encoding=null;var mime_type=null;try{if(data instanceof ArrayBuffer){body=data;}else if(data instanceof Blob){if(data.type!='')mime_type=data.type;body=data;}else if(_proxy_jslib_instanceof(data,'Document')){encoding=data.charset;mime_type='text/html;charset='+ encoding;body=data.documentElement.innerHTML;}else if(typeof data=='string'){encoding='UTF-8';mime_type='text/plain;charset=UTF-8';body=data;}else if(data instanceof FormData){body=data;}}catch(e){body=data;}
if(encoding!=null&&o._proxy_jslib_xhrdata.headers['content-type']){o._proxy_jslib_xhrdata.headers['content-type']=o._proxy_jslib_xhrdata.headers['content-type'].replace(/\bcharset=[\w.$-]+/,'charset='+encoding);}
if(mime_type!=null&&!o._proxy_jslib_xhrdata.headers['content-type']){o.setRequestHeader('Content-Type',mime_type);o._proxy_jslib_xhrdata.headers['content-type']=mime_type;}}else{body=null;}
if(!o._proxy_jslib_xhrdata.sync)o._proxy_jslib_xhrdata.upload_events_flag=1;o._proxy_jslib_xhrdata.error_flag=0;if(body==''||body==null)o._proxy_jslib_xhrdata.upload_complete_flag=1;if(o._proxy_jslib_xhrdata.sync){o._proxy_jslib_xhrdata.send_flag=1;o.dispatchEvent(o._proxy_jslib_xhrdata.win.document.createEvent('Event').initEvent('readystatechange',false,false));o.dispatchEvent(o._proxy_jslib_xhrdata.win.document.createEvent('ProgressEvent').initEvent('loadstart',false,false));if(!o._proxy_jslib_xhrdata.upload_complete_flag)
o.upload.dispatchEvent(o._proxy_jslib_xhrdata.win.document.createEvent('ProgressEvent').initEvent('loadstart',false,false));}
return o.send(body);};}else{return _handle_default();}
case'setRequestHeader':if(_proxy_jslib_instanceof(o,'XMLHttpRequest')||_proxy_jslib_instanceof(o,'AnonXMLHttpRequest')){return function(name,value){if(name.match(/[^\x00-\xff]/))throw new SyntaxError();if((''+value).match(/[^\x00-\xff]/))throw new SyntaxError();name=name.toLowerCase();if(name.match(/^(?:Accept-Charset|Accept-Encoding|Access-Control-Request-Headers|Access-Control-Request-Method|Connection|Content-Length|Cookie|Cookie2|Content-Transfer-Encoding|Date|Expect|Host|Keep-Alive|Origin|Referer|TE|Trailer|Transfer-Encoding|Upgrade|User-Agent|Via)$|^(?:Proxy-|Sec-)/i))
return;if(name in o._proxy_jslib_xhrdata.headers){o._proxy_jslib_xhrdata.headers[name]+=', '+ value;}else{o._proxy_jslib_xhrdata.headers[name]=value;}
return o.setRequestHeader(name,value);};}else{return _handle_default();}
case'write':if(_proxy_jslib_instanceof(o,'Document')){return function(){if(this!==window)o=this;for(var i=0;i<arguments.length;i++)
_proxy_jslib_write_via_buffer(o,arguments[i]);};}else{return _handle_default();}
case'writeln':if(_proxy_jslib_instanceof(o,'Document')){return function(){if(this!==window)o=this;for(var i=0;i<arguments.length;i++)
_proxy_jslib_write_via_buffer(o,arguments[i]);_proxy_jslib_write_via_buffer(o,'\n');};}else{return _handle_default();}
case'close':if(_proxy_jslib_instanceof(o,'Document')){return function(){if(this!==window)o=this;var buf,i,p;for(i in _proxy_jslib_write_buffers){if(_proxy_jslib_write_buffers[i].doc===o){buf=_proxy_jslib_write_buffers[i];if(buf.buf==void 0)break;p=_proxy_jslib_proxify_html(buf.buf,o,!buf.has_jslib);if(p[3])return;buf.buf=void 0;buf.has_jslib=false;o.write(p[0]);break;}}
o.close();};}else{return _handle_default();}
case'innerHTML':if((_proxy_jslib_instanceof(o,'HTMLElement')||_proxy_jslib_instanceof(o,'Document'))){if(is_in_script(o,property)){return _proxy_jslib_proxify_block(o[property],o.type||_proxy_jslib_default_script_type,true,true);}else{switch(o.tagName.toLowerCase()){case'style':return _proxy_jslib_proxify_css(o[property],true);case'script':return _proxy_jslib_proxify_js(o[property],void 0,void 0,void 0,true);default:return _proxy_jslib_proxify_html(o[property],(o.ownerDocument||o),false,true)[0];}}}else{return _handle_default();}
case'outerHTML':case'outerText':if((_proxy_jslib_instanceof(o,'HTMLElement')||_proxy_jslib_instanceof(o,'Document'))){return _proxy_jslib_proxify_html(o[property],(o.ownerDocument||o),false,true)[0];}else{return _handle_default();}
case'url':if(_proxy_jslib_instanceof(o,'EventSource')){var pu=_proxy_jslib_parse_full_url(o[property]);if(pu==void 0)return void 0;return pu[3];}else{return _handle_default();}
case'newURL':case'oldURL':if(_proxy_jslib_instanceof(o,'HashChangeEvent')){var pu=_proxy_jslib_parse_full_url(o[property]);if(pu==void 0)return void 0;return pu[3];}else{return _handle_default();}
case'getElementById':if(_proxy_jslib_instanceof(o,'Document')){return function(elementId){if(this!==window)o=this;var e,i,buf,p;e=o.getElementById(elementId);if(e!=null)return e;for(i=0;i<_proxy_jslib_write_buffers.length;i++)
if(_proxy_jslib_write_buffers[i]&&_proxy_jslib_write_buffers[i].doc===o)break;if(i>=_proxy_jslib_write_buffers.length)return null;buf=_proxy_jslib_write_buffers[i];if(buf.buf==void 0)return null;if(buf.buf.match(new RegExp('\\bid\\s*=\\s*[\'"]?\\s*'+elementId+'\\s*[\'"]?','i'))){p=_proxy_jslib_proxify_html(buf.buf,o,!buf.has_jslib);if(p[3])return;buf.has_jslib=buf.has_jslib||p[2];buf.buf=p[1];o.write(p[0]);}
return o.getElementById(elementId);};}else{return _handle_default();}
case'getElementsByTagName':if(_proxy_jslib_instanceof(o,'Document')||_proxy_jslib_instanceof(o,'Element')){return function(tagname){if(this!==window)o=this;var i,buf,pi,doc;doc=(o.ownerDocument||o);for(i=0;i<_proxy_jslib_write_buffers.length;i++)
if(_proxy_jslib_write_buffers[i]&&_proxy_jslib_write_buffers[i].doc===doc)break;if(i>=_proxy_jslib_write_buffers.length)return o.getElementsByTagName(tagname);buf=_proxy_jslib_write_buffers[i];if((buf.buf!=void 0)&&(tagname=='*'||buf.buf.match(new RegExp('<'+tagname+'\\b','i')))){p=_proxy_jslib_proxify_html(buf.buf,doc,!buf.has_jslib);if(p[3])return;buf.has_jslib=buf.has_jslib||p[2];buf.buf=p[1];doc.write(p[0]);}
if(tagname.toLowerCase()=='script'){var scripts=o.getElementsByTagName(tagname);var ret=[];for(i=2;i<scripts.length;i++)ret[i-2]=scripts[i];return ret;}
return o.getElementsByTagName(tagname);};}else{return _handle_default();}
case'appendChild':if(_proxy_jslib_instanceof(o,'Node')){return function(child){if((o.nodeName.toLowerCase()=='script')&&(child.nodeType==3)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP script-src inline error");var type=o.type||_proxy_jslib_default_script_type;var new_text=_proxy_jslib_proxify_block(child.data,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,false);return o.appendChild(document.createTextNode(new_text));}else if((o.nodeName.toLowerCase()=='style')&&child.nodeType==3){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP style-src inline error");var type=o.type||_proxy_jslib_default_style_type;var new_text=_proxy_jslib_proxify_block(child.data,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,false);return o.appendChild(document.createTextNode(new_text));}else{return o.appendChild(child);}};}else{return _handle_default();}
case'replaceChild':case'insertBefore':if(_proxy_jslib_instanceof(o,'Node')){return function(child,old_child){var ret;if((o.nodeName.toLowerCase()=='script')&&(child.nodeType==3)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP script-src inline error");var type=o.type||_proxy_jslib_default_script_type;var new_text=_proxy_jslib_proxify_block(child.data,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,false);ret=o[property](document.createTextNode(new_text),old_child);if(property=='replaceChild')// unfortunately, next line would cause direct loads in some browsers
return _proxy_jslib_proxify_block(ret.textContent,type,void 0,true);return ret;}else if((o.nodeName.toLowerCase()=='style')&&child.nodeType==3){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP style-src inline error");var type=o.type||_proxy_jslib_default_style_type;var new_text=_proxy_jslib_proxify_block(child.data,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,false);ret=o[property](document.createTextNode(new_text),old_child);if(property=='replaceChild')// unfortunately, next line would cause direct loads in some browsers
return _proxy_jslib_proxify_block(ret.textContent,type,void 0,true);return ret;}else{while(old_child!=null&&(old_child.className=='_proxy_jslib_jslib'||old_child.className=='_proxy_jslib_pv'))
old_child=old_child.nextSibling;return o[property](child,old_child);}};}else{return _handle_default();}
case'removeChild':if(_proxy_jslib_instanceof(o,'Node')){return function(old_child){var ret=o[property](old_child);var type;if(ret.nodeType==3){type=(o.nodeName.toLowerCase()=='script')?(o.type||_proxy_jslib_default_script_type):(o.nodeName.toLowerCase()=='style')?(o.type||_proxy_jslib_default_style_type):'';return _proxy_jslib_proxify_block(ret.textContent,type,true,true);}
return ret;};}else{return _handle_default();}
case'createElement':if(_proxy_jslib_instanceof(o,'Document')){return function(localName){var p=HTMLDocument.prototype||Document.prototype;var ret=p.createElement.call(o,localName);if(localName.toLowerCase()=='iframe')
ret.contentDocument&&ret.contentDocument.write(_proxy_jslib_iframe_init_html());return ret;};}else{return _handle_default();}
case'text':if(_proxy_jslib_instanceof(o,'Node')&&(o.nodeName.toLowerCase()=='script')){return _proxy_jslib_proxify_js(o.text,0,0,0,true);}else{return _handle_default();}
case'insertAdjacentHTML':if(_proxy_jslib_instanceof(o,'HTMLElement')){return function(where,text){if(this!==window)o=this;return o.insertAdjacentHTML(where,_proxy_jslib_proxify_html(text,o.ownerDocument,false)[0]);};}else{return _handle_default();}
case'setAttribute':if(_proxy_jslib_instanceof(o,'Element')){return function(name,value){if(this!==window)o=this;return o.setAttribute(name.toLowerCase(),_proxy_jslib_proxify_attribute(o,o.attributes[name],name,value));};}else{return _handle_default();}
case'setAttributeNode':if(_proxy_jslib_instanceof(o,'Element')){return function(newAttr){if(this!==window)o=this;newAttr.nodeValue=_proxy_jslib_proxify_attribute(o,newAttr,newAttr.nodeName,newAttr.nodeValue);return o.setAttributeNode(newAttr);};}else{return _handle_default();}
case'getAttribute':if(_proxy_jslib_instanceof(o,'Element')){return function(name,flag){var attr_val=o.getAttribute(name,flag);return _proxy_jslib_proxify_attribute(o,o.attributes[name],name,attr_val,1);};}else{return _handle_default();}
case'value':if(_proxy_jslib_instanceof(o,'Attr')){return _proxy_jslib_proxify_attribute(void 0,o,o.name,o.value,1);}else{return _handle_default();}
case'insertRule':if(_proxy_jslib_instanceof(o,'CSSStyleSheet')){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP style-src inline error");return function(rule,index){if(this!==window)o=this;return o.insertRule(_proxy_jslib_proxify_css(rule),index);};}else{return _handle_default();}
case'URL':case'referrer':if(_proxy_jslib_instanceof(o,'Document')){var pu=_proxy_jslib_parse_full_url(o[property]);return((pu==void 0)||pu[3].match(/^x-proxy/i))?null:pu[3];}else{return _handle_default();}
case'body':if(_proxy_jslib_instanceof(o,'Document')){var ret=o.getElementById('_proxy_css_main_div');return ret?ret:o.body;}else{return _handle_default();}
case'parentNode':if(_proxy_jslib_instanceof(o,'Node')){return o.id=='_proxy_css_main_div'?o.parentNode.parentNode:o.parentNode;}else{return _handle_default();}
case'toString':if(_proxy_jslib_instanceof(o,'Link')){return function(){if(this!==window)o=this;return _proxy_jslib_parse_full_url(o.toString())[3];};}else{if(typeof o=='function'){return function(){var s=o.toString();return s.match(/^\n?function\b/)?_proxy_jslib_proxify_js(s,0,0,in_new_statement,true):s;};}else{return _handle_default();}}
case'setInterval':case'setTimeout':if(_proxy_jslib_instanceof(o,'Window')){var oldmethod=o[property];return function(codefunc,time){time*=_proxy_jslib_TIMEOUT_MULTIPLIER;if(this!==window)o=this;try{if(typeof(codefunc)=='function'){return oldmethod.apply(o,arguments);}else{if(!_proxy_jslib_eval_ok)
_proxy_jslib_throw_csp_error("can't "+property+" without unsafe-eval");return oldmethod.call(o,_proxy_jslib_proxify_js(codefunc),time);}}catch(e){var ret;o._proxy_jslib_oldmethod=oldmethod;if(typeof(codefunc)=='function'){ret=o._proxy_jslib_oldmethod(codefunc,time);}else{if(!_proxy_jslib_eval_ok)
_proxy_jslib_throw_csp_error("can't "+property+" without unsafe-eval");ret=o._proxy_jslib_oldmethod(_proxy_jslib_proxify_js(codefunc),time);}
try{delete o._proxy_jslib_oldmethod;}catch(e){}
return ret;}};}else{return _handle_default();}
case'cookie':if(_proxy_jslib_instanceof(o,'Document')){return _proxy_jslib_cookie_from_client(o);}else{return _handle_default();}
case'domain':if(_proxy_jslib_instanceof(o,'Document')){var w=o.defaultView||o.parentWindow;if(!w._proxy_jslib_document_domain)_proxy_jslib_init_domain(w);if(w._proxy_jslib_document_domain.match(/^https?\:\/\//i))
return _proxy_jslib_parse_url(w._proxy_jslib_document_domain)[4];}else{return _handle_default();}
case'frames':if(_proxy_jslib_instanceof(o,'Window')){var f,ret=[],useret;if(!_proxy_jslib_document_domain)_proxy_jslib_init_domain(window);for(f=0;f<o.frames.length;f++){try{if(!o.frames[f]._proxy_jslib_document_domain)_proxy_jslib_init_domain(o.frames[f]);if((o.frames[f]._proxy_jslib_document_domain!=_proxy_jslib_document_domain)&&(o.frames[f]._proxy_jslib_document_domain))
{ret[f]=_proxy_jslib_dup_window_safe(o.frames[f]);if(o.frames[f].name)ret[o.frames[f].name]=ret[f];useret=true;}else{ret[f]=o.frames[f];if(o.frames[f].name)ret[o.frames[f].name]=ret[f];}}catch(e){alert('Window.frames error: '+e);}}
return useret?ret:o.frames;}else{return _handle_default();}
case'parent':if(_proxy_jslib_instanceof(o,'Window')){var w=(o.top._proxy_jslib_main_frame===o)?o:o.parent;if(!_proxy_jslib_document_domain)_proxy_jslib_init_domain(window);if(!w._proxy_jslib_document_domain)_proxy_jslib_init_domain(w);if(w._proxy_jslib_document_domain&&(w._proxy_jslib_document_domain!=_proxy_jslib_document_domain)){return _proxy_jslib_dup_window_safe(w);}
return w;}else{return _handle_default();}
case'top':if(_proxy_jslib_instanceof(o,'Window')){var w=(o.top._proxy_jslib_main_frame!==void 0)?o.top._proxy_jslib_main_frame:o.top;if(!_proxy_jslib_document_domain)_proxy_jslib_init_domain(window);if(!w._proxy_jslib_document_domain)_proxy_jslib_init_domain(w);if(w._proxy_jslib_document_domain&&(w._proxy_jslib_document_domain!=_proxy_jslib_document_domain)){return _proxy_jslib_dup_window_safe(w);}
return w;}else{return _handle_default();}
case'opener':if(_proxy_jslib_instanceof(o,'Window')){if(!o.opener)return null;if(!_proxy_jslib_document_domain)_proxy_jslib_init_domain(window);if(!o.opener._proxy_jslib_document_domain)_proxy_jslib_init_domain(o.opener);if(o.opener._proxy_jslib_document_domain&&(o.opener._proxy_jslib_document_domain!=_proxy_jslib_document_domain)){return _proxy_jslib_dup_window_safe(o.opener);}
return o.opener;}else{return _handle_default();}
case'protocol':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[1];}else{return _handle_default();}
case'host':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[3];}else{return _handle_default();}
case'hostname':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[4];}else{return _handle_default();}
case'port':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[5];}else{return _handle_default();}
case'pathname':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[6];}else{return _handle_default();}
case'search':if(_proxy_jslib_instanceof(o,'Link')){return _proxy_jslib_parse_url(_proxy_jslib_parse_full_url(o.href)[3])[7];}else{return _handle_default();}
case'LoadMovie':if(_proxy_jslib_instanceof(o,'FlashPlayer')){return function(layer,url){if(this!==window)o=this;return o.LoadMovie(layer,_proxy_jslib_full_url(url));};}else{return _handle_default();}
case'setStringValue':if(_proxy_jslib_instanceof(o,'CSSPrimitiveValue')){return function(type,value){if(this!==window)o=this;if(type==CSSPrimitiveValue.CSS_URI)
return o.setStringValue(type,_proxy_jslib_full_url(value));return o.setStringValue(type,value);};}else{return _handle_default();}
case'setProperty':if(_proxy_jslib_instanceof(o,'CSSStyleDeclaration')){return function(name,value,priority){if(this!==window)o=this;return o.setProperty(name,_proxy_jslib_proxify_css(value),priority);};}else{return _handle_default();}
case'setNamedItem':if(_proxy_jslib_instanceof(o,'NamedNodeMap')){return function(node){if(this!==window)o=this;node.nodeValue=_proxy_jslib_proxify_attribute(void 0,node,node.nodeName,node.nodeValue);return o.setNamedItem(node);};}else{return _handle_default();}
case'String':if(_proxy_jslib_instanceof(o,'Window')){return function(s){if(_proxy_jslib_instanceof(s,'Link'))
return _proxy_jslib_parse_full_url(s.href)[3];return String(s);};}else{return _handle_default();}
case'origin':if(_proxy_jslib_instanceof(o,'MessageEvent')){if(o[property]==void 0)return void 0;if(o[property]=='*')return'*';if(!o.source)return void 0;var u=_proxy_jslib_parse_full_url(o.source.location.href)[3];var pu=_proxy_jslib_parse_url(u);return pu[1]+'//'+ pu[3];}else{return _handle_default();}
case'postMessage':if(_proxy_jslib_instanceof(o,'Window')){return function(message,targetOrigin,ports){return _proxy_jslib_postMessage(o,message,targetOrigin,ports);};}else{return _handle_default();}
case'pushState':case'replaceState':if(_proxy_jslib_instanceof(o,'History')){return function(data,title,url){if(url==void 0)return o[property](data,title);var doc_pu=_proxy_jslib_parse_url(_proxy_jslib_parse_full_url(document.URL)[3]);var new_url=_proxy_jslib_full_url(url);var o_pu=_proxy_jslib_parse_url(_proxy_jslib_parse_full_url(new_url)[3]);if(o_pu[3]!=doc_pu[3]){alert('History.'+property+'() not allowed unless origins match: ['+o_pu[3]+'] ['+doc_pu[3]+']');return void 0;}
return o[property](data,title,new_url);}}else{return _handle_default();}
case'currentSrc':if(_proxy_jslib_instanceof(o,'MediaElement')){return _proxy_jslib_parse_full_url(o[property])[3];}else{return _handle_default();}
case'importScripts':if(_proxy_jslib_instanceof(o,'WorkerGlobalScope')){return function(){var fakedoc={URL:o.location};_proxy_jslib_set_base_vars(fakedoc);for(var i=0;i<arguments.length;i++)
o.importScripts(_proxy_jslib_full_url(arguments[i],fakedoc));};}else{return _handle_default();}
case'load':if(_proxy_jslib_instanceof(o,'Layer')){if(!o.load)return undefined;return function(url,width){if(this!==window)o=this;return o.load(_proxy_jslib_full_url(url),width);};}else{return _handle_default();}
case'execScript':if(_proxy_jslib_instanceof(o,'Window')){if(!o.execScript)return undefined;return function(code,language){if(this!==window)o=this;if(language&&language.match(/^\s*(javascript|jscript|ecmascript|livescript|$)/i))
return o.execScript(_proxy_jslib_proxify_js(code),language);if(_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS)
return o.execScript(code,language);return;};}else{return _handle_default();}
case'navigate':if(_proxy_jslib_instanceof(o,'Window')){if(!o.navigate)return undefined;return function(url){if(this!==window)o=this;return o.navigate(_proxy_jslib_full_url(url,o.document));};}else{return _handle_default();}
case'showModalDialog':if(_proxy_jslib_instanceof(o,'Window')){if(!o.showModalDialog)return undefined;return function(url,args,features){if(this!==window)o=this;return o.showModalDialog(_proxy_jslib_full_url(url,o.document),args,features);};}else{return _handle_default();}
case'showModelessDialog':if(_proxy_jslib_instanceof(o,'Window')){if(!o.showModelessDialog)return undefined;return function(url,args,features){if(this!==window)o=this;return o.showModelessDialog(_proxy_jslib_full_url(url,o.document),args,features);};}else{return _handle_default();}
case'addImport':if(_proxy_jslib_instanceof(o,'CSSStyleSheet')){if(!o.addImport)return undefined;return function(url,index){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],url))
_proxy_jslib_throw_csp_error("CSP style-src inline error");if(this!==window)o=this;return o.addImport(_proxy_jslib_full_url(url,o.document),index);};}else{return _handle_default();}
case'localStorage':case'sessionStorage':if(_proxy_jslib_instanceof(o,'Window')){return undefined;}else{return _handle_default();}
case'querySelector':case'querySelectorAll':if(_proxy_jslib_instanceof(o,'Document')||_proxy_jslib_instanceof(o,'DocumentFragment')){return function(selectors){if(_proxy_jslib_doing_insert_here)
selectors=selectors.replace(/\bbody\s*>/gi,'div#_proxy_css_main_div>');return o[property](selectors);};}else{return _handle_default();}
case'execCommand':if(_proxy_jslib_instanceof(o,'Document')){return function(cmd,do_UI,value){var ret;cmd=cmd.toLowerCase();if(_proxy_jslib_browser_family=='netscape'){if((cmd=='createlink')||(cmd=='insertimage')){ret=o.execCommand(cmd,do_UI,_proxy_jslib_full_url(value,o));}else if(cmd=='inserthtml'){ret=o.execCommand(cmd,do_UI,_proxy_jslib_proxify_html(value,o)[0]);}else{ret=o.execCommand(cmd,do_UI,value);}}else if(_proxy_jslib_browser_family=='msie'){if((cmd=='createlink')||(cmd=='insertimage')){ret=o.execCommand(cmd,do_UI,_proxy_jslib_full_url(value,o));}else if(cmd.match(/^insert/)){alert('tried to execCommand('+cmd+')');ret=undefined;}else{ret=o.execCommand(cmd,do_UI,value);}}
return ret;};}else{return _handle_default();}
default:return _handle_default();}
function _handle_default(){if(calls_now&&!in_new_statement&&(typeof(o[property])=='function')){if(o==Function&&property=='prototype')return o[property];var fn=o[property];var ret=function(){if(fn.apply==void 0){return o[property](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);}
if(this!==window){return fn.apply(this,arguments);}else{return fn.apply(o,arguments);}};for(var p in o[property])ret[p]=o[property][p];return ret;}else{try{if(_proxy_jslib_browser_family=='msie'&&property=='getElementsByTagName')
return function(tagname){if(this!==window)o=this;return o.getElementsByTagName(tagname);};return o[property];}catch(e){return undefined;}}}}
function _proxy_jslib_assign(prefix,o,property,op,val){var new_val;if(prefix=='delete')return delete o[property];if(prefix=='++'){val=o[property]+1;op='=';}else if(prefix=='--'){val=o[property]-1;op='=';}
if(!_proxy_jslib_assign_props_hash['p_'+property])return _assign_default();var opmod=op.match(/=/)?op.replace(/=$/,''):'';var u;if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location'))
u=_proxy_jslib_parse_url(_proxy_jslib_instanceof(o,'Link')?_proxy_jslib_parse_full_url(o.href)[3]:o.href);switch(property){case'src':if(_proxy_jslib_instanceof(o,'Element')){var o_tagname=o.tagName.toLowerCase();if(o_tagname=='script'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP script-src error: "+ val);}else if(o_tagname=='img'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP img-src error: "+ val);}else if(o_tagname=='video'||o_tagname=='audio'||o_tagname=='source'||o_tagname=='track'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['media-src'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP media-src error: "+ val);}else if(o_tagname=='frame'||o_tagname=='iframe'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['frame-src'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP frame-src error: "+ val);}}
case'href':if(property=='href'){if(_proxy_jslib_instanceof(o,'Element')){if((o.tagName.toLowerCase()=='base')){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['base-uri'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP base-uri error: "+ val);_proxy_jslib_set_base_vars(o.ownerDocument,_proxy_jslib_absolute_url(val));}}
if(o._proxy_jslib_original_win){var o_win=o._proxy_jslib_original_win;if(opmod!=''){new_val=o.href;eval('new_val'+ op+'val');}else{new_val=val;}
if(o_win.top===o_win)
o_win.location.href=_proxy_jslib_full_url_by_frame(new_val,o_win.document,0);else
o_win.location.href=_proxy_jslib_full_url(new_val,o_win.document);_proxy_jslib_init_domain(o_win);return new_val;}}
case'action':if(_proxy_jslib_instanceof(o,'Element')){if((o.tagName.toLowerCase()=='form')&&(property=='action')){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['form-action'],_proxy_jslib_absolute_url(val)))
_proxy_jslib_throw_csp_error("CSP form-action error: "+ val);}}
case'lowsrc':case'formAction':case'useMap':case'longDesc':case'cite':case'codeBase':case'location':case'poster':if(!_proxy_jslib_instanceof(o,'Node')&&!_proxy_jslib_instanceof(o,'Location')&&!_proxy_jslib_instanceof(o,'Window'))
return eval('o[property]'+op+'val');if(opmod!=''){new_val=_proxy_jslib_parse_full_url(o[property])[3];eval('new_val'+ op+'val');}else{new_val=val;}
if((property=='location')&&(o.top===o)){o[property]=_proxy_jslib_full_url_by_frame(new_val,o.ownerDocument,0);}else if((o.ownerDocument&&(o.ownerDocument.defaultView||o.ownerDocument.parentWindow)._proxy_jslib_base_unframes&&o.target==void 0)||(o.target&&o.target.match(/^_(top|blank)$/i)))
{o[property]=_proxy_jslib_full_url_by_frame(new_val,o.ownerDocument,0);}else if(property=='src'&&_proxy_jslib_instanceof(o,'Element')&&o.nodeName.match(/^i?frame$/i)){o[property]=_proxy_jslib_full_url_by_frame(new_val,o.ownerDocument,1,void 0,1);}else if(property=='src'&&_proxy_jslib_instanceof(o,'Element')&&o.nodeName.match(/^script$/i)){var old_url_start=_proxy_jslib_url_start;var flags_6=_proxy_jslib_flags[6];_proxy_jslib_flags[6]=((o.type!=void 0)&&(o.type!=''))?o.type:_proxy_jslib_default_script_type;try{_proxy_jslib_url_start=_proxy_jslib_url_start_by_flags(_proxy_jslib_flags);o[property]=_proxy_jslib_full_url(new_val,o.ownerDocument);}finally{_proxy_jslib_url_start=old_url_start;_proxy_jslib_flags[6]=flags_6;}}else{o[property]=_proxy_jslib_full_url(new_val,o.ownerDocument,void 0,void 0,property=='src'&&o.nodeName.match(/^i?frame$/i));}
if(_proxy_jslib_instanceof(o,'Window'))_proxy_jslib_init_domain(o);return new_val;case'profile':if(!o.tagName||o.tagName.toLowerCase()!='head')
return o[property]=val;var u=val.split(/\s+/);for(var i=0;i<u.length;i++)
u[i]=_proxy_jslib_full_url(u[i],o.ownerDocument);o[property]=u.join(' ');return val;case'cssText':if(_proxy_jslib_instanceof(o,'CSSStyleDeclaration')){o[property]=_proxy_jslib_proxify_css(val);return val;}else{return _assign_default();}
case'innerHTML':if(!_proxy_jslib_instanceof(o,'HTMLElement')&&!_proxy_jslib_instanceof(o,'Document'))
return _assign_default();if(is_in_script(o,property))return _assign_default();if(op!='='){switch(o.tagName.toLowerCase()){case'style':new_val=_proxy_jslib_proxify_css(o[property],true);break;case'script':new_val=_proxy_jslib_proxify_js(o[property],void 0,void 0,void 0,true);break;default:new_val=_proxy_jslib_proxify_html(o[property],(o.ownerDocument||o),false,true)[0];}
eval('new_val'+ op+'val');switch(o.tagName.toLowerCase()){case'style':o[property]=_proxy_jslib_proxify_css(new_val);break;case'script':o[property]=_proxy_jslib_proxify_js(new_val);break;default:o[property]=_proxy_jslib_proxify_html(new_val,(o.ownerDocument||o))[0];}
return new_val;}else{switch(o.tagName.toLowerCase()){case'style':o[property]=_proxy_jslib_proxify_css(val);break;case'script':o[property]=_proxy_jslib_proxify_js(val);break;default:o[property]=_proxy_jslib_proxify_html(val,(o.ownerDocument||o))[0];}
return val;}
case'outerHTML':case'outerText':if(!_proxy_jslib_instanceof(o,'HTMLElement')&&!_proxy_jslib_instanceof(o,'Document'))
return _assign_default();if(is_in_script(o,property))return _assign_default();if(op!='='){new_val=_proxy_jslib_proxify_html(o[property],(o.ownerDocument||o),false,true)[0];eval('new_val'+ op+'val');return new_val;}else{o[property]=_proxy_jslib_proxify_html(val,(o.ownerDocument||o))[0];return val;}
case'nodeValue':if(opmod!=''){eval('new_val= o[property]'+ opmod+'val')}
else{new_val=val}
if(_proxy_jslib_instanceof(o,'Attr')){o[property]=_proxy_jslib_proxify_attribute(void 0,o,property,new_val);}else if(_proxy_jslib_instanceof(o,'Node')){o[property]=_proxy_jslib_proxify_attribute(o,void 0,property,new_val);}
return new_val;case'protocol':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(val+'//'+(u[2]!=''?u[2]+'@':'')+u[3]+u[6]+u[7]+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'host':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(u[1]+'//'+(u[2]!=''?u[2]+'@':'')+val+u[6]+u[7]+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'hostname':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(u[1]+'//'+(u[2]!=''?u[2]+'@':'')+val+(u[5]!=''?':'+u[5]:'')+u[6]+u[7]+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'port':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(u[1]+'//'+(u[2]!=''?u[2]+'@':'')+u[4]+(val!=''?':'+val:'')+u[6]+u[7]+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'pathname':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(u[1]+'//'+(u[2]!=''?u[2]+'@':'')+u[3]+val+u[7]+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'search':if(_proxy_jslib_instanceof(o,'Link')||_proxy_jslib_instanceof(o,'Location')){o.href=_proxy_jslib_full_url(u[1]+'//'+(u[2]!=''?u[2]+'@':'')+u[3]+u[6]+val+u[8],o.ownerDocument);if(_proxy_jslib_instanceof(o,'Location'))o._proxy_jslib_original_win.location.href=o.href;return val;}else{return _assign_default();}
case'cookie':if(_proxy_jslib_instanceof(o,'Document')){var new_cookie=_proxy_jslib_cookie_to_client(val,o);if(new_cookie=='')return'';if(_proxy_jslib_USE_DB_FOR_COOKIES){_proxy_jslib_store_cookie_in_db(val);var c=val.match(/^\s*([^\=]+\=[^\;]*)/)[1];if(c!=void 0)_proxy_jslib_COOKIES_FROM_DB+=';'+ c;return _proxy_jslib_COOKIES_FROM_DB;}
return o.cookie=new_cookie;}else{return _assign_default();}
case'domain':if(_proxy_jslib_instanceof(o,'Document')){var w=o.defaultView||o.parentWindow;if(!w._proxy_jslib_document_domain)_proxy_jslib_init_domain(w);if(!w._proxy_jslib_document_domain)return;var pwurl=_proxy_jslib_parse_url(w._proxy_jslib_document_domain);var old_domain=pwurl[4];if(old_domain.match(/^[\d\.]+$/)){alert('Warning: tried to change document.domain from an IP address: ['+old_domain+']');return;}
val=val.replace(/\.+$/,'');if(((('.'+val)==old_domain.slice(-val.length-1))||(val==old_domain))&&val.match(/\./))
{return(w._proxy_jslib_document_domain=pwurl[1]+'//'+ val+':'+ pwurl[5]);}
break;}else{return _assign_default();}
case'withCredentials':if(_proxy_jslib_instanceof(o,'XMLHttpRequest')||_proxy_jslib_instanceof(o,'AnonXMLHttpRequest')){if(typeof o._proxy_jslib_xhrdata.win=='number')
o._proxy_jslib_xhrdata.win=_proxy_jslib_xhrwins[o._proxy_jslib_xhrdata.win];if(o._proxy_jslib_xhrdata.anon)
throw new Error('InvalidAccessError setting XMLHttpRequest.withCredentials');if(o._proxy_jslib_xhrdata.win.document&&o._proxy_jslib_xhrdata.sync)
throw new Error('InvalidAccessError setting XMLHttpRequest.withCredentials');return o.withCredentials=val;}else{return _assign_default();}
case'value':if(_proxy_jslib_instanceof(o,'Attr')){if(opmod!=''){new_val=_proxy_jslib_proxify_attribute(void 0,o,o.name,val,1);eval('new_val'+ opmod+'= val');}else{new_val=val;}
o.value=_proxy_jslib_proxify_attribute(void 0,o,o.name,new_val);return new_val;}else{return _assign_default();}
case'background':case'backgroundImage':case'content':case'cursor':case'listStyle':case'listStyleImage':if(_proxy_jslib_instanceof(o,'CSS2Properties')||_proxy_jslib_instanceof(o,'CSSStyleDeclaration')){o[property]=_proxy_jslib_proxify_css(val);return val;}else{return _assign_default();}
case'text':case'textContent':if(_proxy_jslib_instanceof(o,'Node')){if(o.nodeName.match(/^script$/i)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP inline script-src error");var type=o.type||_proxy_jslib_default_script_type;o[property]=_proxy_jslib_proxify_block(val,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,0);return val;}else if(o.nodeName.match(/^style$/i)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP inline style-src error");var type=o.type||_proxy_jslib_default_style_type;o[property]=_proxy_jslib_proxify_block(val,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,0);return val;}else{return _assign_default();}}else{return _assign_default();}
default:return _assign_default();}
function _assign_default(){if(op=='++')return o[property]++;else if(op=='--')return o[property]--;else if(op=='=')return o[property]=val;else return eval('o[property]'+op+'val');}}
function _proxy_jslib_assign_rval(prefix,property,op,val,cur_val){if(prefix=='delete')return undefined;if(prefix=='++'){val=1;op='+=';}else if(prefix=='--'){val=1;op='-=';}
if(val&&(typeof val=='object')&&(!('toLowerCase'in val)))
return val;var new_val;if(op=='=')
new_val=val;else{new_val=cur_val;eval('new_val'+ op+'val');}
switch(property){case'location':return _proxy_jslib_full_url(new_val);default:return new_val;}}
function _proxy_jslib_with_handle(with_objs,property,cur_val,calls_now,in_new_statement){for(var i=with_objs.length-1;i>=0;i--)
if(property in with_objs[i])
return _proxy_jslib_handle(with_objs[i],property,with_objs[i][property],calls_now,in_new_statement);return _proxy_jslib_handle(null,property,cur_val,calls_now,in_new_statement);}
function _proxy_jslib_with_assign_rval(with_objs,prefix,property,op,val,cur_val){for(var i=with_objs.length-1;i>=0;i--)
if(property in with_objs[i])
return _proxy_jslib_assign(prefix,with_objs[i],property,op,val);return _proxy_jslib_assign_rval(prefix,property,op,val,cur_val);}
function _proxy_jslib_new(o){var oclass;try{if(o===XMLHttpRequest)oclass='XMLHttpRequest'}catch(e){}
if(!oclass)try{if(o===AnonXMLHttpRequest)oclass='AnonXMLHttpRequest'}catch(e){}
if(!oclass)try{if(o===EventSource)oclass='EventSource'}catch(e){}
if(!oclass)try{if(o===WebSocket)oclass='WebSocket'}catch(e){}
if(!oclass)try{if(o===Worker)oclass='Worker'}catch(e){}
if(!oclass)try{if(o===SharedWorker)oclass='SharedWorker'}catch(e){}
if(!oclass)try{if(o===Audio)oclass='Audio'}catch(e){}
if(!oclass)try{if(o===Function)oclass='Function'}catch(e){}
if(!oclass)try{oclass=Function.prototype.toString.call(o).match(/^\n?function ([$\w.]*)/)[1]}catch(e){}
if(!oclass)oclass='';if((oclass=='EventSource')||(oclass=='WebSocket')){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['connect-src'],_proxy_jslib_absolute_url(arguments[1])))
_proxy_jslib_throw_csp_error("connect-src violation with "+ oclass);arguments[1]=_proxy_jslib_full_url(arguments[1]);}else if((oclass=='Worker')||(oclass=='SharedWorker')){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],_proxy_jslib_absolute_url(arguments[1])))
_proxy_jslib_throw_csp_error("script-src violation with "+ oclass);arguments[1]=_proxy_jslib_full_url(arguments[1]);}else if(oclass=='Audio'){arguments[1]=_proxy_jslib_full_url(arguments[1]);}else if(oclass=='Function'){if(!_proxy_jslib_eval_ok)_proxy_jslib_throw_csp_error("can't new Function without unsafe-eval");arguments[arguments.length-1]=_proxy_jslib_proxify_js(arguments[arguments.length-1]);}
var ret;if(arguments.length==1)ret=new o;else if(arguments.length==2)ret=new o(arguments[1]);else if(arguments.length==3)ret=new o(arguments[1],arguments[2]);else if(arguments.length==4)ret=new o(arguments[1],arguments[2],arguments[3]);else if(arguments.length==5)ret=new o(arguments[1],arguments[2],arguments[3],arguments[4]);else{var out_args=[];for(var i=1;i<arguments.length;i++)out_args[i-1]='arguments['+ i+']';var new_statement='new o('+ out_args.join(', ')+')';ret=eval(new_statement);}
if(oclass=='XMLHttpRequest'){_proxy_jslib_xhrwins.push(window);ret._proxy_jslib_xhrdata={origin:_proxy_jslib_origin,win:_proxy_jslib_xhrwins.length-1};}else if(oclass=='AnonXMLHttpRequest'){_proxy_jslib_xhrwins.push(window);ret._proxy_jslib_xhrdata={origin:_proxy_jslib_origin,win:_proxy_jslib_xhrwins.length-1,anon:true};}
return ret;}
function is_in_script(el,property){if(!_proxy_jslib_instanceof(el,'HTMLElement'))return 0;var p=property=='innerHTML'?el:el.parentNode;while(p){if(p.tagName=='SCRIPT')return 1;p=p.parentNode;}
return 0;}
function _proxy_jslib_write_via_buffer(doc,html){var i,buf;for(i=0;i<_proxy_jslib_write_buffers.length;i++){if(_proxy_jslib_write_buffers[i].doc===doc){buf=_proxy_jslib_write_buffers[i];break;}}
if(!buf){buf=_proxy_jslib_write_buffers[_proxy_jslib_write_buffers.length]={doc:doc,buf:html};}else{if(buf.buf==void 0)buf.buf='';buf.buf+=html;}}
function _proxy_jslib_flush_write_buffers(){var buf,i,p;for(i=0;(_proxy_jslib_write_buffers!=void 0)&&(i<_proxy_jslib_write_buffers.length);i++){buf=_proxy_jslib_write_buffers[i];if(buf.buf==void 0)continue;p=_proxy_jslib_proxify_html(buf.buf,buf.doc,!buf.has_jslib);if(p[3])return;buf.has_jslib=buf.has_jslib||p[2];buf.buf=p[1];var doc_write=HTMLDocument.prototype.write||Document.prototype.write;doc_write.call(buf.doc,p[0]);}}
function _proxy_jslib_flush_write_buffer(buf){var p=_proxy_jslib_proxify_html(buf.buf,buf.doc,!buf.has_jslib);if(p[3])return;buf.has_jslib=buf.has_jslib||p[2];buf.buf=p[1];var doc_write=HTMLDocument.prototype.write||Document.prototype.write;doc_write.call(buf.doc,p[0]);}
function _proxy_jslib_dup_window_safe(w){return{_proxy_jslib_original_window:w,navigator:w.navigator,clearInterval:w.clearInterval,moveBy:w.moveBy,self:w,location:w.location,postMessage:function(message,targetOrigin,ports){return _proxy_jslib_postMessage(w,message,targetOrigin,ports);}};}
function _proxy_jslib_dup_location(o){var pl=_proxy_jslib_parse_full_url(o.location.href);var url=pl[3]||'';if(_proxy_jslib_locations[url])return _proxy_jslib_locations[url];var is_in_frame=pl[2]?_proxy_jslib_unpack_flags(pl[2])[5]:0;pl=url?_proxy_jslib_parse_url(url):[];return _proxy_jslib_locations[url]={_proxy_jslib_original_win:o.defaultView||o.parentWindow||o,hash:pl[8],host:pl[3],hostname:pl[4],href:pl[0],pathname:pl[6],port:pl[5],protocol:pl[1],search:pl[7],origin:(o.defaultView||o.parentWindow||o)._proxy_jslib_origin,assign:function(url){return o.location.assign(_proxy_jslib_full_url_by_frame(url,o.document||o,is_in_frame));},reload:function(force){return o.location.reload(force);},replace:function(url){return o.location.replace(_proxy_jslib_full_url_by_frame(url,o.document||o,is_in_frame));},toString:function(){return this.href;}};}
function _proxy_jslib_postMessage(win,message,targetOrigin,ports){if((targetOrigin=='*')||(targetOrigin=='/'))
if(ports==void 0){return win.postMessage(message,targetOrigin);}else{return win.postMessage(message,targetOrigin,ports);}
var u=_proxy_jslib_parse_full_url(win.location.href)[3];if(u&&u!='about:blank'){var pu1=_proxy_jslib_parse_url(u);var pu2=_proxy_jslib_parse_url(targetOrigin);var port1=pu1[5]||(pu1[1]=='https'?443:80);var port2=pu2[5]||(pu2[1]=='https'?443:80);if((pu1[1]!=pu2[1])||(pu1[4]!=pu2[4])||(port1!=port2))
return void 0;}
if(ports==void 0){return win.postMessage(message,_proxy_jslib_url_start);}else{return win.postMessage(message,_proxy_jslib_url_start,ports);}}
function _proxy_jslib_init_domain(w,url){if(!url){if(!w.location||!w.location.href||w.location.href=='about:blank'){w._proxy_jslib_document_domain=void 0;return;}
url=w.location.href.replace(/^wyciwyg:\/\/\d+\//i,'');url=_proxy_jslib_parse_full_url(url)[3];if(!url)return;url=decodeURIComponent(url);}
if(!url.match(/^(?:https?|ftp):/i)){w._proxy_jslib_document_domain=void 0;return;}
var purl=_proxy_jslib_parse_url(url);purl[3]=purl[3].replace(/\.+$/,'');if(!purl[5])purl[5]=(purl[1]=='http:')?80:(purl[1]=='https:')?443:0;if(!purl[5])w._proxy_jslib_document_domain=void 0;else w._proxy_jslib_document_domain=purl[1]+'//'+ purl[3]+':'+ purl[5];}
function _proxy_jslib_iframe_init_html(){var jslib_element='<script class="_proxy_jslib_jslib" type="text/javascript" src="'
+ _proxy_jslib_html_escape(_proxy_jslib_url_start_inframe
+ _proxy_jslib_wrap_proxy_encode('x-proxy://scripts/jslib'))
+'"><\/script>\n';var base_url_jsq=document._proxy_jslib_base_url.replace(/(["\\])/g,function(p){return"\\"+p});if(base_url_jsq!=void 0)base_url_jsq='"'+ base_url_jsq+'"';var cookies_from_db_jsq=_proxy_jslib_COOKIES_FROM_DB.replace(/(["\\])/g,function(p){return"\\"+p});var pv_element='<script class="_proxy_jslib_pv" type="text/javascript">_proxy_jslib_pass_vars('
+ base_url_jsq+',"'
+ _proxy_jslib_origin+'", '
+ _proxy_jslib_cookies_are_banned_here+','
+ _proxy_jslib_doing_insert_here+','
+ _proxy_jslib_SESSION_COOKIES_ONLY+','
+ _proxy_jslib_COOKIE_PATH_FOLLOWS_SPEC+','
+ _proxy_jslib_RESPECT_THREE_DOT_RULE+','
+ _proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS+',"'
+ _proxy_jslib_RTMP_SERVER_PORT+'","'
+ _proxy_jslib_default_script_type+'","'
+ _proxy_jslib_default_style_type+'",'
+ _proxy_jslib_USE_DB_FOR_COOKIES+','
+ _proxy_jslib_PROXIFY_COMMENTS+','
+ _proxy_jslib_ALERT_ON_CSP_VIOLATION+',"'
+ cookies_from_db_jsq+'",'
+ _proxy_jslib_TIMEOUT_MULTIPLIER+',"'
+ _proxy_jslib_csp_st+'")<\/script>';return jslib_element+ pv_element;}
function _proxy_jslib_full_url(uri_ref,doc,reverse,retain_query,is_frame_src){var script,r_l,m1,m2,r_q,query,data_type,data_clauses,data_content,data_charset,data_base64;if(!uri_ref)return uri_ref;retain_query=false;uri_ref=uri_ref.toString();if(!reverse&&(uri_ref.indexOf(_proxy_jslib_SCRIPT_URL)==0))
return uri_ref;if(uri_ref.match(/^blob\:/i))return uri_ref;if(uri_ref=='//:')return uri_ref;if(!doc)doc=window.document;if(uri_ref==null)return'';if(reverse)return _proxy_jslib_parse_full_url(uri_ref)[3];if(!doc._proxy_jslib_base_url)_proxy_jslib_set_base_vars(doc,_proxy_jslib_parse_full_url(doc.URL)[3]);uri_ref=uri_ref.replace(/^\s+|\s+$/g,'');if(uri_ref.match(/^about\:\s*blank$/i))return uri_ref;if(/^(javascript|livescript)\:/i.test(uri_ref)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP inline script-src error: 'javascript:' URL");script=uri_ref.replace(/^(javascript|livescript)\:/i,'');r_l=_proxy_jslib_separate_last_js_statement(script);r_l[1]=r_l[1].replace(/\s*;\s*$/,'');if(is_frame_src){return"javascript: '<body>"
+ _proxy_jslib_iframe_init_html().replace(/(['\\])/g,function(p){return"\\"+p})
+"<script>"
+ _proxy_jslib_proxify_js(r_l[0],0).replace(/(['\\])/g,function(p){return"\\"+p})
+"; document.write(_proxy_jslib_proxify_html("
+ _proxy_jslib_proxify_js(r_l[1],0).replace(/(['\\])/g,function(p){return"\\"+p})
+")[0])</script></body>'";}
return'javascript:'+ _proxy_jslib_proxify_js(r_l[0],1)
+'; _proxy_jslib_proxify_html('+ _proxy_jslib_proxify_js(r_l[1],0)+')[0]';}else if(m1=uri_ref.match(/^(fscommand:)(.*)/i)){return m1[1]+ _proxy_jslib_proxify_js(m1[2]);}else if(m1=uri_ref.match(/^data:([\w\.\+\$\-]+\/[\w\.\+\$\-]+)?;?([^\,]*)\,?(.*)/i)){data_type=m1[1].toLowerCase();if(data_type=='text/html'||data_type=='text/css'||data_type.match(/script/i)){data_clauses=m1[2].split(/;/);data_content=m1[3];for(var i=0;i<data_clauses.length;i++){if(m2=data_clauses[i].match(/^charset=(\S+)/i)){data_charset=m2[1];}else if(data_clauses[i].toLowerCase()=='base64'){data_base64=1;}}
data_content=data_base64?atob(data_content):data_content.replace(/%([\da-fA-F]{2})/g,function(s,p1){return String.fromCharCode(eval('0x'+p1))});data_content=(data_type=='text/html')?_proxy_jslib_proxify_html(data_content)[0]:_proxy_jslib_proxify_block(data_content,data_type,1);data_content=btoa(data_content);return data_charset?'data:'+ data_type+';charset='+ data_charset+';base64,'+ data_content:'data:'+ data_type+';base64,'+ data_content;}else{return uri_ref;}}
var uf=uri_ref.match(/^([^\#]*)(\#.*)?/);var uri=uf[1];var frag=uf[2]||'';if(uri=='')return uri_ref;uri=uri.replace(/[\r\n]/g,'');if(retain_query){r_q=uri.split(/\?/);uri=r_q[0];query=r_q[1];if(query)query='?'+query;else query='';}
if(doc._proxy_jslib_base_url){while(uri.match(/^\/\.\.?\//))uri=uri.replace(/^\/\.\.?\//,'/');if(doc._proxy_jslib_base_path.length==doc._proxy_jslib_base_host.length+1)
while(uri.match(/^\.\.?\//))uri=uri.replace(/^\.\.?\//,'');}
var absurl;if(/^[\w\+\.\-]*\:/.test(uri)){absurl=uri}
else if(/^\/\//.test(uri)){absurl=doc._proxy_jslib_base_scheme+ uri}
else if(/^\//.test(uri)){absurl=doc._proxy_jslib_base_host+ uri}
else if(/^\?/.test(uri)){absurl=doc._proxy_jslib_base_file+ uri}
else{absurl=doc._proxy_jslib_base_path+ uri}
var ret=_proxy_jslib_url_start+ _proxy_jslib_wrap_proxy_encode(absurl)+(retain_query?query:'')+ frag;return ret;}
function _proxy_jslib_full_url_by_frame(uri_ref,doc,is_frame,reverse,is_frame_src){var old_url_start=_proxy_jslib_url_start;_proxy_jslib_url_start=is_frame?_proxy_jslib_url_start_inframe:_proxy_jslib_url_start_noframe;try{var ret=_proxy_jslib_full_url(uri_ref,doc,reverse,void 0,is_frame_src);}finally{_proxy_jslib_url_start=old_url_start;}
return ret;}
function _proxy_jslib_set_base_vars(doc,base_url){if(!base_url)base_url=_proxy_jslib_parse_full_url(doc.URL)[3];if(!base_url.match(/^\s*https?\:\/\//i)){doc._proxy_jslib_base_url=doc._proxy_jslib_base_scheme=doc._proxy_jslib_base_host=doc._proxy_jslib_base_path=doc._proxy_jslib_base_file='';return;}
doc._proxy_jslib_base_url=base_url.replace(/^\s+|\s+$/g,'').replace(/^([\w\+\.\-]+\:\/\/[^\/\?]+)\/?/,"$1/");doc._proxy_jslib_base_scheme=doc._proxy_jslib_base_url.match(/^([\w\+\.\-]+\:)\/\//)[1];doc._proxy_jslib_base_host=doc._proxy_jslib_base_url.match(/^([\w\+\.\-]+\:\/\/[^\/\?]+)/)[1];doc._proxy_jslib_base_path=doc._proxy_jslib_base_url.match(/^([^\?]*\/)/)[1];doc._proxy_jslib_base_file=doc._proxy_jslib_base_url.match(/^([^\?]*)/)[1];}
function _proxy_jslib_absolute_url(uri,doc){var absurl;doc=doc||document;if(/^[\w\+\.\-]*\:/.test(uri)){absurl=uri}
else if(/^\/\//.test(uri)){absurl=doc._proxy_jslib_base_scheme+ uri}
else if(/^\//.test(uri)){absurl=doc._proxy_jslib_base_host+ uri}
else if(/^\?/.test(uri)){absurl=doc._proxy_jslib_base_file+ uri}
else{absurl=doc._proxy_jslib_base_path+ uri}
return absurl;}
function _proxy_jslib_wrap_proxy_encode(URL){var uf=URL.match(/^([^\#]*)(\#.*)?/);var uri=uf[1];var frag=uf[2]?uf[2]:'';uri=_proxy_jslib_proxy_encode(uri);uri=uri.replace(/\=/g,'=3d').replace(/\?/g,'=3f').replace(/\#/g,'=23').replace(/\%/g,'=25').replace(/\&/g,'=26').replace(/\;/g,'=3b').replace(/\[/g,'=5b').replace(/\]/g,'=5d');while(uri.match(/\/\//))uri=uri.replace(/\/\//g,'=2f=2f');return uri+ frag;}
function _proxy_jslib_wrap_proxy_decode(enc_URL){var uf=enc_URL.match(/^([^\?\#]*)([^\#]*)(.*)/);var uri=uf[1];var query=uf[2];var frag=uf[3]?uf[3]:'';uri=uri.replace(/\=2f/g,'/').replace(/\=25/g,'%').replace(/\=23/g,'#').replace(/\=3f/g,'?').replace(/\=26/g,'&').replace(/\=3b/g,';').replace(/\=3d/g,'=');uri=_proxy_jslib_proxy_decode(uri);return uri+ query+ frag;}
function _proxy_jslib_full_url_connect(url){var m;if(!url)return url;if(url.match(/^https?\:\/\//i))return _proxy_jslib_full_url(url);if(m=url.match(/^rtmp\:\/\/([^\/]*\/[^\/]*)\/(.*)/i)){var new_app=encodeURIComponent(m[1]);var portst=_proxy_jslib_RTMP_SERVER_PORT==1935?'':':'+ _proxy_jslib_RTMP_SERVER_PORT;return'rtmp://'+ _proxy_jslib_THIS_HOST+ portst+'/'+ new_app+'/'+ m[2];}
return url;}
function _proxy_jslib_full_url_play(url){if(!url)return url;if(typeof url!='string')return url;if(!url.match(/^https?\:\/\//i))return url;return _proxy_jslib_full_url(url);}
function _proxy_jslib_reverse_full_url(url){return _proxy_jslib_parse_full_url(url)[3];}
function _proxy_jslib_proxify_js_array_0(a){if((a instanceof Array)&&((typeof a[0]=='string')||(a[0]instanceof String)))
a[0]=_proxy_jslib_proxify_js(a[0]+'()').replace(/\(\)$/,'');return a;}
function _proxy_jslib_proxify_js_array_1_0(a){if((a instanceof Array)&&((typeof a[1][0]=='string')||(a[1][0]instanceof String)))
a[1][0]=_proxy_jslib_proxify_js(a[1][0]+'()').replace(/\(\)$/,'');return a;}
var _proxy_jslib_in_mb=0;var _proxy_jslib_call_stack=[];function alert_obj(obj){if(obj==1954)_proxy_jslib_in_mb++;if(typeof obj=='number'&&obj>0)_proxy_jslib_call_stack.unshift(obj);if(_proxy_jslib_call_stack.length>50)_proxy_jslib_call_stack.pop();if(_proxy_jslib_in_mb<4)return;alert('in alert_obj, call stack=\n'+ _proxy_jslib_call_stack+'\nobj= ['+ JSON.stringify(obj)+']');if(typeof obj=='number'&&obj==-_proxy_jslib_call_stack[0])_proxy_jslib_call_stack.shift();}
function _proxy_jslib_cookie_to_client(cookie,doc){if(_proxy_jslib_cookies_are_banned_here)return'';var u=_proxy_jslib_parse_url((doc.defaultView||doc.parentWindow)._proxy_jslib_URL);if(u==null){alert("CGIProxy Error: Can't parse URL <"+(doc.defaultView||doc.parentWindow)._proxy_jslib_URL+">; not setting cookie.");return'';}
var origin_host=u[4];var source_path=u[6];if(source_path.substr(0,1)!='/')source_path='/'+ source_path;cookie=cookie.replace(/[\0\n\r]/g,'');var name,value,expires_clause,path,domain,secure_clause;var new_name,new_value,new_cookie;name=value=expires_clause=path=domain=secure_clause=new_name=new_value=new_cookie='';if(/^\s*([^\=\;\,\s]*)\s*\=?\s*([^\;]*)/.test(cookie)){name=RegExp.$1;value=RegExp.$2;}
if(/\;\s*(expires\s*\=[^\;]*)/i.test(cookie))expires_clause=RegExp.$1;if(/\;\s*path\s*\=\s*([^\;\,\s]*)/i.test(cookie))path=RegExp.$1;if(/\;\s*domain\s*\=\s*([^\;\,\s]*)/i.test(cookie))domain=RegExp.$1;if(/\;\s*(secure\b)/i.test(cookie))secure_clause=RegExp.$1;if(path=='')path=_proxy_jslib_COOKIE_PATH_FOLLOWS_SPEC?source_path:'/';if(domain==''){domain=origin_host;}else{domain=domain.replace(/\.+$/,'');domain=domain.replace(/\.{2,}/g,'.');if((origin_host.substr(origin_host.length-domain.length)!=domain.toLowerCase())&&('.'+origin_host!=domain))
return'';if(domain.match(/^[\d\.]$/)&&(domain!=origin_host))return'';var dots=domain.match(/\./g);if(_proxy_jslib_RESPECT_THREE_DOT_RULE){if(dots.length<3&&!(dots.length>=2&&/\.(com|edu|net|org|gov|mil|int)$/i.test(domain)))
return'';}else{if(dots.length<2){if(domain.match(/^\./))return'';domain='.'+domain;if(dots.length<1)return'';}}}
new_name=_proxy_jslib_cookie_encode('COOKIE;'+name+';'+path+';'+domain);new_value=_proxy_jslib_cookie_encode(value+';'+secure_clause);if(_proxy_jslib_SESSION_COOKIES_ONLY&&(expires_clause!='')){/^expires\s*\=\s*(.*)$/i.test(expires_clause);var expires_date=RegExp.$1.replace(/\-/g,' ');if(Date.parse(expires_date)>(new Date()).getTime())expires_clause='';}
new_cookie=new_name+'='+new_value;if(expires_clause!='')new_cookie=new_cookie+'; '+expires_clause;new_cookie=new_cookie+'; path='+_proxy_jslib_SCRIPT_NAME+'/';return new_cookie;}
function _proxy_jslib_cookie_from_client(doc){if(_proxy_jslib_cookies_are_banned_here)return _proxy_jslib_COOKIES_FROM_DB;if(!doc.cookie)return _proxy_jslib_COOKIES_FROM_DB;var target_path,target_server,target_scheme;var u=_proxy_jslib_parse_url((doc.defaultView||doc.parentWindow)._proxy_jslib_URL);if(u==null){alert("CGIProxy Error: Can't parse URL <"+(doc.defaultView||doc.parentWindow)._proxy_jslib_URL+">; not using cookie.");return;}
target_scheme=u[1];target_server=u[4];target_path=u[6];if(target_path.substr(0,1)!='/')target_path='/'+ target_path;var matches=new Array();var pathlen=new Object();var cookies=doc.cookie.split(/\s*;\s*/);for(var c=0;c<cookies.length;c++){var nv=cookies[c].split('=',2);var name=_proxy_jslib_cookie_decode(nv[0]);var value=_proxy_jslib_cookie_decode(nv[1]);var n=name.split(/;/);if(n[0]=='COOKIE'){var cname,path,domain,cvalue,secure;cname=n[1];path=n[2];domain=n[3].toLowerCase();var v=value.split(/;/);cvalue=v[0];secure=v[1];if(secure!=''&&secure!=null&&target_scheme!='https:')continue;if(((target_server.substr(target_server.length-domain.length)==domain)||(domain=='.'+target_server))&&target_path.substr(0,path.length)==path)
{matches[matches.length]=cname?cname+'='+cvalue:cvalue;pathlen[cname+'='+cvalue]=path.length;}}}
matches.sort(function(v1,v2){return(pathlen[v2]-pathlen[v1])});if(_proxy_jslib_COOKIES_FROM_DB!='')matches.unshift(_proxy_jslib_COOKIES_FROM_DB);return matches.join('; ');}
function _proxy_jslib_store_cookie_in_db(cookie){var url=_proxy_jslib_url_start_inframe
+ _proxy_jslib_wrap_proxy_encode('x-proxy://cookies/set-cookie?'
+ _proxy_jslib_origin+'&'+ _proxy_jslib_cookie_encode(cookie));var xhr=new XMLHttpRequest();xhr.open('GET',url);xhr.send();}
function _proxy_jslib_proxify_html(html,doc,still_needs_jslib,reverse){var out=[];var match,m2,last_lastIndex=0,remainder;var tag_name,html_pos,head_pos;var base_url,base_url_jsq,jslib_block,insert_string,insert_pos;var jslib_added=false;if(html==void 0)return[void 0,void 0,false,false];if(typeof html=='number')return[html,void 0,false,false];html=html.toString();var RE=new RegExp(/([^\<]*(?:\<(?![\w\/\!])[^\<]*)*)(?:(\<\!\-\-(?=[\s\S]*?\-\-\>)[\s\S]*?\-\-\s*\>|\<\!\-\-(?![\s\S]*?\-\-\>)[\s\S]*?\>)|(\<script\b[\s\S]*?\<\/script\b[\s\S]*?\>)|(\<style\b[\s\S]*?\<\/style\b[\s\S]*?\>)|(\<\![^\>]*\>)|(\<\?[^\>]*\>)|(\<[^\>]*\>))?/gi);var RE2=new RegExp(/[^\>]*(?:\>|$)/g);while((last_lastIndex!=html.length)&&(match=RE.exec(html))){if(match.index!=last_lastIndex){remainder=html.slice(last_lastIndex);break;}
last_lastIndex=RE2.lastIndex=RE.lastIndex;out.push(match[1]);if(match[2]){out.push(_proxy_jslib_proxify_comment(match[2],doc,reverse));}else if(match[3]){out.push(_proxy_jslib_proxify_script_block(match[3],doc,reverse));}else if(match[4]){out.push(_proxy_jslib_proxify_style_block(match[4],doc,reverse));}else if(match[5]){out.push(_proxy_jslib_proxify_decl_bang(match[5],doc,reverse));}else if(match[6]){out.push(_proxy_jslib_proxify_decl_question(match[6],doc,reverse));}else if(match[7]){m2=match[7].match(/^\<\s*(\/?[A-Za-z][\w\.\:\-]*)/);if(!m2)continue;tag_name=m2[1].toLowerCase();if((tag_name=='script')||(tag_name=='style')){remainder=match[7]+html.slice(last_lastIndex);break;}
if((tag_name=='frameset')&&_proxy_jslib_doing_insert_here&&!_proxy_jslib_is_in_frame&&!reverse){_proxy_jslib_return_frame_doc(_proxy_jslib_wrap_proxy_encode(_proxy_jslib_URL),doc);return['',void 0,false,true];}
if(tag_name=='/object')_proxy_jslib_current_object_classid='';var new_element=_proxy_jslib_proxify_element(match[7],doc,reverse);while(new_element==void 0&&last_lastIndex!=html.length){m2=RE2.exec(html);last_lastIndex=RE.lastIndex=RE2.lastIndex;match[7]+=m2[0];new_element=_proxy_jslib_proxify_element(match[7],doc,reverse);}
out.push(new_element);if(tag_name=='html'){html_pos=out.length}
else if(tag_name=='head'){head_pos=out.length}}else{break;}}
if((last_lastIndex!=html.length)&&!remainder)
remainder=html.slice(last_lastIndex);if(still_needs_jslib&&!reverse){jslib_block='<script class="_proxy_jslib_jslib" type="text/javascript" src="'
+ _proxy_jslib_html_escape(_proxy_jslib_url_start+_proxy_jslib_wrap_proxy_encode('x-proxy://scripts/jslib'))
+'"><\/script>\n';if(!doc._proxy_jslib_base_url){base_url=_proxy_jslib_parse_full_url(doc.URL)[3];_proxy_jslib_set_base_vars(doc,base_url);}
base_url_jsq=doc._proxy_jslib_base_url.replace(/(["\\])/g,function(p){return'\\'+p});if(base_url_jsq!=void 0)base_url_jsq='"'+ base_url_jsq+'"';var cookies_from_db_jsq=_proxy_jslib_COOKIES_FROM_DB.replace(/(["\\\\])/g,function(p){return"\\\\"+p});insert_string='<script  class="_proxy_jslib_pv" type="text/javascript">_proxy_jslib_pass_vars('
+ base_url_jsq+',"'
+ _proxy_jslib_origin+'",'
+ _proxy_jslib_cookies_are_banned_here+','
+ _proxy_jslib_doing_insert_here+','
+ _proxy_jslib_SESSION_COOKIES_ONLY+','
+ _proxy_jslib_COOKIE_PATH_FOLLOWS_SPEC+','
+ _proxy_jslib_RESPECT_THREE_DOT_RULE+','
+ _proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS+',"'
+ _proxy_jslib_RTMP_SERVER_PORT+'","'
+ _proxy_jslib_default_script_type+'","'
+ _proxy_jslib_default_style_type+'",'
+ _proxy_jslib_USE_DB_FOR_COOKIES+','
+ _proxy_jslib_PROXIFY_COMMENTS+','
+ _proxy_jslib_ALERT_ON_CSP_VIOLATION+',"'
+ cookies_from_db_jsq+'",'
+ _proxy_jslib_TIMEOUT_MULTIPLIER+',"'
+ _proxy_jslib_csp_st+'")<\/script>\n';insert_pos=head_pos||html_pos||0;out.splice(insert_pos,0,jslib_block,insert_string);jslib_added=true;}
return[out.join(''),remainder,jslib_added];}
function _proxy_jslib_proxify_comment(comment,doc,reverse){if(!_proxy_jslib_PROXIFY_COMMENTS)return comment;var m=comment.match(/^\<\!\-\-([\S\s]*?)(\-\-\s*)?>$/);var contents=m[1];var end=m[2];contents=_proxy_jslib_proxify_html(contents,doc,false,reverse)[0];comment='<!--'+ contents+ end+'>';return comment;}
function _proxy_jslib_proxify_decl_bang(decl_bang,doc,reverse){var q;var inside=decl_bang.match(/^\<\!([^>]*)/)[1];var words=inside.match(/\"[^\"\>]*\"?|\'[^\'\>]*\'?|[^\'\"][^\s\>]*/g);for(var i=0;i<words.length;i++){words[i]=words[i].replace(/^\s*/,'');if(words[i].match(/^[\'\"]?http\:\/\/www\.w3\.org\//))continue;if(words[i].match(/^[\"\']?[\w\+\.\-]+\:\/\//)){if(words[i].match(/^'/)){q="'";words[i]=words[i].replace(/^\'|\'$/g,'')}
else if(words[i].match(/^"/)){q='"';words[i]=words[i].replace(/^\"|\"$/g,'')}
else{q=''}
words[i]=q+ _proxy_jslib_full_url(words[i],doc,reverse)+ q;}}
decl_bang='<!'+ words.join(' ')+'>';return decl_bang;}
function _proxy_jslib_proxify_decl_question(decl_question,doc,reverse){return decl_question;}
function _proxy_jslib_proxify_script_block(script_block,doc,reverse){var m1,m2,tag,script,attrs,attr,name;attr=new Object();m1=script_block.match(/^(\<\s*script\b[^\>]*\>)([\s\S]*)\<\s*\/script\b[^\>]*\>$/i);script=m1[2];if(script.match(/\S/)&&!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP script-src inline error");tag=_proxy_jslib_proxify_element(m1[1],doc,reverse);attrs=tag.match(/^\<\s*script\b([^\>]*)\>/i)[1];while(m2=attrs.match(/([A-Za-z][\w\.\:\-]*)\s*(\=\s*(\"([^\"\>]*)\"?|\'([^\'\>]*)\'?|([^\'\"][^\s\>]*)))?/)){attrs=attrs.substr(m2[0].length);name=m2[1].toLowerCase();if(attr[name]!=null)continue;attr[name]=m2[4]?m2[4]:m2[5]?m2[5]:m2[6]?m2[6]:'';attr[name]=_proxy_jslib_html_unescape(attr[name]);}
if(attr.type!=null)attr.type=attr.type.toLowerCase();if(!attr.type&&attr.language){attr.type=attr.language.match(/javascript|ecmascript|livescript|jscript/i)?'application/x-javascript':attr.language.match(/css/i)?'text/css':attr.language.match(/vbscript/i)?'application/x-vbscript':attr.language.match(/perl/i)?'application/x-perlscript':attr.language.match(/tcl/i)?'text/tcl':'';}
if(!attr.type)attr.type=_proxy_jslib_default_script_type;script=_proxy_jslib_proxify_block(script,attr.type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,reverse);return tag+script+'<\/script>';}
function _proxy_jslib_proxify_style_block(style_block,doc,reverse){var m1,m2,tag,stylesheet,attrs,type;m1=style_block.match(/^(\<\s*style\b[^\>]*\>)([\s\S]*)\<\s*\/style\b[^\>]*\>$/i);stylesheet=m1[2];if(stylesheet.match(/\S/)&&!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error("CSP style-src inline error");tag=_proxy_jslib_proxify_element(m1[1],doc,reverse);attrs=tag.match(/^\<\s*style\b([^\>]*)\>/i)[1];while(m2=attrs.match(/([A-Za-z][\w\.\:\-]*)\s*(\=\s*(\"([^\"\>]*)\"?|\'([^\'\>]*)\'?|([^\'\"][^\s\>]*)))?/)){attrs=attrs.substr(m2[0].length);if(m2[1].toLowerCase()=='type'){type=m2[4]!=null?m2[4]:m2[5]!=null?m2[5]:m2[6]!=null?m2[6]:'';type=_proxy_jslib_html_unescape(type).toLowerCase();break;}}
if(!type)type=_proxy_jslib_default_style_type;stylesheet=_proxy_jslib_proxify_block(stylesheet,type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,reverse);return tag+stylesheet+'<\/style>';}
function _proxy_jslib_proxify_element(element,doc,reverse){var m1,m2,tag_name,attrs,attr={},names=[],name,i,rebuild,end_slash,old_url_start;if(!doc)doc=window.document;if(!(m1=element.match(/^\<\s*([A-Za-z][\w\.\:\-]*)\s*([\s\S]*)$/)))return element;tag_name=m1[1].toLowerCase();attrs=m1[2];if(attrs=='')return element;while(m2=attrs.match(/([A-Za-z][\w\.\:\-]*)\s*(\=\s*(\"([^\"]*)\"|\'([^\']*)\'|([^\'\"][^\s\>]*)|(\'[^\']*$|\"[^\"]*$)))?/)){if(m2[7])return void 0;attrs=attrs.substr(m2.index+m2[0].length);name=m2[1].toLowerCase();if(name in attr){rebuild=1;continue}
attr[name]=(m2[4]!=void 0&&m2[4]!='')?m2[4]:(m2[5]!=void 0&&m2[5]!='')?m2[5]:(m2[6]!=void 0&&m2[6]!='')?m2[6]:'';attr[name]=_proxy_jslib_html_unescape(attr[name]);names.push(name);}
for(i=0;i<names.length;i++){name=names[i];if(attr[name].match(/\&\{.*\}\;/)){delete attr[name];rebuild=1;continue}
if(name.match(/^on/)){attr[name]=_proxy_jslib_proxify_block(attr[name],_proxy_jslib_default_script_type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,reverse);rebuild=1;}}
if(tag_name=='object'){_proxy_jslib_current_object_classid=attr.classid;if(attr.data){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['object-src'],_proxy_jslib_absolute_url(attr.data)))
_proxy_jslib_throw_csp_error('object-src violation in <object data> attribute');var old_url_start=_proxy_jslib_url_start;var flags_5=_proxy_jslib_flags[5];_proxy_jslib_flags[5]=1;try{_proxy_jslib_url_start=_proxy_jslib_url_start_by_flags(_proxy_jslib_flags);attr.data=_proxy_jslib_full_url(attr.data,doc,reverse);}finally{_proxy_jslib_url_start=old_url_start;_proxy_jslib_flags[5]=flags_5;}
rebuild=1;}}else if(tag_name=='param'){if(attr.name&&attr.name.match(/^movie$/i)){attr.value=_proxy_jslib_full_url(attr.value,doc,reverse,1);rebuild=1;}}else if(tag_name=='applet'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['object-src'],_proxy_jslib_absolute_url(attr.code)))
_proxy_jslib_throw_csp_error('object-src violation in <applet code> attribute');var arcs=attr.archive.split(/\s+/);for(var i=0;i<arcs.length;i++)
if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['object-src'],_proxy_jslib_absolute_url(arcs[i])))
_proxy_jslib_throw_csp_error('object-src violation in <applet archive> attribute');var old_base_url=doc._proxy_jslib_base_url;if(attr.codebase)_proxy_jslib_set_base_vars(doc,attr.codebase);attr.code=_proxy_jslib_full_url(attr.code,doc,reverse);for(var i;i<arcs.length;i++)
arcs[i]=_proxy_jslib_full_url(arcs[i],doc,reverse);attr.archive=arcs.join(' ');_proxy_jslib_set_base_vars(doc,old_base_url);rebuild=1;}else if(tag_name=='base'){(doc.defaultView||doc.parentWindow)._proxy_jslib_base_unframes=attr.target&&attr.target.match(/^_(top|blank)$/i);}
if('style'in attr){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error('style-src violation with <'+tag_name+' style> attribute');if(attr.style.match(/(expression|function)\s*\(/i))
attr.style=_proxy_jslib_global_replace(attr.style,/\b((expression|function)\s*\()([^\)]*)/i,function(p){return p[1]+_proxy_jslib_proxify_js(p[3],void 0,void 0,void 0,reverse)});attr.style=_proxy_jslib_proxify_block(attr.style,_proxy_jslib_default_style_type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,reverse);rebuild=1;}
if(('href'in attr)&&tag_name.match(/^(a|base|area|link)$/)){if((tag_name=='link')&&(attr.rel&&attr.rel.toLowerCase()=='icon')&&!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(attr.href)))
{_proxy_jslib_throw_csp_error("img-src violation in <link rel=icon href> attribute");}else if(tag_name=='base'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['base-uri'],_proxy_jslib_absolute_url(attr.href)))
_proxy_jslib_throw_csp_error("CSP base-uri error: "+ val);_proxy_jslib_set_base_vars(doc,attr.href);}
if(((doc.defaultView||doc.parentWindow)._proxy_jslib_base_unframes&&attr.target==void 0)||(attr.target&&attr.target.match(/^_(top|blank)$/i)))
attr.href=_proxy_jslib_full_url_by_frame(attr.href,doc,0,reverse);else
attr.href=_proxy_jslib_full_url(attr.href,doc,reverse)
rebuild=1;}
if('src'in attr){if(tag_name=='frame'||tag_name=='iframe'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['frame-src'],_proxy_jslib_absolute_url(attr.src)))
_proxy_jslib_throw_csp_error("CSP frame-src inline error");attr.src=_proxy_jslib_full_url_by_frame(attr.src,doc,1,reverse,1);rebuild=1;}else if(tag_name=='script'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],_proxy_jslib_absolute_url(attr.src))){_proxy_jslib_throw_csp_error("CSP script-src inline error");}else{var old_url_start=_proxy_jslib_url_start;var flags_6=_proxy_jslib_flags[6];_proxy_jslib_flags[6]=(attr.type!==void 0)?attr.type:_proxy_jslib_default_script_type;try{_proxy_jslib_url_start=_proxy_jslib_url_start_by_flags(_proxy_jslib_flags);attr.src=_proxy_jslib_full_url(attr.src,doc,reverse);rebuild=1;}finally{_proxy_jslib_url_start=old_url_start;_proxy_jslib_flags[6]=flags_6;}}}else if(tag_name=='embed'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['object-src'],_proxy_jslib_absolute_url(attr.src)))
_proxy_jslib_throw_csp_error("object-src violation in <embed src> attribute");{attr.src=_proxy_jslib_full_url(attr.src,doc,reverse,(attr.type&&attr.type.toLowerCase()=='application/x-shockwave-flash'));rebuild=1}}else if(tag_name=='img'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(attr.src)))
_proxy_jslib_throw_csp_error("img-src violation in <img src> attribute");attr.src=_proxy_jslib_full_url(attr.src,doc,reverse);rebuild=1;}else if(tag_name=='video'||tag_name=='audio'||tag_name=='source'||tag_name=='track'){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['media-src'],_proxy_jslib_absolute_url(attr.src)))
_proxy_jslib_throw_csp_error("media-src violation in <"+tag_name+" src> attribute");attr.src=_proxy_jslib_full_url(attr.src,doc,reverse);rebuild=1;}else{attr.src=_proxy_jslib_full_url(attr.src,doc,reverse);rebuild=1;}}
if('srcdoc'in attr){if(tag_name=='iframe')attr.srcdoc=_proxy_jslib_proxify_html(attr.srcdoc,doc,1,reverse)[0];rebuild=1}
if('lowsrc'in attr){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(attr.lowsrc)))
_proxy_jslib_throw_csp_error("img-src violation in <img lowsrc> attribute");attr.lowsrc=_proxy_jslib_full_url(attr.lowsrc,doc,reverse);rebuild=1;}
if('action'in attr){if(((doc.defaultView||doc.parentWindow)._proxy_jslib_base_unframes&&attr.target==void 0)||(attr.target&&attr.target.match(/^_(top|blank)$/i)))
attr.action=_proxy_jslib_full_url_by_frame(attr.action,doc,0,reverse);else
attr.action=_proxy_jslib_full_url(attr.action,doc,reverse);rebuild=1;}
if('dynsrc'in attr){attr.dynsrc=_proxy_jslib_full_url(attr.dynsrc,doc,reverse);rebuild=1}
if('formaction'in attr){attr.formaction=_proxy_jslib_full_url(attr.formaction,doc,reverse);rebuild=1}
if('background'in attr){attr.background=_proxy_jslib_full_url(attr.background,doc,reverse);rebuild=1}
if('usemap'in attr){attr.usemap=_proxy_jslib_full_url(attr.usemap,doc,reverse);rebuild=1}
if('cite'in attr){attr.cite=_proxy_jslib_full_url(attr.cite,doc,reverse);rebuild=1}
if('longdesc'in attr){attr.longdesc=_proxy_jslib_full_url(attr.longdesc,doc,reverse);rebuild=1}
if('codebase'in attr){attr.codebase=_proxy_jslib_full_url(attr.codebase,doc,reverse);rebuild=1}
if('poster'in attr){attr.poster=_proxy_jslib_full_url(attr.poster,doc,reverse);rebuild=1}
if('pluginspage'in attr){attr.pluginspage=_proxy_jslib_full_url(attr.pluginspage,doc,reverse);rebuild=1}
if((tag_name=='meta')&&attr['http-equiv']&&attr['http-equiv'].match(/^\s*refresh\b/i)){attr.content=_proxy_jslib_global_replace(attr.content,/(\;\s*URL\=)\s*(\S*)/i,function(a){return a[1]+ _proxy_jslib_full_url(a[2],doc,reverse)});rebuild=1;}
if(!rebuild)return element;attrs='';for(i=0;i<names.length;i++){name=names[i];if(attr[name]==null)continue;if(attr[name]==''){attrs+=' '+name;continue}
if(!attr[name].match(/\"/)||attr[name].match(/\'/)){attrs+=' '+name+'="'+_proxy_jslib_html_escape(attr[name])+'"';}else{attrs+=' '+name+"='"+_proxy_jslib_html_escape(attr[name])+"'";}}
end_slash=element.match(/\/\s*>?$/)?' /':'';return'<'+tag_name+attrs+end_slash+'>';}
function _proxy_jslib_element2tag(e){var ret='',i;if(e.nodeType!=1)alert('in element2tag; nodeType=['+e.nodeType+']');for(i=0;i<e.attributes.length;i++)
ret+=' '+e.attributes[i].nodeName+'="'+e.attributes[i].nodeValue+'"';ret='<'+e.tagName+ret+'>';for(i=0;i<e.childNodes.length;i++)
if(e.childNodes[i].nodeType==1)ret+='\n'+_proxy_jslib_element2tag(e.childNodes[i]);else if(e.childNodes[i].nodeType==3)ret+='\n'+e.childNodes[i].nodeValue;return ret;}
function _proxy_jslib_proxify_attribute(element,attr,name,value,reverse){if(/\&\{.*\}\;/.test(value))return;name=name.toLowerCase();element=element||(attr&&attr.ownerElement);var element_name=element?element.nodeName.toLowerCase():'';if(/^(href|src|lowsrc|dynsrc|action|background|usemap|cite|longdesc|codebase|poster)$/i.test(name)){if((name=='href')&&!element_name.match(/^(a|area|base|link)$/i))
return value;return _proxy_jslib_full_url_by_frame(value,null,true,reverse,name.toLowerCase()=='src'&&element_name.match(/^i?frame$/i));}else if(/^on/i.test(name)){return _proxy_jslib_proxify_block(value,_proxy_jslib_default_script_type,_proxy_jslib_ALLOW_UNPROXIFIED_SCRIPTS,reverse);}else if(/^style$/i.test(name)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],"'unsafe-inline'"))
_proxy_jslib_throw_csp_error('style-src violation with style attribute');if(/\b(expression|function)\s*\(/i.test(value))return;else return value;}else if(/^data$/i.test(name)&&element_name.match(/^object$/i)){return _proxy_jslib_full_url_by_frame(value,null,true,reverse);}else{return value;}}
function _proxy_jslib_proxify_block(s,type,unknown_type_ok,reverse){if(type)type=type.toLowerCase();if(type=='text/css'){return _proxy_jslib_proxify_css(s,reverse);}else if(type&&type.match(/^(application\/x\-javascript|application\/x\-ecmascript|application\/javascript|application\/ecmascript|text\/javascript|text\/ecmascript|text\/livescript|text\/jscript)$/)){return _proxy_jslib_proxify_js(s,1,void 0,void 0,reverse);}else{return unknown_type_ok?s:'';}}
function _proxy_jslib_proxify_css(css,reverse){if(!css||(typeof css!='string'))return css;var out='',m1,q,out2;while(m1=css.match(/(\@font\-face\s*\{([^}]*)\})|\burl\s*\(\s*(([^\)]*\\\))*[^\)]*)(\)|$)/i)){if(m1[1]){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(m1[3])))
_proxy_jslib_throw_csp_error('img-src violation in url()');out+=css.substr(0,m1.index)+'@font-face {'+ _proxy_jslib_proxify_font_face(m1[1],null,reverse)+'}';}else{if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(m1[3])))
_proxy_jslib_throw_csp_error('img-src violation in url()');out+=css.substr(0,m1.index)+'url('+ _proxy_jslib_css_full_url(m1[3],null,reverse)+')';}
css=css.substr(m1.index+m1[0].length);}
out+=css;css=out;out='';while(m1=css.match(/\@import\s*(\"[^"]*\"|\'[^']*\'|[^\;\s\<]*)/i)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['style-src'],_proxy_jslib_absolute_url(m1[1])))
_proxy_jslib_throw_csp_error('style-src violation in @import');if(!m1[1].match(/^url\s*\(/i)){out+=css.substr(0,m1.index)+'@import '+ _proxy_jslib_css_full_url(m1[1],null,reverse);}else{out+=css.substr(0,m1.index)+ m1[0];}
css=css.substr(m1.index+m1[0].length);}
out+=css;css=out;out='';while(m1=css.match(/\bimage\s*\((\"[^"]*\"|\'[^']*\'|\#?\w+(\([^\)]*\))\))/i)){out2=[];var items=m1[1].split(/\s*,\s*/);for(var i=0;i<items.length;i++){if(items[i].match(/^['"]/)){q=items[i].slice(0,1);items[i]=items[i].slice(1,-1);if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['img-src'],_proxy_jslib_absolute_url(items[i])))
_proxy_jslib_throw_csp_error('img-src violation in image()');out2.push(q+ _proxy_jslib_full_url(items[i],null,reverse)+ q);}else{out2.push(items[i]);}}
out+='image('+ out2.join(',')+')';css=css.substr(m1.index+m1[0].length);}
out+=css;css=out;out='';while(m1=css.match(/((expression|function)\s*\()([^)]*)/i)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['script-src'],_proxy_jslib_absolute_url(m1[3])))
_proxy_jslib_throw_csp_error('script-src violation');out+=css.substr(0,m1.index)+ m1[1]+ _proxy_jslib_proxify_js(m1[3],void 0,void 0,void 0,reverse);css=css.substr(m1.index+m1[0].length);}
out+=css;return out;}
function _proxy_jslib_css_full_url(url,doc,reverse){var q='';url=url.replace(/\s+$/,'');if(url.match(/^\"/)){q='"';url=url.replace(/^\"|\"$/g,'')}
else if(url.match(/^\'/)){q="'";url=url.replace(/^\'|\'$/g,'')}
url=url.replace(/\\(.)/g,"$1").replace(/^\s+|\s+$/g,'');url=_proxy_jslib_full_url(url,doc,reverse);url=url.replace(/([\(\)\,\s\'\"\\])/g,function(p){return'\\'+p});return q+url+q;}
function _proxy_jslib_proxify_font_face(css,doc,reverse){var out='';while(m1=css.match(/\burl\s*\(\s*(([^\)]*\\\))*[^\)]*)(\)|$)/i)){if(!_proxy_jslib_match_csp_source_list(_proxy_jslib_csp['font-src'],_proxy_jslib_absolute_url(m1[1])))
_proxy_jslib_throw_csp_error('font-src violation in url()');out+=css.substr(0,m1.index)+'url('+ _proxy_jslib_css_full_url(m1[1],doc,reverse)+')';css=css.substr(m1.index+m1[0].length);}
out+=css;return out;}
function _proxy_jslib_return_frame_doc(enc_URL,doc){var top_URL=_proxy_jslib_html_escape(_proxy_jslib_url_start_inframe
+ _proxy_jslib_wrap_proxy_encode('x-proxy://frames/topframe?URL='
+ encodeURIComponent(enc_URL)));var page_URL=_proxy_jslib_html_escape(_proxy_jslib_url_start_inframe+ enc_URL);doc.open();doc.write('<html>\n<frameset rows="80,*">\n'
+'<frame src="'+top_URL+'">\n<frame src="'+page_URL+'" name="_proxy_jslib_main_frame">\n'
+'<\/frameset>\n</html>');doc.close();}
function _proxy_jslib_match_csp_source_list(directives,uri){var match,pr_uri,i,j,m1,uscheme,uhost,uport,upath,sscheme,shost,sport,spath,pscheme,phost,pport;if(!_proxy_jslib_csp_is_supported)return true;if((uri==void 0)||(directives==void 0))return true;pr_uri=_proxy_jslib_URL;if(uri=="'unsafe-inline'"||uri=="'unsafe-eval'"){for(i=0;i<directives.length;i++){match=false;for(j=0;j<directives[i].length;j++){if(directives[i][j]==uri){match=true;break;}}
if(!match)return false;}
return true;}
uri=_proxy_jslib_absolute_url(uri);m1=_proxy_jslib_parse_url(uri);uscheme=m1[1];uhost=m1[4];uport=m1[5]||((uscheme=='http:')?80:(uscheme=='https:')?443:void 0);upath=decodeURIComponent(m1[6]);if(!upath.match(/^\//))upath='/'+ upath;for(i=0;i<directives.length;i++){match=false;for(j=0;j<directives[i].length;j++){if(directives[i][j]=="'none'")return false;if(directives[i][j]=="*"){match=true;break;}
if(directives[i][j].match(/^[\w+\.\-]+\:$/)){if(directives[i][j]==uscheme){match=true;break;}
continue;}else if(!directives[i][j].match(/^\'/)){if(!uhost)continue;m1=directives[i][j].match(/^(([\w\+\.\-]+:)\/\/)?([^\/\?\:]*)(:([^\/\?]*))?([^\?]*)/);sscheme=m1[2];shost=m1[3];sport=m1[5]||((sscheme=='http:')?80:(sscheme=='https:')?443:void 0);spath=decodeURIComponent(m1[6]);if(sscheme&&(sscheme!=uscheme))continue;if(!sscheme){if(pr_uri.match(/^http\:/)&&(uscheme!='http:')&&(uscheme!='https:'))continue;if(!pr_uri.match(/^http\:/)&&(pr_uri.slice(0,uscheme.length)!=uscheme))continue;}
if((m1=shost.match(/^\*(\..*)/))&&(uhost.slice(-m1[1].length)!=m1[1]))continue;if(!shost.match(/^\*\..*/)&&(uhost!=shost))continue;if(!sport&&(uport!=((uscheme=='http:')?80:(uscheme=='https:')?443:-1)))continue;if(sport&&(sport!='*')&&(sport!=uport))continue;if(spath&&spath.match(/^\/$/)&&(upath.slice(0,spath.length)!=spath))continue;if(spath&&!spath.match(/^\/$/)&&(spath!=upath))continue;match=true;break;}else if(directives[i][j]=="'self'"){m1=pr_uri.match(/^(([\w\+\.\-]+:)\/\/)?([^\/\?\:]*)(:([^\/\?]*))?([^\?]*)/);pscheme=m1[2];phost=m1[3];pport=m1[5]||((pscheme=='http:')?80:(pscheme=='https:')?443:void 0);if((uscheme==pscheme)&&(uhost==phost)&&(uport==pport)){match=true;break;}}}
if(!match)false;}
return true;}
function _proxy_jslib_throw_csp_error(msg){if(_proxy_jslib_ALERT_ON_CSP_VIOLATION)alert("CSP violation: "+ msg);throw new Error("CSP violation: "+ msg);}
function _proxy_jslib_csp_is_supported_test(){var ua=navigator.userAgent;var match;if(match=ua.match(/\bChrome\/(\d+)/))return match[1]>=25;if(match=ua.match(/\bFirefox\/(\d+)/))return match[1]>=23;return false;}
function _proxy_jslib_proxify_js(s,top_level,with_level,in_new_statement,reverse){if((s==void 0)||(s==''))return s;if(with_level==void 0)with_level=0;if(in_new_statement==void 0)in_new_statement=0;if(!((typeof s=='string')||(s instanceof String)))
return s;var jsin=_proxy_jslib_tokenize_js(s);if(reverse)return _proxy_jslib_proxify_js_tokens_reverse(jsin,0,jsin.length);return _proxy_jslib_proxify_js_tokens(jsin,0,jsin.length,top_level,with_level,in_new_statement,reverse);}
function _proxy_jslib_proxify_js_tokens_reverse(jsin,start,end)
{var RE=_proxy_jslib_RE;var i,i_jsin,out,element,token,match,p,op,estart,eend,tstart,tend;out=[];out.push=_proxy_jslib_ORIGINAL_ARRAY_push;i_jsin=start;while(i_jsin<end){element=jsin[i_jsin++];token=element.skip?void 0:element;if(token=='_proxy_jslib_handle'){if(jsin[i_jsin+1]=='null'){out.push(jsin[i_jsin+7]);i_jsin+=15;}else{estart=i_jsin+1;i_jsin=eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,0);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));if(match=jsin[i_jsin+2].match(/^'(\w+)'$/)){out.push('.',match[1]);i_jsin+=13;}else if(jsin[i_jsin+2]=='('){out.push('[');estart=i_jsin+3;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));out.push(']');if(jsin[eend]!=')')
alert('error parsing _proxy_jslib_handle; next token is ['+jsin[eend]+']');i_jsin=eend+11;}else{alert('error parsing _proxy_jslib_handle; next token is ['+jsin[i_jsin+2]+']');break;}}}else if(token=='_proxy_jslib_assign'){if(jsin[i_jsin+1]=="''"){tstart=i_jsin+4;tend=_proxy_jslib_get_next_js_expr(jsin,tstart,end,0);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,tstart,tend));if(match=jsin[tend+2].match(/^'(\w+)'$/)){out.push('.',match[1]);op=jsin[tend+5].match(/^'([^']*)'$/)[1];out.push(op);if(jsin[tend+8]=="''"){i_jsin=tend+10;}else if(jsin[tend+8]=='('){estart=tend+9;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));i_jsin=eend+2;}else{alert('error parsing _p_j_assign; next token is ['+jsin[tend+8]+']');}}else if(jsin[tend+2]=='('){out.push('[');estart=tend+3;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));out.push(']');op=jsin[eend+3].match(/^'([^']*)'$/)[1];out.push(op);if(jsin[eend+6]=="''"){i_jsin=eend+8;}else if(jsin[eend+6]=='('){estart=eend+7;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));i_jsin=eend+2;}else{alert('error parsing _p_j_assign; next token is ['+jsin[eend+6]+']');}}else{alert('error parsing _p_j_assign; next token is ['+jsin[tend+2]+']');}}else if(match=jsin[i_jsin+1].match(/^'(\+\+|--|delete)'$/)){op=match[1];out.push(op);tstart=i_jsin+4;tend=_proxy_jslib_get_next_js_expr(jsin,tstart,end,0);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,tstart,tend));if(match=jsin[tend+2].match(/^'(\w+)'$/)){out.push('.',match[1]);i_jsin=tend+10;}else if(jsin[tend+2]=='('){out.push('[');estart=tend+3;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));out.push(']');i_jsin=_proxy_jslib_get_next_js_expr(jsin,eend+2,end,1)+ 1;}else{alert('error parsing _p_j_assign; next token is ['+jsin[tend+2]+']');}}else{alert('error parsing _p_j_assign; next token is ['+jsin[i_jsin+1]+']');}}else if(token=='_proxy_jslib_assign_rval'){out.pop();out.pop();p=out.pop();if(jsin[i_jsin+1]=="''"){if(match=jsin[i_jsin+4].match(/^'(\w+)'$/)){if(p!=match[1])
alert('error parsing _proxy_jslib_assign_rval; p doesn\'t match');out.push(p);if(match=jsin[i_jsin+7].match(/^'(\+\+|--)'$/)){out.push(match[1]);i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+13,end,1)+ 1;}else if(match=jsin[i_jsin+7].match(/^'([^']+)'$/)){out.push(match[1]);if(jsin[i_jsin+10]=='('){estart=i_jsin+11;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));i_jsin=_proxy_jslib_get_next_js_expr(jsin,eend+2,end,1)+ 1;}else{alert('error parsing _proxy_jslib_assign_rval; next token is ['+jsin[i_jsin+10]+']');}}else{alert('error parsing _proxy_jslib_assign_rval; next token is ['+jsin[i_jsin+7]+']');}}else{alert('error parsing _proxy_jslib_assign_rval; missing prop');}}else if(match=jsin[i_jsin+1].match(/^'(\+\+|--|delete)'$/)){out.push(match[1]);if(match=jsin[i_jsin+4].match(/^'(\w+)'$/)){out.push(match[1]);i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+13,end,1);}else{alert('error parsing _proxy_jslib_assign_rval; missing prop');}}else{alert('error parsing _proxy_jslib_assign_rval; bad prefix');}}else if(token=='_proxy_jslib_with_handle'){out.push(jsin[i_jsin+7]);jsin+=15;}else if(token=='_proxy_jslib_with_assign_rval'){out.pop();out.pop();p=out.pop();match=jsin[i_jsin+7].match(/^'(\w+)'$/);if(p!=match[1])
alert('error parsing _proxy_jslib_with_assign_rval; p doesn\'t match');if(jsin[i_jsin+4]=="''"){out.push(p);if(match=jsin[i_jsin+10].match(/^'(\+\+|--)'$/)){out.push(match[1]);i_jsin+=18;}else if(match=jsin[i_jsin+10].match(/^'([^']+)'$/)){out.push(match[1]);estart=i_jsin+14;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,1);out.push(_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend));i_jsin=eend+5;}else{alert('error parsing _proxy_jslib_with_assign_rval; next token is ['+jsin[i_jsin+10]+']');}}else if(match=jsin[i_jsin+4].match(/^'(\+\+|--|delete)'$/)){out.push(match[1],p);i_jsin+=18;}else{alert('error parsing _proxy_jslib_with_assign_rval; prefix is ['+jsin[i_jsin+4]+']');}}else if(token=='_proxy_jslib_eval_ok'){estart=i_jsin+3;while((jsin[estart]!='eval')&&(estart<end))estart++;estart+=5;eend=_proxy_jslib_get_next_js_expr(jsin,estart,end,0);out.push('eval(',_proxy_jslib_proxify_js_tokens_reverse(jsin,estart,eend),')');i_jsin=eend+18;}else if(token=='_proxy_jslib_increments'){if(jsin[i_jsin]==')'){out.length-=5;i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+6,end,1)+ 1;}else{i_jsin+=5;}}else if(token=='_proxy_jslib_with_objs'){if(jsin[i_jsin]=='='){out.pop();out.pop();out.pop();i_jsin+=6;}else if(jsin[i_jsin]=='['){i_jsin+=7;}else if(jsin[i_jsin]=='.'){i_jsin+=6;}}else if(token=='_proxy_jslib_flush_write_buffers'){i_jsin+=3;}else if(match=element.match(/^_proxy(\d+)_/)){out.push(element.replace(/^_proxy\d+/,'_proxy'+(match[1]>1?match[1]-1:'')));}else{out.push(element);}}
return out.join('');}
function _proxy_jslib_proxify_js_tokens(jsin,start,end,top_level,with_level,in_new_statement,reverse)
{var RE=_proxy_jslib_RE;var i_jsin,i_jsin_start,out,element,token,last_token,new_last_token,newline_since_last_token,term_so_far='',sub_expr,op,new_val,cur_val_str,inc_by,in_braces=0,in_func=false,expr,new_expr,var_decl,varname,eq,value,skip1,skip2,funcname,with_obj,code,match,m2,o_p,ostart,oend,pstart,pend,p,estart,eend,skipped,i,i_next_token,i_lt,next_token,next_expr,next_expr_st,skipped,args,fn_body,t;out=[];out.push=_proxy_jslib_ORIGINAL_ARRAY_push;if(top_level)_proxy_jslib_does_write=false;i_jsin=start;OUTER:while(i_jsin<end){i_jsin_start=i_jsin;element=jsin[i_jsin++];token=element.skip?void 0:element;if(RE.LINETERMINATOR.test(element))newline_since_last_token=true;new_last_token='';if(token=='{'){in_braces++;}else if(token=='}'){if(--in_braces==0)in_func=false;}
i_next_token=i_lt=i_jsin;while(i_next_token<end&&jsin[i_next_token].skip)i_next_token++;next_token=(i_next_token<end)?jsin[i_next_token]:void 0;while(i_lt<i_next_token&&!RE.LINETERMINATOR.test(jsin[i_lt]))i_lt++;if(i_lt==i_next_token)i_lt=void 0;if(!token){if(term_so_far)term_so_far+=element;else out.push(element);}else if(RE.N_S_RE.test(token)){out.push(term_so_far);term_so_far=token;}else if(/^(\+\+|\-\-|delete)$/.test(token)){if(token=='--'&&(next_token=='>')){i_jsin=i_next_token+1;out.push(term_so_far,'-->');term_so_far='';}else if(term_so_far!=''&&!newline_since_last_token){out.push(term_so_far,token);term_so_far='';}else{out.push(term_so_far);term_so_far='';var start_parens=0;while(jsin[i_next_token]=='('){start_parens++;i_jsin=i_next_token+1;while(jsin[i_jsin].skip)i_jsin++;i_next_token=i_jsin;}
o_p=_proxy_jslib_get_next_js_term(jsin,i_jsin,end);if(o_p==void 0)break;ostart=o_p[0];oend=o_p[1];pstart=o_p[2];pend=o_p[3];i_next_token=pend;while(jsin[i_next_token].skip)i_next_token++;while(start_parens){if(jsin[i_next_token]!=')')break OUTER;new_last_token=')';start_parens--;i_next_token++;while(jsin[i_next_token].skip)i_next_token++;}
if(oend>ostart){if(pstart>=pend){p='';out.concat(token,jsin.slice(i_jsin_start,i_next_token));}else if(jsin[pstart]=='['){p=_proxy_jslib_proxify_js_tokens(jsin,pstart+1,pend-1,0,with_level);out.push(" _proxy_jslib_assign('"+ token+"', ("
+ _proxy_jslib_proxify_js_tokens(jsin,ostart,oend,0,with_level)+"), ("
+ p+"), '')");}else{out.push(" _proxy_jslib_assign('"+ token+"', ("
+ _proxy_jslib_proxify_js_tokens(jsin,ostart,oend,0,with_level)
+"), '"+ jsin[pstart]+"', '')");}}else{if(jsin[pstart]=='['){p=_proxy_jslib_proxify_js_tokens(jsin,pstart+1,pend-1,0,with_level);out.push(" _proxy_jslib_assign('"+ token+"', ("
+ _proxy_jslib_proxify_js_tokens(jsin,ostart,oend,0,with_level)+"), ("
+ p+"), '')");}else{p=jsin[pstart];if(token=='delete')
out.push('delete '+ p);else if(p!='location')
out.push(token,p);else
out.push("("+ p+"= _proxy_jslib_assign_rval('"
+ token+"', '"+ p+"', '', '', "
+"(typeof "+ p+"=='undefined' ? void 0 : "+ p+")))");}}
i_jsin=i_next_token;}}else if(token=='eval'&&(next_token=='(')){estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;term_so_far=term_so_far.match(RE.DOTSKIPEND)?'(_proxy_jslib_eval_ok ? '+ term_so_far+'eval(_proxy_jslib_proxify_js(('
+ _proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level)
+'), 0, '+ with_level+') ) : _proxy_jslib_throw_csp_error("bad eval") )':term_so_far+'(_proxy_jslib_eval_ok ? eval(_proxy_jslib_proxify_js(('
+ _proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level)
+'), 0, '+ with_level+') ) : _proxy_jslib_throw_csp_error("bad eval") )';}else if(/^(open|write|writeln|load|eval|setInterval|setTimeout|toString|String|src|currentSrc|href|background|lowsrc|action|formAction|location|poster|URL|url|newURL|oldURL|referrer|baseURI|useMap|longDesc|cite|codeBase|profile|cssText|insertRule|setStringValue|setProperty|backgroundImage|content|cursor|listStyleImage|host|hostname|pathname|port|protocol|search|setNamedItem|innerHTML|outerHTML|outerText|body|parentNode|insertAdjacentHTML|setAttribute|setAttributeNode|getAttribute|nodeValue|value|cookie|domain|frames|parent|top|opener|execScript|execCommand|navigate|showModalDialog|showModelessDialog|addImport|LoadMovie|close|getElementById|getElementsByTagName|appendChild|replaceChild|insertBefore|removeChild|createElement|text|textContent|origin|postMessage|pushState|replaceState|localStorage|sessionStorage|querySelector|querySelectorAll|send|setRequestHeader|withCredentials)$/.test(token)){_proxy_jslib_does_write=_proxy_jslib_does_write||(token=='write')||(token=='writeln')||(token=='eval');if(newline_since_last_token&&/^(\)|\]|\+\+|\-\-)$|^([a-zA-Z\$\_\\\d'"]|\.\d|\/..)/.test(last_token)&&!/^(case|delete|do|else|in|instanceof|new|typeof|void|function|var)$/.test(last_token))
{out.push(term_so_far);term_so_far='';}
var has_dot=term_so_far.match(RE.DOTSKIPEND);term_so_far=term_so_far.replace(RE.DOTSKIPEND,'');var next_is_paren=(next_token=='(')?1:0;if(/^[\{\,]/.test(last_token)&&(next_token==':')){out.push(term_so_far,token);for(i=i_jsin;i<=i_next_token;i++)out.push(jsin[i]);i_jsin=i_next_token+1;term_so_far='';new_last_token=':';}else if(token=='String'&&!next_is_paren){if(has_dot)term_so_far+='.';term_so_far+=token;div_ok=1;}else if((i_lt==void 0)&&(next_token=='++'||next_token=='--')){op=next_token;i_jsin=i_next_token+1;if(term_so_far==''){out.push(' ',(with_level?(token+"= _proxy_jslib_with_assign_rval(_proxy_jslib_with_objs, '', '"+token+"', '"+op+"', '', "+token+")"):(token+"= _proxy_jslib_assign_rval('', '"+token+"', '"+op+"', '', (typeof "+token+"=='undefined' ? void 0 : "+ token+"))")));}else{term_so_far=" _proxy_jslib_assign('', "+term_so_far+", '"+token+"', '"+op+"', '')";}
new_last_token=')';}else if(next_token&&next_token.match(RE.ASSIGNOP)){op=next_token;estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);if(i_jsin==void 0)break;new_val=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);if(term_so_far==''){out.push(' ',(with_level?(token+"= _proxy_jslib_with_assign_rval(_proxy_jslib_with_objs, '', '"+token+"', '"+op+"', ("+new_val+"), "+token+")"):(token+"= _proxy_jslib_assign_rval('', '"+token+"', '"+op+"', ("+new_val+"), (typeof "+token+"=='undefined' ? void 0 : "+ token+"))")))}else{term_so_far=" _proxy_jslib_assign('', "+term_so_far+", '"+token+"', '"+op+"', ("+new_val+"))";}
new_last_token=')';}else{if(term_so_far==''){term_so_far=(with_level?(" _proxy_jslib_with_handle(_proxy_jslib_with_objs, '"+token+"', "+token+", "+next_is_paren+", "+in_new_statement+")"):(" _proxy_jslib_handle(null, '"+token+"', "+token+", "+next_is_paren+", "+in_new_statement+")"));}else{term_so_far=" _proxy_jslib_handle("+term_so_far+", '"+token+"', '', "+next_is_paren+", "+in_new_statement+")";}
new_last_token=')';}}else if(/^(if|while|for|switch)$/.test(token)){if(next_token!='(')break;out.push(term_so_far,token,'(');term_so_far='';estart=i_jsin=++i_next_token;if(token!='for'){eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push(_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level),')');}else{while(jsin[i_next_token].skip)i_next_token++;if(jsin[i_next_token].match(RE.IdentifierName)){while(jsin[++i_next_token].skip);if(jsin[i_next_token]=='in'){eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push(_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level),')');}else{o_p=_proxy_jslib_get_next_js_term(jsin,i_jsin,end);if(o_p!=void 0){i_next_token=o_p[3];while(jsin[i_next_token].skip)i_next_token++;}
if(o_p!=void 0&&jsin[i_next_token]=='in'){eend=_proxy_jslib_get_next_js_expr(jsin,++i_next_token,end,0);if(jsin[eend]!=')')break;var rval=_proxy_jslib_proxify_js_tokens(jsin,i_next_token,eend,0,with_level);var temp_varname='_proxy_jslib_temp'+ _proxy_jslib_temp_counter++;var p_param=jsin[o_p[2]]=='['?_proxy_jslib_proxify_js_tokens(jsin,o_p[2]+1,o_p[3]-1,0,with_level):"'"+ jsin[o_p[2]]+"'";out.push('var ',temp_varname,' in ',rval,') {','_proxy_jslib_assign("", (',_proxy_jslib_proxify_js_tokens(jsin,o_p[0],o_p[1],0,with_level),'), (',p_param,'), "=", ',temp_varname,') ;');i_jsin=eend+1;while(jsin[i_jsin].skip)i_jsin++;if(jsin[i_jsin]!='{'){var stmt_start=i_jsin;var stmt_end=_proxy_jslib_get_next_js_expr(jsin,stmt_start,end,0);while(jsin[stmt_end]==',')
stmt_end=_proxy_jslib_get_next_js_expr(jsin,stmt_end+1,end,0);out.push(_proxy_jslib_proxify_js_tokens(jsin,stmt_start,stmt_end,0,with_level),'; }');i_jsin=stmt_end;}else
i_jsin++;}else{eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push(_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level),')');}}}else{eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push(_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level),')');}}}else if(token=='catch'){out.push(term_so_far,token);term_so_far='';if(next_token!='(')break;estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push('(');for(i=estart;i<eend;i++)out.push(jsin[i]);out.push(')');}else if(token=='function'){out.push(term_so_far,token);term_so_far='';if(next_token&&next_token.match(RE.IdentifierName)){for(i=i_jsin;i<i_next_token;i++)out.push(jsin[i]);funcname=next_token;i_jsin=i_next_token+1;while(i_jsin<end-1&&jsin[i_jsin]=='.'&&jsin[i_jsin+1].match(RE.IdentifierName)){funcname+=jsin[i_jsin]+ jsin[i_jsin+1];i_jsin+=2;}}else{funcname='';}
if(m2=funcname.match(/^_proxy(\d*)_/))
funcname='_proxy'+(m2[1]-0+1)+ funcname.replace(/^_proxy(\d*)/,'');out.push(funcname);i_next_token=i_jsin;while(i_next_token<end&&jsin[i_next_token].skip)i_next_token++;for(i=i_jsin+1;i<i_next_token;i++)out.push(jsin[i]);if(jsin[i_next_token]!='(')break;estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')break;out.push('(');for(i=estart;i<eend;i++)out.push(jsin[i]);out.push(') {');while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||jsin[i_jsin++]!='{')break;in_braces++;in_func=true;}else if(token=='with'){out.push(term_so_far);term_so_far='';skip1='';for(i=i_jsin;i<i_next_token;i++)skip1+=jsin[i];if(next_token!='(')break;estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);with_obj=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);if(i_jsin>=end||jsin[i_jsin++]!=')')break;skip2='';while(i_jsin<end&&jsin[i_jsin].skip)skip2+=jsin[i_jsin++];if(jsin[i_jsin]=='{'){estart=++i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);code='{'+ _proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level+1)+'}';if(i_jsin>=end||jsin[i_jsin++]!='}')break;}else{estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);code=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level+1);while(jsin[i_jsin]==','){estart=++i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);code+=','+ _proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level+1);}}
out.push('{',with_level?'':'var _proxy_jslib_with_objs= [] ;');out.push('with',skip1,'(_proxy_jslib_with_objs[_proxy_jslib_with_objs.length]= (',with_obj,'))',skip2,code);out.push('; _proxy_jslib_with_objs.length-- ;}');new_last_token=';';}else if(token=='var'||token=='let'){out.push(term_so_far,token);term_so_far='';while(1){estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);i=estart;while(i<eend&&jsin[i].skip)out.push(jsin[i++]);varname=(i<eend)?jsin[i]:void 0;if(!varname||!varname.match(RE.IdentifierName))break OUTER;if(varname&&(match=varname.match(/^_proxy(\d*)_/)))
varname='_proxy'+(match[1]-0+1)+ varname.replace(/^_proxy(\d*)/,'');out.push(varname);i++;while(i<eend&&jsin[i].skip)out.push(jsin[i++]);eq=(i<eend)?jsin[i]:void 0;if(eq&&!(eq=='='||eq=='in'))break OUTER;if(eq)out.push(eq,_proxy_jslib_proxify_js_tokens(jsin,i+1,eend,0,with_level));if(i_jsin>=end||jsin[i_jsin]!=',')break;i_jsin++;out.push(',');}}else if(token=='new'){out.push(term_so_far);term_so_far='';var test_jsin;if(next_token=='function'){term_so_far='new function';i_jsin=i_next_token+1;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||jsin[i_jsin++]!='(')break;estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin>=end||jsin[i_jsin++]!=')')break;term_so_far+='(';for(i=estart;i<eend;i++)term_so_far+=jsin[i];term_so_far+=')';while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||jsin[i_jsin++]!='{')break;estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin>=end||jsin[i_jsin++]!='}')break;fn_body=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level,0);term_so_far+='{'+fn_body+'}';new_last_token='}';}else{if(next_token=='('){estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin>=end||jsin[i_jsin++]!=')')break;}else{estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_constructor(jsin,i_jsin,end);}
new_expr=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level,1);while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;test_jsin=i_jsin+1;while(test_jsin<end&&jsin[test_jsin].skip)test_jsin++;if(jsin[i_jsin]=='('&&jsin[test_jsin]!=')'){i_jsin++;out.push('_proxy_jslib_new(('+new_expr+'), ');new_last_token=',';}else{if(jsin[i_jsin]=='('&&jsin[test_jsin]==')')i_jsin=test_jsin+1;out.push('_proxy_jslib_new('+new_expr+')');new_last_token=')';}}}else if((token=='return')&&!in_func&&top_level){out.push(term_so_far);term_so_far='';estart=i_jsin=i_next_token;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);while(jsin[i_jsin]==','){estart=++i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);}
new_expr=estart==eend?'void 0':_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);out.push('return ((_proxy_jslib_ret= (',new_expr,')), _proxy_jslib_flush_write_buffers(), _proxy_jslib_ret)');}else if((token=='break')||(token=='continue')){out.push(term_so_far,token);term_so_far='';if(next_token.match(RE.IdentifierName)){for(i=i_jsin;i<=i_next_token;i++)out.push(jsin[i]);i_jsin=i_next_token+1;new_last_token=next_token;}}else if(/^(abstract|boolean|byte|case|char|class|const|debugger|default|delete|do|else|enum|export|extends|final|finally|float|goto|implements|in|instanceof|int|interface|long|native|package|private|protected|return|short|static|synchronized|throw|throws|transient|try|typeof|void|volatile)$/.test(token)){out.push(term_so_far,token);term_so_far='';}else if(token.match(RE.IDENTIFIER)){if(match=token.match(/^\_proxy(\d*)(\_.*)/))// the "-0" is to typecast match[1] to a number
token='_proxy'+(match[1]-0+1)+match[2];if(newline_since_last_token&&/^(\)|\]|\+\+|\-\-)$|^([a-zA-Z\$\_\\\d'"]|\.\d|\/..)/.test(last_token)&&!/^(case|delete|do|else|in|instanceof|new|typeof|void|function|var)$/.test(last_token))
{out.push(term_so_far);term_so_far=token;}else{term_so_far+=token;}}else if(token=='.'){term_so_far+='.';}else if(token=='('){_proxy_jslib_does_write=true;estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin>=end||jsin[i_jsin++]!=')')break;term_so_far+='('+ _proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level)+')';new_last_token=')';}else if(token=='['){estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin>=end||jsin[i_jsin++]!=']')break;if(eend-estart<=1&&!/\D/.test(jsin[estart])){term_so_far+='['+(eend!=estart?jsin[estart]:'')+']';new_last_token=']';}else{sub_expr=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);if(term_so_far){new_last_token=')';i_next_token=i_lt=i_jsin;while(i_next_token<end&&jsin[i_next_token].skip)i_next_token++;next_token=(i_next_token<end)?jsin[i_next_token]:void 0;while(i_lt<i_next_token&&!RE.LINETERMINATOR.test(jsin[i_lt]))i_lt++;if(i_lt==i_next_token)i_lt=void 0;var next_is_paren=(jsin[i_next_token]=='(')?1:0;if((i_lt==void 0)&&(next_token=='++'||next_token=='--')){op=next_token;i_jsin=i_next_token+1;term_so_far=" _proxy_jslib_assign('', "+term_so_far+", ("+sub_expr+"), '"+op+"', '')";}else if(next_token&&next_token.match(RE.ASSIGNOP)){op=next_token;estart=i_jsin=i_next_token+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,0);new_val=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);term_so_far=" _proxy_jslib_assign('', "+term_so_far+", ("+sub_expr+"), '"+op+"', ("+new_val+"))";}else{term_so_far=" _proxy_jslib_handle("+term_so_far+", ("+sub_expr+"), '', "+next_is_paren+", "+in_new_statement+")";}}else{term_so_far='['+sub_expr+']';new_last_token=']';}}}else if(token=='{'&&term_so_far==''&&last_token!=')'&&((last_token==void 0)||last_token.match(RE.PUNCDIVPUNC)||last_token.match(/^(?:case|delete|in|instanceof|new|return|throw|typeof)$/))&&(!next_token.match(/^(?:break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with)/))&&(next_token.match(RE.IDENTIFIER)||next_token.match(RE.STRINGLITERAL)||next_token.match(RE.NUMERICLITERAL)||(next_token=='}'))){term_so_far='{';if(next_token!='}'){i_jsin=i_next_token+1;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(jsin[i_jsin]==':'){term_so_far+=next_token+':';estart=i_jsin+1;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,estart,end,0);term_so_far+=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);while(jsin[i_jsin]==','){i_jsin++;term_so_far+=',';while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(jsin[i_jsin]=='}')break;if(!(jsin[i_jsin].match(RE.IDENTIFIER)||jsin[i_jsin].match(RE.STRINGLITERAL)||jsin[i_jsin].match(RE.NUMERICLITERAL)))
break OUTER;var prop_name=jsin[i_jsin++];if(match=prop_name.match(/^\_proxy(\d*)(\_.*)/))
prop_name='_proxy'+(match[1]-0+1)+match[2];term_so_far+=prop_name;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(jsin[i_jsin++]!=':')break OUTER;term_so_far+=':';estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,estart,end,0);term_so_far+=_proxy_jslib_proxify_js_tokens(jsin,estart,eend,0,with_level);}
if(jsin[i_jsin++]!='}')break OUTER;term_so_far+=new_last_token='}';}else{out.push(term_so_far,next_token);term_so_far='';}}else{i_jsin=i_next_token+1;term_so_far+=new_last_token='}';}}else if(RE.PUNCDIVPUNC.test(token)){out.push(term_so_far,token);term_so_far='';}else{}
if(token){last_token=new_last_token?new_last_token:token;newline_since_last_token=false;}}
out.push(term_so_far);if(top_level&&_proxy_jslib_does_write){out.push(' ;\n_proxy_jslib_flush_write_buffers() ;');}
return out.join('');function _proxy_jslib_get_next_js_term(jsin,start,end){var oend,pstart,pend;var i_jsin=start;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||(!jsin[i_jsin].match(RE.IDENTIFIER)&&!jsin[i_jsin].match(/^[\[\{\(]$/)))
return void 0;if(jsin[i_jsin]=='['){i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+1,end,1);if(jsin[i_jsin]!=']')return void 0;oend=pstart=pend=++i_jsin;}else if(jsin[i_jsin]=='{'){i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+1,end,1);if(jsin[i_jsin]!='}')return void 0;oend=pstart=pend=++i_jsin;}else if(jsin[i_jsin]=='('){i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+1,end,1);if(jsin[i_jsin]!=')')return void 0;oend=pstart=pend=++i_jsin;}else{oend=pstart=i_jsin;pend=++i_jsin;}
while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;while(i_jsin<end&&(jsin[i_jsin]=='.'||jsin[i_jsin]=='('||jsin[i_jsin]=='[')){if(jsin[i_jsin]=='.'){oend=i_jsin++;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||!jsin[i_jsin].match(RE.IDENTIFIER))return void 0;pstart=i_jsin++;pend=i_jsin;}else if(jsin[i_jsin]=='['){oend=pstart=i_jsin;i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+1,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=']')return void 0;pend=i_jsin;}else if(jsin[i_jsin]=='('){i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin+1,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=')')return void 0;oend=pstart=pend=i_jsin;}
while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;}
return[start,oend,pstart,pend];}
function _proxy_jslib_get_next_js_constructor(jsin,start,end){var c=[],t,skip=[],op,estart,eend;var i_jsin=start;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||!jsin[i_jsin].match(RE.IDENTIFIER))return void 0;i_jsin++;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;while(i_jsin<end&&(jsin[i_jsin]=='.'||jsin[i_jsin]=='[')){if(jsin[i_jsin]=='.'){i_jsin++;while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;if(i_jsin>=end||!jsin[i_jsin].match(RE.IDENTIFIER))return void 0;i_jsin++;}else if(jsin[i_jsin]=='['){estart=++i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,end,1);if(i_jsin==void 0||i_jsin>=end||jsin[i_jsin++]!=']')return void 0;}
while(i_jsin<end&&jsin[i_jsin].skip)i_jsin++;}
return i_jsin;}}
function _proxy_jslib_get_next_js_expr(jsin,start,end,allow_multiple,is_new){var p=[],element,last_token,i,expr_block_state;var i_jsin=start;while(i_jsin<end){element=jsin[i_jsin];if(!allow_multiple&&p.length==0&&element=='function')expr_block_state=1;switch(element){case';':case',':if(!allow_multiple&&p.length==0)return i_jsin;break;case'\x0a':case'\x0d':if(!allow_multiple&&p.length==0){i=i_jsin+1;while(i<end&&jsin[i].skip)i++;if(/^(\)|\]|\+\+|\-\-)$|^([a-zA-Z\$\_\\\d'"]|\.\d|\/..)/.test(last_token)&&!/^(case|delete|do|else|in|instanceof|new|typeof|void|function|var)$/.test(last_token)&&_proxy_jslib_RE.IDENTIFIER.test(jsin[i]))
{return i_jsin;}
if(expr_block_state==3&&(jsin[i]=='{'||!(jsin[i].match(_proxy_jslib_RE.PUNCDIVPUNC)||jsin[i]=='instanceof')))
{return i_jsin;}}
break;case'{':i=i_jsin+1;while(i<end&&jsin[i].skip)i++;if(!allow_multiple&&p.length==0&&(expr_block_state==1||jsin[i].match(_proxy_jslib_RE.IDENTIFIER)||jsin[i].match(_proxy_jslib_RE.STRINGLITERAL)||jsin[i].match(_proxy_jslib_RE.NUMERICLITERAL)||jsin[i]=='}'))
{expr_block_state=2;}
case'(':case'[':case'?':if(is_new&&(p.length==0)&&element=='(')return i_jsin;p.push(element);break;case')':case']':case'}':case':':if(p.length==0)return i_jsin;if(p.length>0&&!(element==':'&&p[p.length-1]!='?'))p.length--;if(!allow_multiple&&p.length==0&&element=='}'&&expr_block_state==2)
expr_block_state=3;break;}
if(!element.skip){last_token=element;}
i_jsin++;}
return p.length==0?i_jsin:void 0;}
function _proxy_jslib_separate_last_js_statement(s){var rest,last,jsin,i,i_jsin,estart,eend,rest_end=0;var RE=_proxy_jslib_RE;jsin=_proxy_jslib_tokenize_js(s);estart=i_jsin=0;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,jsin.length,0);while(eend>estart||eend<jsin.length){while(i_jsin<jsin.length&&jsin[i_jsin].skip)i_jsin++;i=i_jsin;while(i<jsin.length&&(jsin[i]==';'||jsin[i].skip))i++;if(i==jsin.length)break;if((jsin[i_jsin]).match(RE.STATEMENTTERMINATOR)){rest_end=++i_jsin;}else{if(jsin[i_jsin]==',')i_jsin++;}
estart=i_jsin;eend=i_jsin=_proxy_jslib_get_next_js_expr(jsin,i_jsin,jsin.length,0);}
rest=jsin.slice(0,rest_end).join('');last=jsin.slice(rest_end,jsin.length).join('');return[rest,last];}
function _proxy_jslib_tokenize_js(s){var out=[],match,element,token,div_ok,last_lastIndex=0,conditional_state,conditional_stack_size,p_count;var RE_InputElementDivG=_proxy_jslib_RE.InputElementDivG;var RE_InputElementRegExpG=_proxy_jslib_RE.InputElementRegExpG;while(1){if(div_ok){if(!(match=RE_InputElementDivG.exec(s)))break;if(match.index!=last_lastIndex)break;last_lastIndex=RE_InputElementRegExpG.lastIndex=RE_InputElementDivG.lastIndex;}else{if(!(match=RE_InputElementRegExpG.exec(s)))break;if(match.index!=last_lastIndex)break;last_lastIndex=RE_InputElementDivG.lastIndex=RE_InputElementRegExpG.lastIndex;}
element=match[0];token=match[1];if(!token){element=new String(element);element.skip=true;}else if((token=='if')||(token=='while')||(token=='for')||(token=='switch')){conditional_state=1;conditional_stack_size=p_count;}else if(token=='('){p_count++;if(conditional_state==1)conditional_state=2;}else if(token==')'){p_count--;if((conditional_state==2)&&(p_count==conditional_stack_size))
conditional_state=3;}
out.push(element);if(token){if(conditional_state==3){div_ok=0;conditional_state=0;}else{div_ok=/^(\)|\]|\+\+|\-\-)$|^([a-zA-Z\$\_\\\d'"]|\.\d|\/..)/.test(token)&&!/^(case|delete|do|else|in|instanceof|new|return|throw|typeof|void)$/.test(token);}}}
RE_InputElementDivG.lastIndex=RE_InputElementRegExpG.lastIndex=0;return out;}
function _proxy_jslib_set_RE(){if(!_proxy_jslib_RE){var RE={};RE.WhiteSpace='[\\x09\\x0b\\x0c \\xa0]';RE.LineTerminator='[\\x0a\\x0d]';RE.Comment='\\/\\*[\\s\\S]*?\\*\\/|\\/\\/[^\\x0a\\x0d]*|\\<\\!\\-\\-[^\\x0a\\x0d]*';RE.IdentifierStart='[a-zA-Z\\$\\_]|\\\\u[\\da-fA-F]{4}';RE.IdentifierPart=RE.IdentifierStart+'|\\d';RE.IdentifierName='(?:'+RE.IdentifierStart+')(?:'+RE.IdentifierPart+')*';RE.Punctuator='\\>\\>\\>\\=?|\\=\\=\\=|\\!\\=\\=|\\<\\<\\=|\\>\\>\\=|[\\<\\>\\=\\!\\+\\*\\%\\&\\|\\^\\-]\\=|\\+\\+|\\-\\-|\\<\\<|\\>\\>|\\&\\&|\\|\\||[\\{\\}\\(\\)\\[\\]\\.\\;\\,\\<\\>\\+\\*\\%\\&\\|\\^\\!\\~\\?\\:\\=\\-]';RE.DivPunctuator='\\/\\=?';RE.NumericLiteral='0[xX][\\da-fA-F]+|(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][\\+\\-]?\\d+)?|\\.\\d+(?:[eE][\\+\\-]?\\d+)?';RE.EscapeSequence='x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|0|[0-3]?[0-7]\\D|[4-7][0-7]|[0-3][0-7][0-7]|[^\\dxu]';RE.StringLiteral='"(?:[^\\"\\\\\\x0a\\x0d]|\\\\(?:'+RE.EscapeSequence+'))*"|'
+"'(?:[^\\'\\\\\\x0a\\x0d]|\\\\(?:"+RE.EscapeSequence+"))*'";RE.RegularExpressionLiteral='\\/(?:[^\\x0a\\x0d\\*\\\\\\/\\[]|\\[(?:[^\\\\\\]\\x0a\\x0d]|\\\\[^\\x0a\\x0d])*\\]|\\\\[^\\x0a\\x0d])(?:[^\\x0a\\x0d\\\\\\/\\[]|\\[(?:[^\\\\\\]\\x0a\\x0d]|\\\\[^\\x0a\\x0d])*\\]|\\\\[^\\x0a\\x0d])*\\/(?:'+RE.IdentifierPart+')*';RE.Token=RE.IdentifierName+'|'+RE.NumericLiteral+'|'+RE.Punctuator+'|'+RE.StringLiteral;RE.InputElementDivG=RE.WhiteSpace+'+|'+RE.LineTerminator+'|'+RE.Comment+'|('+RE.Token+'|'+RE.DivPunctuator+'|'+RE.RegularExpressionLiteral+')';RE.InputElementRegExpG=RE.WhiteSpace+'+|'+RE.LineTerminator+'|'+RE.Comment+'|('+RE.Token+'|'+RE.RegularExpressionLiteral+'|'+RE.DivPunctuator+')';RE.SKIP=RE.WhiteSpace+'+|'+RE.LineTerminator+'|'+RE.Comment;RE.SKIP_NO_LT=RE.WhiteSpace+'+|'+RE.Comment;RE.InputElementDivG=new RegExp(RE.InputElementDivG,'g');RE.InputElementRegExpG=new RegExp(RE.InputElementRegExpG,'g');RE.LINETERMINATOR=new RegExp('^'+RE.LineTerminator+'$');RE.N_S_RE=new RegExp('^(?:'+RE.NumericLiteral+'|'+RE.StringLiteral+'|'+RE.RegularExpressionLiteral+')$');RE.DOTSKIPEND=new RegExp('\\.('+RE.WhiteSpace+'+|'+RE.LineTerminator+')*$');RE.ASSIGNOP=new RegExp('^(\\>\\>\\>\\=|\\<\\<\\=|\\>\\>\\=|[\\+\\*\\/\\%\\&\\|\\^\\-]?\\=)$');RE.NEXTISINCDEC=new RegExp('^('+RE.SKIP_NO_LT+')*(\\+\\+|\\-\\-)');RE.SKIPTOPAREN=new RegExp('^(('+RE.SKIP+')*\\()');RE.SKIPTOCOLON=new RegExp('^(('+RE.SKIP+')*\\:)');RE.SKIPTOCOMMASKIP=new RegExp('^(('+RE.SKIP+')*\\,('+RE.SKIP+')*)');RE.PUNCDIVPUNC=new RegExp('^('+RE.Punctuator+'|'+RE.DivPunctuator+')$');RE.IDENTIFIER=new RegExp('^'+RE.IdentifierName+'$');RE.STRINGLITERAL=new RegExp('^'+RE.StringLiteral+'$');RE.NUMERICLITERAL=new RegExp('^(?:'+RE.NumericLiteral+')$');RE.SKIPTOOFRAG=new RegExp('^('+RE.SKIP+')*([\\.\\[\\(])');RE.STATEMENTTERMINATOR=new RegExp('^(;|'+RE.LineTerminator+')');_proxy_jslib_RE=RE;}}
function _proxy_jslib_instanceof(o,classname){if((o==null)||((typeof(o)!='object')&&(typeof(o)!='function')))
return false;try{switch(classname){case'Document':return("elementFromPoint"in o)&&("createElement"in o)&&("getElementById"in o);case'DocumentFragment':return("querySelector"in o)&&("querySelectorAll")&&("childNodes"in o);case'HTMLElement':return("insertAdjacentHTML"in o)&&("outerHTML"in o);case'Element':return("childElementCount"in o)&&("firstElementChild"in o)&&("nextElementSibling"in o);case'Node':return("nodeName"in o)&&("nodeType"in o)&&("nodeValue"in o);case'MessageEvent':return("stopImmediatePropagation"in o)&&("origin"in o)&&("ports"in o);case'Location':return("reload"in o)&&("protocol"in o)&&("search"in o);case'Link':return("protocol"in o)&&("target"in o)&&("blur"in o);case'Window':return("navigator"in o)&&("clearInterval"in o)&&("moveBy"in o)&&(o.self===o.window);case'CSS2Properties':return("azimuth"in o)&&("backgroundAttachment"in o)&&("pageBreakInside"in o);case'CSSStyleDeclaration':return(("getPropertyCSSValue"in o)||("getPropertyValue"in o))// MSIE uses getPropertyValue  :P
&&("getPropertyPriority"in o)&&("removeProperty"in o);case'CSSStyleSheet':return('cssRules'in o)&&('ownerRule'in o)&&('deleteRule'in o);case'Layer':return("background"in o)&&("parentLayer"in o)&&("moveAbove"in o);case'History':return("pushState"in o)&&("replaceState"in o)&&("forward"in o);case'AnonXMLHttpRequest':return("withCredentials"in o)&&("getAllResponseHeaders"in o);default:if(!eval(classname))return false;return eval('o instanceof '+ classname);}}catch(e){switch(classname){case'Form':return("action"in o)&&("encoding"in o)&&("submit"in o);case'CSSPrimitiveValue':return("primitiveType"in o)&&("getRectValue"in o)&&("getCounterValue"in o);case'FlashPlayer':return("GotoFrame"in o)&&("LoadMovie"in o)&&("SetZoomRect"in o);case'NamedNodeMap':return("getNamedItem"in o)&&("removeNamedItem"in o)&&("setNamedItem"in o);case'Range':return("cloneRange"in o)&&("compareBoundaryPoints"in o)&&("surroundContents"in o);case'Attr':return("ownerElement"in o)&&("specified"in o);case'EventSource':return("readyState"in o)&&("url"in o)&&!("bufferedAmount"in o);case'HashChangeEvent':return("oldURL"in o)&&("newURL"in o);case'MediaElement':return("autoplay"in o)&&("defaultPlaybackRate"in o)&&("initialTime"in o);default:alert('error in _proxy_jslib_instanceof(): classname=['+ classname+']; error=['+ e+']');}}}
function _proxy_jslib_same_origin(u1,u2){var pu1=_proxy_jslib_parse_url(_proxy_jslib_absolute_url(u1));var pu2=_proxy_jslib_parse_url(_proxy_jslib_absolute_url(u2));pu1[5]=pu1[5]||(pu1[1]=='http:'?80:pu1[1]=='https:'?443:'');pu2[5]=pu2[5]||(pu2[1]=='http:'?80:pu2[1]=='https:'?443:'');return pu1[1]==pu2[1]&&pu1[4]==pu2[4]&&pu1[5]==pu2[5];}
function _proxy_jslib_parse_url(in_URL){var u;in_URL=in_URL.toString();if(u=in_URL.match(/^(javascript\:|livescript\:)([\s\S]*)$/i))
return[in_URL,u[1].toLowerCase(),u[2]];if(in_URL.match(/^\s*\#/))
return[in_URL,'','','','','','','',in_URL];u=in_URL.match(/^([\w\+\.\-]+\:)?\/\/([^\/\?\#\@]*\@)?((\[[^\]]*\]|[^\:\/\?\#]*)(\:[^\/\?\#]*)?)([^\?\#]*)([^#]*)(.*)$/);if(u==null)return;for(var i=0;i<u.length;i++)if(u[i]==void 0)u[i]='';u[1]=u[1].toLowerCase();u[2]=u[2].replace(/\@$/,'');u[3]=u[3].toLowerCase();u[3]=u[3].replace(/\.+(:|$)/,'$1');u[4]=u[4].toLowerCase().replace(/^\[|\]$/g,'');u[4]=u[4].replace(/\.+$/,'');u[5]=u[5].replace(/^\:/,'');return u;}
function _proxy_jslib_parse_full_url(in_URL){if(typeof(in_URL)=='number')in_URL=in_URL.toString();if(in_URL==void 0)return[void 0,void 0,void 0,void 0];if(in_URL=='about:blank')return['','','','about:blank'];if(in_URL.match(/^(javascript|livescript|blob)\:/i))return['','','',in_URL];if(in_URL.match(/^\s*\#/))return['','','',in_URL];if(in_URL=='')return['','','',''];var cmp,path_cmp;if(_proxy_jslib_PROXY_GROUP.length){for(var i in _proxy_jslib_PROXY_GROUP){if(in_URL.substring(0,_proxy_jslib_PROXY_GROUP[i].length)==_proxy_jslib_PROXY_GROUP[i]){path_cmp=in_URL.substring(_proxy_jslib_PROXY_GROUP[i].length).match(/\/([^\/\?]*)\/?([^\/\?]*)\/?([^\?]*)(\??.*)/);if(path_cmp==null)return void 0;return[_proxy_jslib_PROXY_GROUP[i],path_cmp[1],path_cmp[2],_proxy_jslib_wrap_proxy_decode(path_cmp[3])+path_cmp[4]];}}
return void 0;}
var m1,m2,data_type,data_clauses,data_content,data_charset,data_base64;if(m1=in_URL.match(/^data:([\w\.\+\$\-]+\/[\w\.\+\$\-]+)?;?([^\,]*)\,?(.*)/i)){data_type=m1[1].toLowerCase();if(data_type=='text/html'||data_type=='text/css'||data_type.match(/script/i)){data_clauses=m1[2].split(/;/);data_content=m1[3];for(var i=0;i<data_clauses.length;i++){if(m2=data_clauses[i].match(/^charset=(\S+)/i)){data_charset=m2[1];}else if(data_clauses[i].toLowerCase()=='base64'){data_base64=1;}}
data_content=data_base64?atob(data_content):data_content.replace(/%([\da-fA-F]{2})/g,function(s,p1){return String.fromCharCode(eval('0x'+p1))});data_content=(data_type=='text/html')?_proxy_jslib_proxify_html(data_content,void 0,void 0,1)[0]:_proxy_jslib_proxify_block(data_content,data_type,1,1);data_content=btoa(data_content);return['','','',data_charset?'data:'+ data_type+';charset='+ data_charset+';base64,'+ data_content:'data:'+ data_type+';base64,'+ data_content];}else{return['','','',in_URL];}}
cmp=in_URL.match(/^([\w\+\.\-]+)\:\/\/([^\/\?]*)([^\?]*)(\??.*)$/);if(cmp==null)return void 0;cmp[3]=cmp[3].replace(/\%7e/gi,'~');path_cmp=cmp[3].match(_proxy_jslib_RE_FULL_PATH);if(cmp==null||path_cmp==null)return void 0;return[cmp[1]+"://"+cmp[2]+path_cmp[1],path_cmp[2],path_cmp[3],_proxy_jslib_wrap_proxy_decode(path_cmp[4])+cmp[4]];}
function _proxy_jslib_pack_flags(flags){var total=0;for(var i=0;i<6;i++){total=(total<<1)+!!flags[i]}
return''+_proxy_jslib_ARRAY64[total]+_proxy_jslib_ARRAY64[_proxy_jslib_MIME_TYPE_ID[flags[6]]];}
function _proxy_jslib_unpack_flags(flagst){var ret=[];var chars=flagst.split('');var total=_proxy_jslib_UNARRAY64[chars[0]];for(var i=0;i<6;i++){ret[5-i]=(total>>i)&1}
ret[6]=_proxy_jslib_ALL_TYPES[_proxy_jslib_UNARRAY64[chars[1]]];return ret;}
function _proxy_jslib_url_start_by_flags(flags){return _proxy_jslib_SCRIPT_URL+'/'+ _proxy_jslib_lang+'/'+ _proxy_jslib_pack_flags(flags)+'/';}
function _proxy_jslib_html_escape(s){if(s==void 0)return'';s=s.replace(/\&/g,'&amp;');s=s.replace(/([^\x00-\x7f])/g,function(a){return'&#'+ a.charCodeAt(0)+';';});return s.replace(/\"/g,'&quot;').replace(/\</g,'&lt;').replace(/\>/g,'&gt;');}
function _proxy_jslib_html_unescape(s){if(s==void 0)return'';s=s.replace(/\&\#(x)?(\w+);?/g,function(a,p1,p2){return p1?String.fromCharCode(eval('0x'+p2)):String.fromCharCode(p2)});return s.replace(/\&quot\b\;?/g,'"').replace(/\&lt\b\;?/g,'<').replace(/\&gt\b\;?/g,'>').replace(/\&amp\b\;?/g,'&');}
function _proxy_jslib_global_replace(s,pattern,replace_function){if(s==null)return s;var out='';var m1;while((m1=s.match(pattern))!=null){out+=s.substr(0,m1.index)+ replace_function(m1);s=s.substr(m1.index+m1[0].length);}
return out+s;}