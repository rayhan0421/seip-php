/*! Snappy */
function isMobile(){return screen.width<=480}(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,Backbone,b,c){{var d=a.Backbone,e=[],f=(e.push,e.slice);e.splice}Backbone.VERSION="1.1.2",Backbone.$=c,Backbone.noConflict=function(){return a.Backbone=d,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var g=Backbone.Events={on:function(a,b,c){if(!i(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,c,d){if(!i(this,"once",a,[c,d])||!c)return this;var e=this,f=b.once(function(){e.off(a,f),c.apply(this,arguments)});return f._callback=c,this.on(a,f,d)},off:function(a,c,d){var e,f,g,h,j,k,l,m;if(!this._events||!i(this,"off",a,[c,d]))return this;if(!a&&!c&&!d)return this._events=void 0,this;for(h=a?[a]:b.keys(this._events),j=0,k=h.length;k>j;j++)if(a=h[j],g=this._events[a]){if(this._events[a]=e=[],c||d)for(l=0,m=g.length;m>l;l++)f=g[l],(c&&c!==f.callback&&c!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!i(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&j(c,b),d&&j(d,arguments),this},stopListening:function(a,c,d){var e=this._listeningTo;if(!e)return this;var f=!c&&!d;d||"object"!=typeof c||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(c,d,this),(f||b.isEmpty(a._events))&&delete this._listeningTo[g];return this}},h=/\s+/,i=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(h.test(c)){for(var f=c.split(h),g=0,i=f.length;i>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},j=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},k={listenTo:"on",listenToOnce:"once"};b.each(k,function(a,c){g[c]=function(c,d,e){var f=this._listeningTo||(this._listeningTo={}),g=c._listenId||(c._listenId=b.uniqueId("l"));return f[g]=c,e||"object"!=typeof d||(e=this),c[a](d,e,this),this}}),g.bind=g.on,g.unbind=g.off,b.extend(Backbone,g);var l=Backbone.Model=function(a,c){var d=a||{};c||(c={}),this.cid=b.uniqueId("c"),this.attributes={},c.collection&&(this.collection=c.collection),c.parse&&(d=this.parse(d,c)||{}),d=b.defaults({},d,b.result(this,"defaults")),this.set(d,c),this.changed={},this.initialize.apply(this,arguments)};b.extend(l.prototype,g,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return b.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return b.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,c,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=c):(f={})[a]=c,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=b.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)c=f[e],b.isEqual(l[e],c)||h.push(e),b.isEqual(k[e],c)?delete this.changed[e]:this.changed[e]=c,g?delete l[e]:l[e]=c;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,c){return this.set(a,void 0,b.extend({},c,{unset:!0}))},clear:function(a){var c={};for(var d in this.attributes)c[d]=void 0;return this.set(c,b.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!b.isEmpty(this.changed):b.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?b.clone(this.changed):!1;var c,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)b.isEqual(e[f],c=a[f])||((d||(d={}))[f]=c);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(a){a=a?b.clone(a):{},void 0===a.parse&&(a.parse=!0);var c=this,d=a.success;return a.success=function(b){return c.set(c.parse(b,a),a)?(d&&d(c,b,a),void c.trigger("sync",c,b,a)):!1},K(this,a),this.sync("read",this,a)},save:function(a,c,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=c):(e={})[a]=c,d=b.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=b.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var c=i.parse(a,d);return d.wait&&(c=b.extend(e||{},c)),b.isObject(c)&&!i.set(c,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},K(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?b.clone(a):{};var c=this,d=a.success,e=function(){c.trigger("destroy",c,c.collection,a)};if(a.success=function(b){(a.wait||c.isNew())&&e(),d&&d(c,b,a),c.isNew()||c.trigger("sync",c,b,a)},this.isNew())return a.success(),!1;K(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=b.result(this,"urlRoot")||b.result(this.collection,"url")||J();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},b.extend(a||{},{validate:!0}))},_validate:function(a,c){if(!c.validate||!this.validate)return!0;a=b.extend({},this.attributes,a);var d=this.validationError=this.validate(a,c)||null;return d?(this.trigger("invalid",this,d,b.extend(c,{validationError:d})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];b.each(m,function(a){l.prototype[a]=function(){var c=f.call(arguments);return c.unshift(this.attributes),b[a].apply(b,c)}});var n=Backbone.Collection=function(a,c){c||(c={}),c.model&&(this.model=c.model),void 0!==c.comparator&&(this.comparator=c.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,b.extend({silent:!0},c))},o={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1};b.extend(n.prototype,g,{model:l,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(a,c){return this.set(a,b.extend({merge:!1},c,p))},remove:function(a,c){var d=!b.isArray(a);a=d?[a]:b.clone(a),c||(c={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,c.silent||(c.index=g,h.trigger("remove",h,this,c)),this._removeReference(h,c));return d?a[0]:a},set:function(a,c){c=b.defaults({},c,o),c.parse&&(a=this.parse(a,c));var d=!b.isArray(a);a=d?a?[a]:[]:b.clone(a);var e,f,g,h,i,j,k,m=c.at,n=this.model,p=this.comparator&&null==m&&c.sort!==!1,q=b.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=c.add,v=c.merge,w=c.remove,x=!p&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof l?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,c.parse&&(i=j.parse(i,c)),j.set(i,c),p&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,c),!h)continue;r.push(h),this._addReference(h,c)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,c)}if(r.length||x&&x.length)if(p&&(k=!0),this.length+=r.length,null!=m)for(e=0,f=r.length;f>e;e++)this.models.splice(m+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!c.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,c);(k||x&&x.length)&&this.trigger("sort",this,c)}return d?a[0]:a},reset:function(a,c){c||(c={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],c);return c.previousModels=this.models,this._reset(),a=this.add(a,b.extend({silent:!0},c)),c.silent||this.trigger("reset",this,c),a},push:function(a,c){return this.add(a,b.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,c){return this.add(a,b.extend({at:0},c))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,c){return b.isEmpty(a)?c?void 0:[]:this[c?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),b.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(b.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return b.invoke(this.models,"get",a)},fetch:function(a){a=a?b.clone(a):{},void 0===a.parse&&(a.parse=!0);var c=a.success,d=this;return a.success=function(b){var e=a.reset?"reset":"set";d[e](b,a),c&&c(d,b,a),d.trigger("sync",d,b,a)},K(this,a),this.sync("read",this,a)},create:function(a,c){if(c=c?b.clone(c):{},!(a=this._prepareModel(a,c)))return!1;c.wait||this.add(a,c);var d=this,e=c.success;return c.success=function(a,b){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,c),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,c){if(a instanceof l)return a;c=c?b.clone(c):{},c.collection=this;var d=new this.model(a,c);return d.validationError?(this.trigger("invalid",this,d.validationError,c),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var q=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];b.each(q,function(a){n.prototype[a]=function(){var c=f.call(arguments);return c.unshift(this.models),b[a].apply(b,c)}});var r=["groupBy","countBy","sortBy","indexBy"];b.each(r,function(a){n.prototype[a]=function(c,d){var e=b.isFunction(c)?c:function(a){return a.get(c)};return b[a](this.models,e,d)}});var s=Backbone.View=function(a){this.cid=b.uniqueId("view"),a||(a={}),b.extend(this,b.pick(a,u)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},t=/^(\S+)\s*(.*)$/,u=["model","collection","el","id","attributes","className","tagName","events"];b.extend(s.prototype,g,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof Backbone.$?a:Backbone.$(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=b.result(this,"events")))return this;this.undelegateEvents();for(var c in a){var d=a[c];if(b.isFunction(d)||(d=this[a[c]]),d){var e=c.match(t),f=e[1],g=e[2];d=b.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"),!1);else{var a=b.extend({},b.result(this,"attributes"));this.id&&(a.id=b.result(this,"id")),this.className&&(a["class"]=b.result(this,"className"));var c=Backbone.$("<"+b.result(this,"tagName")+">").attr(a);this.setElement(c,!1)}}}),Backbone.sync=function(a,c,d){var e=w[a];b.defaults(d||(d={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=b.result(c,"url")||J()),null!=d.data||!c||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"===f.type&&v&&(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=d.xhr=Backbone.ajax(b.extend(f,d));return c.trigger("request",c,h,d),h};var v=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var x=Backbone.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},y=/\((.*?)\)/g,z=/(\(\?)?:\w+/g,A=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(x.prototype,g,{initialize:function(){},route:function(a,c,d){b.isRegExp(a)||(a=this._routeToRegExp(a)),b.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return Backbone.history.route(a,function(b){var f=e._extractParameters(a,b);e.execute(d,f),e.trigger.apply(e,["route:"+c].concat(f)),e.trigger("route",c,f),Backbone.history.trigger("route",e,c,f)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){return Backbone.history.navigate(a,b),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var a,c=b.keys(this.routes);null!=(a=c.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(B,"\\$&").replace(y,"(?:$1)?").replace(z,function(a,b){return b?a:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return b.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var C=Backbone.History=function(){this.handlers=[],b.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,F=/msie [\w.]+/,G=/\/$/,H=/#.*$/;C.started=!1,b.extend(C.prototype,g,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(G,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(D,"")},start:function(a){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=b.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=F.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);if(this.root=("/"+this.root+"/").replace(E,"/"),e&&this._wantsHashChange){var f=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=f.hide().appendTo("body")[0].contentWindow,this.navigate(c)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var g=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&g.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))
}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),C.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),b.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!C.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(H,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),Backbone.history=new C;var I=function(a,c){var d,e=this;d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d.__super__=e.prototype,d};l.extend=n.extend=x.extend=s.extend=C.extend=I;var J=function(){throw new Error('A "url" property or function must be specified')},K=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return Backbone});var Marionette=function(a,Backbone,b){"use strict";function c(a,b){var c=new Error(a);throw c.name=b||"Error",c}!function(Backbone,a){var b=Backbone.ChildViewContainer;return Backbone.ChildViewContainer=function(Backbone,a){var b=function(b){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),a.each(b,this.add,this)};a.extend(b.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(b){return a.values(this._views)[b]},findByCid:function(a){return this._views[a]},remove:function(b){var c=b.cid;return b.model&&delete this._indexByModel[b.model.cid],a.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(b){this.apply(b,a.tail(arguments))},apply:function(b,c){a.each(this._views,function(d){a.isFunction(d[b])&&d[b].apply(d,c||[])})},_updateLength:function(){this.length=a.size(this._views)}});var c=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return a.each(c,function(c){b.prototype[c]=function(){var b=a.values(this._views),d=[b].concat(a.toArray(arguments));return a[c].apply(a,d)}}),b}(Backbone,a),Backbone.ChildViewContainer.VERSION="0.1.4",Backbone.ChildViewContainer.noConflict=function(){return Backbone.ChildViewContainer=b,this},Backbone.ChildViewContainer}(Backbone,b),function(Backbone,a){var b=Backbone.Wreqr,c=Backbone.Wreqr={};return Backbone.Wreqr.VERSION="1.3.1",Backbone.Wreqr.noConflict=function(){return Backbone.Wreqr=b,this},c.Handlers=function(Backbone,a){var b=function(b){this.options=b,this._wreqrHandlers={},a.isFunction(this.initialize)&&this.initialize(b)};return b.extend=Backbone.Model.extend,a.extend(b.prototype,Backbone.Events,{setHandlers:function(b){a.each(b,function(b,c){var d=null;a.isObject(b)&&!a.isFunction(b)&&(d=b.context,b=b.callback),this.setHandler(c,b,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),b}(Backbone,a),c.CommandStorage=function(){var b=function(b){this.options=b,this._commands={},a.isFunction(this.initialize)&&this.initialize(b)};return a.extend(b.prototype,Backbone.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),b}(),c.Commands=function(b){return b.Handlers.extend({storageType:b.CommandStorage,constructor:function(a){this.options=a||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);b.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(b,c,d){var e=this.storage.getCommands(b);a.each(e.instances,function(a){c.apply(d,a)}),this.storage.clearCommands(b)},_initializeStorage:function(b){var c,d=b.storageType||this.storageType;c=a.isFunction(d)?new d:d,this.storage=c}})}(c),c.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.hasHandler(a)?this.getHandler(a).apply(this,b):void 0}})}(c),c.EventAggregator=function(Backbone,a){var b=function(){};return b.extend=Backbone.Model.extend,a.extend(b.prototype,Backbone.Events),b}(Backbone,a),c.Channel=function(){var b=function(a){this.vent=new Backbone.Wreqr.EventAggregator,this.reqres=new Backbone.Wreqr.RequestResponse,this.commands=new Backbone.Wreqr.Commands,this.channelName=a};return a.extend(b.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(a,b){return this._connect("vent",a,b),this},connectCommands:function(a,b){return this._connect("commands",a,b),this},connectRequests:function(a,b){return this._connect("reqres",a,b),this},_connect:function(b,c,d){if(c){d=d||this;var e="vent"===b?"on":"setHandler";a.each(c,function(c,f){this[b][e](f,a.bind(c,d))},this)}}}),b}(c),c.radio=function(b){var c=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};a.extend(c.prototype,{channel:function(a){if(!a)throw new Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var c=this._channels[a];return c||(c=new b.Channel(a),this._channels[a]=c),c},_proxyMethods:function(){a.each(["vent","commands","reqres"],function(b){a.each(d[b],function(a){this[b][a]=e(this,b,a)},this)},this)}});var d={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},e=function(a,b,c){return function(d){var e=a._getChannel(d)[b],f=Array.prototype.slice.call(arguments,1);return e[c].apply(e,f)}};return new c}(c),Backbone.Wreqr}(Backbone,b);var d={};Backbone.Marionette=d,d.$=Backbone.$;var e=Array.prototype.slice;return d.extend=Backbone.Model.extend,d.getOption=function(a,b){if(a&&b){var c;return c=a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},d.normalizeMethods=function(a){var c,d={};return b.each(a,function(a,e){c=a,b.isFunction(c)||(c=this[c]),c&&(d[e]=c)},this),d},d.normalizeUIKeys=function(a,c){return"undefined"!=typeof a?(b.each(b.keys(a),function(b){var d=/@ui.[a-zA-Z_$0-9]*/g;b.match(d)&&(a[b.replace(d,function(a){return c[a.slice(4)]})]=a[b],delete a[b])}),a):void 0},d.actAsCollection=function(a,c){var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];b.each(d,function(d){a[d]=function(){var a=b.values(b.result(this,c)),e=[a].concat(b.toArray(arguments));return b[d].apply(b,e)}})},d.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var c=/(^|:)(\w)/gi,d=function(d){var e="on"+d.replace(c,a),f=this[e];return b.isFunction(this.trigger)&&this.trigger.apply(this,arguments),b.isFunction(f)?f.apply(this,b.tail(arguments)):void 0};return d}(),d.MonitorDOMRefresh=function(a){function c(a){a._isShown=!0,e(a)}function d(a){a._isRendered=!0,e(a)}function e(a){a._isShown&&a._isRendered&&f(a)&&b.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}function f(b){return a.contains(b.el)}return function(a){a.listenTo(a,"show",function(){c(a)}),a.listenTo(a,"render",function(){d(a)})}}(document.documentElement),function(a){function d(a,d,e,f){var g=f.split(/\s+/);b.each(g,function(b){var f=a[b];f||c("Method '"+b+"' was configured as an event handler, but does not exist."),a.listenTo(d,e,f)})}function e(a,b,c,d){a.listenTo(b,c,d)}function f(a,c,d,e){var f=e.split(/\s+/);b.each(f,function(b){var e=a[b];a.stopListening(c,d,e)})}function g(a,b,c,d){a.stopListening(b,c,d)}function h(a,c,d,e,f){c&&d&&(b.isFunction(d)&&(d=d.call(a)),b.each(d,function(d,g){b.isFunction(d)?e(a,c,g,d):f(a,c,g,d)}))}a.bindEntityEvents=function(a,b,c){h(a,b,c,e,d)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(d),d.Callbacks=function(){this._deferred=d.$.Deferred(),this._callbacks=[]},b.extend(d.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=d.$.Deferred(),this._callbacks=[],b.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),d.Controller=function(a){this.triggerMethod=d.triggerMethod,this.options=a||{},b.isFunction(this.initialize)&&this.initialize(this.options)},d.Controller.extend=d.extend,b.extend(d.Controller.prototype,Backbone.Events,{close:function(){this.stopListening();var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(a)),this.off()}}),d.Region=function(a){if(this.options=a||{},this.el=d.getOption(this,"el"),this.el||c("An 'el' must be specified for a region.","NoElError"),this.initialize){var b=Array.prototype.slice.apply(arguments);this.initialize.apply(this,b)}},b.extend(d.Region,{buildRegion:function(a,d){var e=b.isString(a),f=b.isString(a.selector),g=b.isUndefined(a.regionType),h=b.isFunction(a);h||e||f||c("Region must be specified as a Region type, a selector string or an object with selector property");var i,j;e&&(i=a),a.selector&&(i=a.selector,delete a.selector),h&&(j=a),!h&&g&&(j=d),a.regionType&&(j=a.regionType,delete a.regionType),(e||h)&&(a={}),a.el=i;var k=new j(a);return a.parentEl&&(k.getEl=function(c){var d=a.parentEl;return b.isFunction(d)&&(d=d()),d.find(c)}),k}}),b.extend(d.Region.prototype,Backbone.Events,{show:function(a,c){this.ensureEl();var e=c||{},f=a.isClosed||b.isUndefined(a.$el),g=a!==this.currentView,h=!!e.preventClose,i=!h&&g;return i&&this.close(),a.render(),d.triggerMethod.call(this,"before:show",a),b.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):d.triggerMethod.call(a,"before:show"),(g||f)&&this.open(a),this.currentView=a,d.triggerMethod.call(this,"show",a),b.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show"),this},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return d.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),d.triggerMethod.call(this,"close",a),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),d.Region.extend=d.extend,d.RegionManager=function(a){var c=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,c){var d={};return b.each(a,function(a,e){b.isString(a)&&(a={selector:a}),a.selector&&(a=b.defaults({},a,c));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(c,d){var e,f=b.isObject(d),g=b.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):b.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(c,e),this.triggerMethod("region:add",c,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){b.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){b.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions(),a.Controller.prototype.close.apply(this,arguments)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),b.stopListening(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=b.size(this._regions)}});return a.actAsCollection(c.prototype,"_regions"),c}(d),d.TemplateCache=function(a){this.templateId=a},b.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new d.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=e.call(arguments),c=b.length;if(c>0)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),b.extend(d.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=d.$(a).html();return b&&0!==b.length||c("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return b.template(a)}}),d.Renderer={render:function(a,b){a||c("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var e;return(e="function"==typeof a?a:d.TemplateCache.get(a))(b)}},d.View=Backbone.View.extend({constructor:function(a){b.bindAll(this,"render"),this.options=b.extend({},b.result(this,"options"),b.isFunction(a)?a.call(this):a),this.events=this.normalizeUIKeys(b.result(this,"events")),b.isObject(this.behaviors)&&new d.Behaviors(this),Backbone.View.prototype.constructor.apply(this,arguments),d.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getTemplate:function(){return d.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var c=d.getOption(this,"templateHelpers");return b.isFunction(c)&&(c=c.call(this)),b.extend(a,c)},normalizeUIKeys:function(a){var c=b.result(this,"ui");return d.normalizeUIKeys(a,c)},configureTriggers:function(){if(this.triggers){var a={},c=this.normalizeUIKeys(b.result(this,"triggers"));return b.each(c,function(c,d){var e=b.isObject(c),f=e?c.event:c;a[d]=function(a){if(a){var b=a.preventDefault,d=a.stopPropagation,g=e?c.preventDefault:b,h=e?c.stopPropagation:d;g&&b&&b.apply(a),h&&d&&d.apply(a)}var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(f,i)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),d.bindEntityEvents(this,this.model,d.getOption(this,"modelEvents")),d.bindEntityEvents(this,this.collection,d.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,b.isFunction(a)&&(a=a.call(this));var c={},d=b.result(this,"behaviorEvents")||{},e=this.configureTriggers();b.extend(c,d,a,e),Backbone.View.prototype.delegateEvents.call(this,c)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,a),d.unbindEntityEvents(this,this.model,d.getOption(this,"modelEvents")),d.unbindEntityEvents(this,this.collection,d.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=Array.prototype.slice.call(arguments),b=this.triggerMethod.apply(this,["before:close"].concat(a));b!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(a)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=b.result(this,"_uiBindings");this.ui={},b.each(b.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(b.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),d.ItemView=d.View.extend({constructor:function(){d.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=d.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),d.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),d.CollectionView=d.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),d.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(b.each(this._bufferedChildren,function(a){b.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){b.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new Backbone.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return d.getOption(this,"emptyView")},getItemView:function(){var a=d.getOption(this,"itemView");return a||c("An `itemView` must be specified","NoItemViewError"),a},addItemView:function(a,c,e){var f=d.getOption(this,"itemViewOptions");b.isFunction(f)&&(f=f.call(this,a,e));var g=this.buildItemView(a,c,f);return this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,e),this._isShown&&!this.isBuffering&&(b.isFunction(g.triggerMethod)?g.triggerMethod("show"):d.triggerMethod.call(g,"show")),this.triggerMethod("after:item:added",g),g},addChildViewEventForwarding:function(a){var c=d.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var f=e.call(arguments),g=f[0],h=this.normalizeMethods(this.getItemEvents());f[0]=c+":"+g,f.splice(1,0,a),"undefined"!=typeof h&&b.isFunction(h[g])&&h[g].apply(this,f),d.triggerMethod.apply(this,f)},this)},getItemEvents:function(){return b.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,c,d){var e=b.extend({model:a},d);return new c(e)},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(a.close?a.close():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a)),this.triggerMethod("item:removed",a)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new Backbone.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),d.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var a=d.getOption(this,"itemView")||this.constructor;return a||c("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),d.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return d.Renderer.render(b,a)},appendBuffer:function(a,b){var c=this.getItemViewContainer(a);c.append(b)},appendHtml:function(a,b){if(a.isBuffering)a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b);else{var c=this.getItemViewContainer(a);c.append(b.el)}},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var e,f=d.getOption(a,"itemViewContainer");if(f){var g=b.isFunction(f)?f.call(a):f;e="@"===g.charAt(0)&&a.ui?a.ui[g.substr(4)]:a.$(g),e.length<=0&&c("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else e=a.$el;return a.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),d.Layout=d.ItemView.extend({regionType:d.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),d.ItemView.prototype.constructor.call(this,a)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),d.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),d.ItemView.prototype.close.apply(this,arguments))},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=b.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},_buildRegions:function(a){var b=this,c={regionType:d.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var c;this._initRegionManager(),c=b.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(c)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new d.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),d.Behavior=function(a,Backbone){function b(b,c){this.view=c,this.defaults=a.result(this,"defaults")||{},this.options=a.extend({},this.defaults,b),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return a.extend(b.prototype,Backbone.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:d.triggerMethod}),b.extend=d.extend,b}(b,Backbone),d.Behaviors=function(a,b){function c(a){this.behaviors=c.parseBehaviors(a,b.result(a,"behaviors")),c.wrap(a,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","close"])}var d={setElement:function(a,c){a.apply(this,b.tail(arguments,2)),b.each(c,function(a){a.$el=this.$el},this)},close:function(a,c){var d=b.tail(arguments,2);a.apply(this,d),b.invoke(c,"close",d)},bindUIElements:function(a,c){a.apply(this),b.invoke(c,a)},unbindUIElements:function(a,c){a.apply(this),b.invoke(c,a)},triggerMethod:function(a,c){var d=b.tail(arguments,2);a.apply(this,d),b.each(c,function(b){a.apply(b,d)})},delegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e),b.each(d,function(b){a.bindEntityEvents(b,this.model,a.getOption(b,"modelEvents")),a.bindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this)},undelegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e),b.each(d,function(b){a.unbindEntityEvents(b,this.model,a.getOption(b,"modelEvents")),a.unbindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this)},behaviorEvents:function(c,d){var e={},f=b.result(this,"ui");return b.each(d,function(c,d){var g={},h=b.clone(b.result(c,"events"))||{},i=b.result(c,"ui"),j=b.extend({},f,i);h=a.normalizeUIKeys(h,j),b.each(b.keys(h),function(a){var e=new Array(d+2).join(" "),f=a+e,i=b.isFunction(h[a])?h[a]:c[h[a]];g[f]=b.bind(i,c)}),e=b.extend(e,g)}),e}};return b.extend(c,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(a,d){return a.behaviorClass?a.behaviorClass:b.isFunction(c.behaviorsLookup)?c.behaviorsLookup.apply(this,arguments)[d]:c.behaviorsLookup[d]},parseBehaviors:function(a,d){return b.map(d,function(b,d){var e=c.getBehaviorClass(b,d);return new e(b,a)})},wrap:function(a,c,e){b.each(e,function(e){a[e]=b.partial(d[e],a[e],c)})}}),c}(d,b),d.AppRouter=Backbone.Router.extend({constructor:function(a){Backbone.Router.prototype.constructor.apply(this,arguments),this.options=a||{};var b=d.getOption(this,"appRoutes"),c=this._getController();this.processAppRoutes(c,b),this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,c){var d=b.invert(this.appRoutes)[a];b.isFunction(this.onRoute)&&this.onRoute(a,d,c)},processAppRoutes:function(a,c){if(c){var d=b.keys(c).reverse();b.each(d,function(b){this._addAppRoute(a,b,c[b])},this)}},_getController:function(){return d.getOption(this,"controller")},_addAppRoute:function(a,d,e){var f=a[e];f||c("Method '"+e+"' was not found on the controller"),this.route(d,e,b.bind(f,a))}}),d.Application=function(a){this._initRegionManager(),this._initCallbacks=new d.Callbacks,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.submodules={},b.extend(this,a),this.triggerMethod=d.triggerMethod},b.extend(d.Application.prototype,Backbone.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var c=d.Module.getClass(b),f=e.call(arguments);return f.unshift(this),c.create.apply(c,f)},_initRegionManager:function(){this._regionManager=new d.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),d.Application.extend=d.extend,d.Module=function(a,c,e){this.moduleName=a,this.options=b.extend({},this.options,e),this.initialize=e.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=c,this.startWithParent=!0,this.triggerMethod=d.triggerMethod,b.isFunction(this.initialize)&&this.initialize(this.options,a,c)},d.Module.extend=d.extend,b.extend(d.Module.prototype,Backbone.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(b.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,d.triggerMethod.call(this,"before:stop"),b.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),d.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,c){if(a){var e=b.flatten([this,this.app,Backbone,d,d.$,b,c]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks,this._finalizerCallbacks=new d.Callbacks}}),b.extend(d.Module,{create:function(a,c,d){var f=a,g=e.call(arguments);g.splice(0,3),c=c.split(".");var h=c.length,i=[];return i[h-1]=d,b.each(c,function(b,c){var e=f;f=this._getModule(e,b,a,d),this._addModuleDefinition(e,f,i[c],g)},this),f},_getModule:function(a,c,d,e){var f=b.extend({},e),g=this.getClass(e),h=a[c];
return h||(h=new g(c,d,f),a[c]=h,a.submodules[c]=h),h},getClass:function(a){var b=d.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c),f=this._getStartWithParent(c,b);e&&b.addDefinition(e,d),this._addStartWithParent(a,b,f)},_getStartWithParent:function(a,c){var e;return b.isFunction(a)&&a.prototype instanceof d.Module?(e=c.constructor.prototype.startWithParent,b.isUndefined(e)?!0:e):b.isObject(a)?(e=a.startWithParent,b.isUndefined(e)?!0:e):!0},_getDefine:function(a){return!b.isFunction(a)||a.prototype instanceof d.Module?b.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),d}(this,Backbone,_);!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=k.substring(0,k.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(n.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",n.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a,b){return"string"==typeof a?a:a[b%a.length]}function i(a){return"undefined"==typeof this?new i(a):void(this.opts=f(a||{},i.defaults,o))}function j(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}n.addRule(".spin-vml","behavior:url(#default#VML)"),i.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function g(a,g,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:h(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)g(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)g(i);return b(a,m)},i.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var k,l=["webkit","Moz","ms","O"],m={},n=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};i.defaults={},f(i.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),j=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+j)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+j)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!k){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*j+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,j=0,l=(f.lines-1)*(1-f.direction)/2;j<f.lines;j++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:k&&c(f.opacity,f.trail,l+j*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,g(h(f.color,j),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var p=e(a("group"),{behavior:"url(#default#VML)"});return!d(p,"transform")&&p.adj?j():k=d(p,"animation"),i}),function(a){if("object"==typeof exports)a(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],a);else{if(!window.Spinner)throw new Error("Spin.js not present");a(window.jQuery,window.Spinner)}}(function(a,b){a.fn.spin=function(c,d){return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner),c!==!1&&(c=a.extend({color:d||e.css("color")},a.fn.spin.presets[c]||c),f.spinner=new b(c).spin(this))})},a.fn.spin.presets={qsearch:{lines:8,length:2,width:2,radius:3,left:"85%"},tiny:{lines:8,length:2,width:2,radius:3,left:"85%"},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),this.JST=this.JST||{},this.JST["templates/search.html"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<form method="get" action="/search">\n    <input tabindex="1" type="text" id="search" name="q" value="" placeholder="'+__e(langGet("search_placeholder"))+'" />\n</form>';return __p},function(a){a.extend(a,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in a('<input type="text">')[0])},shim:function(b){var c={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return a.extend(c,b),!this.browser_supported()&&a(c.selector)._placeholder_shim(c)}}}),a.extend(a.fn,{_placeholder_shim:function(b){function c(b){var c=a(b).offsetParent().offset(),d=a(b).offset();return{top:d.top-c.top,left:d.left-c.left,width:a(b).width()}}function d(b){var e=b.data("target");"undefined"!=typeof e&&(b.css(c(e)),a(window).one("resize",function(){d(b)}))}return this.each(function(){var e=a(this);if(e.is(":visible")){if(e.data("placeholder")){var f=e.data("placeholder");return f.css(c(e)),!0}var g={};e.is("textarea")||"auto"==e.css("height")||(g={lineHeight:e.css("height"),whiteSpace:"nowrap"});var h=a("<label />").text(e.attr("placeholder")).addClass(b.cls).css(a.extend({position:"absolute",display:"inline","float":"none",overflow:"hidden",textAlign:"left",color:b.color,cursor:"text",paddingTop:e.css("padding-top"),paddingRight:e.css("padding-right"),paddingBottom:e.css("padding-bottom"),paddingLeft:e.css("padding-left"),fontSize:e.css("font-size"),fontFamily:e.css("font-family"),fontStyle:e.css("font-style"),fontWeight:e.css("font-weight"),textTransform:e.css("text-transform"),backgroundColor:"transparent",zIndex:99},g)).css(c(this)).attr("for",this.id).data("target",e).click(function(){a(this).data("target").focus()}).insertBefore(this);e.data("placeholder",h).keydown(function(){h.hide()}).blur(function(){h[e.val().length?"hide":"show"]()}).triggerHandler("blur"),a(window).one("resize",function(){d(h)})}})}})}(jQuery),jQuery(document).add(window).bind("ready load",function(){jQuery.placeholder&&jQuery.placeholder.shim()}),function(){"use strict";function a(a){return a=String(a),a.charAt(0).toUpperCase()+a.slice(1)}function b(a,b){var c=-1,e=a.length;if(e==e>>>0)for(;++c<e;)b(a[c],c,a);else d(a,b)}function c(b){return b=j(b),/^(?:webOS|i(?:OS|P))/.test(b)?b:a(b)}function d(a,b){for(var c in a)f(a,c)&&b(a[c],c,a)}function e(b){return null==b?a(b):s.call(b).slice(8,-1)}function f(){return f=function(a,b){var c=null!=a&&(a.constructor||Object).prototype;return!!c&&b in Object(a)&&!(b in c&&a[b]===c[b])},"Function"==e(y)?f=function(a,b){return null!=a&&y.call(a,b)}:{}.__proto__==Object.prototype&&(f=function(a,b){var c=!1;return null!=a&&(a=Object(a),a.__proto__=[a.__proto__,a.__proto__=null,c=b in a][0]),c}),f.apply(this,arguments)}function g(a,b){var c=null!=a?typeof a[b]:"number";return!/^(?:boolean|number|string|undefined)$/.test(c)&&("object"==c?!!a[b]:!0)}function h(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function i(a,c){var d=null;return b(a,function(b,e){d=c(d,b,e,a)}),d}function j(a){return String(a).replace(/^ +| +$/g,"")}function k(a){function b(b){return i(b,function(b,c){return b||RegExp("\\b"+(c.pattern||h(c))+"\\b","i").exec(a)&&(c.label||c)})}function f(b){return i(b,function(b,c,d){return b||(c[O]||c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(O)]||RegExp("\\b"+h(d)+"(?:\\b|\\w*\\d)","i").exec(a))&&d})}function l(b){return i(b,function(b,c){return b||RegExp("\\b"+(c.pattern||h(c))+"\\b","i").exec(a)&&(c.label||c)})}function p(b){return i(b,function(b,d){var e=d.pattern||h(d);return!b&&(b=RegExp("\\b"+e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(a))&&(G={6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(b)&&(G=G[/[\d.]+$/.exec(b)])&&(b="Windows "+G),b=c(String(b).replace(RegExp(e,"i"),d.label||d).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/Mac (OS X)/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])),b})}function y(b){return i(b,function(b,d){var e=d.pattern||h(d);return!b&&(b=RegExp("\\b"+e+" *\\d+[.\\w_]*","i").exec(a)||RegExp("\\b"+e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(a))&&((b=String(d.label||b).split("/"))[1]&&!/[\d.]+/.test(b[0])&&(b[0]+=" "+b[1]),d=d.label||d,b=c(b[0].replace(RegExp(e,"i"),d).replace(RegExp("; *(?:"+d+"[_-])?","i")," ").replace(RegExp("("+d+")(\\w)","i"),"$1 $2"))),b})}function E(b){return i(b,function(b,c){return b||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(a)||0)[1]||null})}function F(){return this.description||""}a||(a=D);var G,H=a,I=[],J=null,K=a==D,L=K&&A&&"function"==typeof A.version&&A.version(),M=b([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),N=l(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),O=y(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One","Xbox","Xoom"]),P=f({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Q=p(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(M&&(M=[M]),P&&!O&&(O=y([P])),(G=/Google TV/.exec(O))&&(O=G[0]),/\bSimulator\b/i.test(a)&&(O=(O?O+" ":"")+"Simulator"),/\((?:Mobile|Tablet).*?Firefox/i.test(a)&&(Q="Firefox OS"),/^iP/.test(O)?(N||(N="Safari"),Q="iOS"+((G=/ OS ([\d_]+)/i.exec(a))?" "+G[1].replace(/_/g,"."):"")):"Konqueror"!=N||/buntu/i.test(Q)?P&&"Google"!=P&&(/Chrome/.test(N)&&!/Mobile Safari/.test(a)||/Vita/.test(O))?(N="Android Browser",Q=/Android/.test(Q)?Q:"Android"):(!N||(G=!/\bMinefield\b|\(Android;/i.test(a)&&/Firefox|Safari/.exec(N)))&&(N&&!O&&/[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(G+"/")+8))&&(N=null),(G=O||P||Q)&&(O||P||/Android|Symbian OS|Tablet OS|webOS/.test(Q))&&(N=/[a-z]+(?: Hat)?/i.exec(/Android/.test(Q)?Q:G)+" Browser")):Q="Kubuntu",L||(L=E(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(N),"(?:Firefox|Minefield|NetFront)"])),"iCab"==M&&parseFloat(L)>3?M=["WebKit"]:(G=/Opera/.test(N)&&(/OPR/.test(a)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(a)&&"WebKit"||!M&&/\bMSIE\b/i.test(a)&&("Mac OS"==Q?"Tasman":"Trident"))?M=[G]:/PlayStation(?! Vita)/i.test(N)&&"WebKit"==M&&(M=["NetFront"]),N||"Trident"!=M||(N="IE",L=(/\brv:([\d.]+)/.exec(a)||0)[1]),K){if(g(m,"global"))if(t&&(G=t.lang.System,H=G.getProperty("os.arch"),Q=Q||G.getProperty("os.name")+" "+G.getProperty("os.version")),o)if(C==n&&"object"==typeof system&&(G=[system])[0]){Q||(Q=G[0].os||null);try{G[1]=(G[1]=require)&&G[1]("ringo/engine").version,L=G[1].join("."),N="RingoJS"}catch(R){G[0].global==q&&(N="Narwhal")}}else"object"==typeof process&&(G=process)?(N="Node.js",H=G.arch,Q=G.platform,L=/[\d.]+/.exec(G.version)[0]):u&&(N="Rhino");else u&&(N="Rhino");else"ScriptBridgingProxyObject"==e(G=m.runtime)?(N="Adobe AIR",Q=G.flash.system.Capabilities.os):"RuntimeObject"==e(G=m.phantom)?(N="PhantomJS",L=(G=G.version||null)&&G.major+"."+G.minor+"."+G.patch):"number"==typeof x.documentMode&&(G=/\bTrident\/(\d+)/i.exec(a))&&(L=[L,x.documentMode],(G=+G[1]+4)!=L[1]&&(I.push("IE "+L[1]+" mode"),M&&(M[1]=""),L[1]=G),L="IE"==N?String(L[1].toFixed(1)):L[0]);Q=Q&&c(Q)}return L&&(G=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(a+";"+(K&&z.appMinorVersion))||/\bMinefield\b/i.test(a)&&"a")&&(J=/b/i.test(G)?"beta":"alpha",L=L.replace(RegExp(G+"\\+?$"),"")+("beta"==J?w:v)+(/\d+\+?/.exec(G)||"")),"Fennec"==N||"Firefox"==N&&/Android|Firefox OS/.test(Q)?N="Firefox Mobile":"Maxthon"==N&&L?L=L.replace(/\.[\d.]+/,".x"):"Silk"==N?(/Mobi/i.test(a)||(Q="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(a)&&I.unshift("accelerated")):"IE"==N&&(G=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a)||0)[1])?(N+=" Mobile",Q="Windows Phone OS "+G+".x",I.unshift("desktop mode")):/Xbox/i.test(O)?(Q=null,"Xbox"==O&&(O="Xbox 360",/IEMobile/.test(a)&&I.unshift("mobile mode"))):"Chrome"!=N&&"IE"!=N&&(!N||O||/Browser|Mobi/.test(N))||"Windows CE"!=Q&&!/Mobi/i.test(a)?"IE"==N&&K&&"object"==typeof external&&!external?I.unshift("platform preview"):/BlackBerry/.test(O)&&(G=(RegExp(O.replace(/ +/g," *")+"/([.\\d]+)","i").exec(a)||0)[1]||L)?(Q="Device Software "+G,L=null):this!=d&&"Wii"!=O&&(K&&A||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(a)||"Firefox"==N&&/OS X (?:\d+\.){2,}/.test(Q)||"IE"==N&&(Q&&!/^Win/.test(Q)&&L>5.5||/Windows XP/.test(Q)&&L>8||8==L&&!/Trident/.test(a)))&&!r.test(G=k.call(d,a.replace(r,"")+";"))&&G.name&&(G="ing as "+G.name+((G=G.version)?" "+G:""),r.test(N)?(/IE/.test(G)&&"Mac OS"==Q&&(Q=null),G="identify"+G):(G="mask"+G,N=B?c(B.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(G)&&(Q=null),K||(L=null)),M=["Presto"],I.push(G)):N+=" Mobile",(G=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(a)||0)[1])&&(G=[parseFloat(G.replace(/\.(\d)$/,".0$1")),G],"Safari"==N&&"+"==G[1].slice(-1)?(N="WebKit Nightly",J="alpha",L=G[1].slice(0,-1)):(L==G[1]||L==(/\bSafari\/([\d.]+\+?)/i.exec(a)||0)[1])&&(L=null),G=[G[0],(/\bChrome\/([\d.]+)/i.exec(a)||0)[1]],!K||/internal|\n/i.test(s.toString())&&!G[1]?(M&&(M[1]="like Safari"),G=G[0],G=400>G?1:500>G?2:526>G?3:533>G?4:534>G?"4+":535>G?5:"5"):(M&&(M[1]="like Chrome"),G=G[1]||(G=G[0],530>G?1:532>G?2:532.05>G?3:533>G?4:534.03>G?5:534.07>G?6:534.1>G?7:534.13>G?8:534.16>G?9:534.24>G?10:534.3>G?11:535.01>G?12:535.02>G?"13+":535.07>G?15:535.11>G?16:535.19>G?17:536.05>G?18:536.1>G?19:537.01>G?20:"21")),M&&(M[1]+=" "+(G+="number"==typeof G?".x":/[.+]/.test(G)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)&&(L=G)),"Opera"==N&&(G=/(?:zbov|zvav)$/.exec(Q))?(N+=" ",I.unshift("desktop mode"),"zvav"==G?(N+="Mini",L=null):N+="Mobile"):"Safari"==N&&/Chrome/.exec(M&&M[1])&&(I.unshift("desktop mode"),N="Chrome Mobile",L=null,/OS X/.test(Q)?(P="Apple",Q="iOS 4.3+"):Q=null),L&&0==L.indexOf(G=/[\d.]+$/.exec(Q))&&a.indexOf("/"+G+"-")>-1&&(Q=j(Q.replace(G,""))),M&&!/Avant|Nook/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(N)&&M[1])&&(G=M[M.length-1])&&I.push(G),I.length&&(I=["("+I.join("; ")+")"]),P&&O&&O.indexOf(P)<0&&I.push("on "+P),O&&I.push((/^on /.test(I[I.length-1])?"":"on ")+O),Q&&(G=/ ([\d.+]+)$/.exec(Q),Q={architecture:32,family:G?Q.replace(G[0],""):Q,version:G?G[1]:null,toString:function(){var a=this.version;return this.family+(a?" "+a:"")+(64==this.architecture?" 64-bit":"")}}),(G=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(H))&&!/\bi686\b/i.test(H)&&(Q&&(Q.architecture=64,Q.family=Q.family.replace(RegExp(" *"+G),"")),N&&(/WOW64/i.test(a)||K&&/\w(?:86|32)$/.test(z.cpuClass||z.platform))&&I.unshift("32-bit")),a||(a=null),{version:N&&L&&(I.unshift(L),L),name:N&&(I.unshift(N),N),os:Q?(N&&!(Q==String(Q).split(" ")[0]&&(Q==N.split(" ")[0]||O))&&I.push(O?"("+Q+")":"on "+Q),Q):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:I.length?I.join(" "):a,layout:M&&M[0],manufacturer:P,prerelease:J,product:O,ua:a,parse:k,toString:F}}var l={"function":!0,object:!0},m=l[typeof window]&&window||this,n=m,o=l[typeof exports]&&exports,p=l[typeof module]&&module&&!module.nodeType&&module,q=o&&p&&"object"==typeof global&&global;!q||q.global!==q&&q.window!==q&&q.self!==q||(m=q);var r=/Opera/,s=Object.prototype.toString,t=/Java/.test(e(m.java))&&m.java,u=t&&"Environment"==e(m.environment),v=t?"a":"α",w=t?"b":"β",x=m.document||{},y={}.hasOwnProperty,z=m.navigator||{},A=m.operamini||m.opera,B=r.test(B=e(A))?B:A=null,C=this,D=z.userAgent||"";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return k()}):o&&p?d(k(),function(a,b){o[b]=a}):m.platform=k()}.call(this),this.SnappyWidget=function(Backbone){var a;return a=new Backbone.Marionette.Application,a.on("initialize:before",function(){return a.logger=new Logger,a.faqs=new Faqs,a.language=new Locale,a.widget=new Widget}),a.vent.on("init",function(b){return a.settings=b.options,a.module("WidgetApp").start()}),a.addRegions({searchRegion:"#search",navigationRegion:"#navigation",contentRegion:"#content",contactRegion:"#contact",footerRegion:"#footer-region"}),a.on("initialize:after",function(){return Backbone.history?Backbone.history.start():void 0}),a}(Backbone,Marionette);var langGet;langGet=function(a){var b;return b=SnappyWidget.language.get("lang"),Locales[b][a]},function(a){return _.extend(a.Renderer,{render:function(a,b){var c;if(a!==!1){if(c=this.getTemplate(a),c||(c=this.htmlTemplate(a)),!c)throw"Template "+a+" not found!";return c(b)}},getTemplate:function(a){return JST[a+".html"]?JST[a+".html"]:void 0},htmlTemplate:function(b){return"function"==typeof b?b:a.TemplateCache.get(b)}})}(Marionette);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp.Contact",function(a,b,Backbone,c,d,e){return a.Thanks=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="thank-you",b.prototype.template=e.template(d("#email-thank-you").html()),b}(c.ItemView),a.EmailForm=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.template=e.template(d("#email-form").html()),c.prototype.events={"keyup #title":"saveLocal","keyup #message":"saveLocal",submit:"submitForm"},c.prototype.onShow=function(){var a;return d.placeholder.shim(),b.settings.name&&this.$("#name").val(b.settings.name),b.settings.email&&this.$("#email").val(b.settings.email),a=localStorage.getItem("snappy-widget"),a?(a=JSON.parse(a),this.$("#name").val(a.name),this.$("#email").val(a.email),this.$("#subject").val(a.subject),this.$("#message").val(a.message)):void 0},c.prototype.saveLocal=function(){var a;return a={name:this.$("#name").val(),email:this.$("#email").val(),subject:this.$("#subject").val(),message:this.$("#message").val()},localStorage.setItem("snappy-widget",JSON.stringify(a))},c.prototype.valid=function(){var a,b;return this.$el.find(".error").removeClass("error"),a=!0,b=this,this.$el.find(':text, input[type="email"], textarea').each(function(){return""===d.trim(d(this).val())?(a=!1,b.showError(d(this))):void 0}),a},c.prototype.showError=function(a){return a.parent().addClass("error")},c.prototype.startsWith=function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)},c.prototype.submitForm=function(a){var c;return a.preventDefault(),this.valid()?(localStorage.clear(),c={name:this.$("#name").val(),email:this.$("#email").val(),subject:this.$("#subject").val(),message:this.$("#message").val(),referrer:b.settings.referrer,platform:JSON.stringify(platform),settings:b.settings},d.ajax({url:"/widget/v1/faq/contact",data:c,dataType:"json",type:"POST"}).done(function(){return b.vent.trigger("load:thanks",c)})):!1},c}(c.ItemView)});var Faq,FaqSearch,Faqs,Question,Questions,SearchQuestion,Topic,Topics,allQuestions,allTopics,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};allQuestions=new Backbone.Collection,allTopics=new Backbone.Collection,SearchQuestion=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b}(Backbone.Model),FaqSearch=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url="/widget/v1/faq/search",b.prototype.model=SearchQuestion,b}(Backbone.Collection),Faq=function(a){function b(){this.topics=new Topics,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.urlRoot="/api/faq",b.prototype.parse=function(a,b){return a.topics&&(this.topics.set(a.topics,b),allTopics.set(this.topics.models,{remove:!1})),_.omit(a,"topics")},b}(Backbone.Model),Faqs=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url="/widget/v1/faq/faqs",b.prototype.model=Faq,b.prototype.getTopic=function(a){return allTopics.findWhere({id:a})},b.prototype.getQuestion=function(a){return allQuestions.findWhere({id:a})},b}(Backbone.Collection),Topic=function(a){function b(){this.questions=new Questions,b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.urlRoot=function(){return"/api/faq/"+this.get("faq_id")+"/topics"},b.prototype.parse=function(a,b){return a.questions&&(this.questions.set(a.questions,b),allQuestions.set(this.questions.models,{remove:!1})),_.omit(a,"questions")},b}(Backbone.Model),Topics=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url="/api/faq/topics",b.prototype.model=Topic,b}(Backbone.Collection),Question=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.urlRoot="/api/faq/questions",b.prototype.parse=function(a){return a.documents&&this.set({attachments:_.pluck(a.documents,"id")}),a.pivot&&(this.pivot=a.pivot),_.omit(a,"pivot")},b}(Backbone.Model),Questions=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url="/api/faq/questions",b.prototype.model=Question,b.prototype.comparator=function(a){return a.pivot.order},b}(Backbone.Collection);var Locale,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};Locale=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.url="/widget/v1/faq/language",b}(Backbone.Model);var Logger;Logger=function(){function a(){}return a.prototype.url="/widget/v1/log",a.prototype.store=function(a,b,c){var d,e;return null==c&&(c={}),d=c.id?c.id:null,e=c.term?c.term:null,$.ajax({url:this.url,data:{action:a,data:_.omit(b,"domain","debug","referrer","openText"),platform:JSON.stringify(platform),referrer:b.referrer,question_id:d,search_term:e,ticket:null},dataType:"json",type:"POST"})},a}();var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp.Footer",function(a,b,Backbone,c,d,e){return a.Navigation=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.className="row",c.prototype.template=e.template(d("#footer").html()),c.prototype.events={"click a.back":"goBack","click a.contact":"contact"},c.prototype.onShow=function(){var a,c;return navigator.userAgent.indexOf("Mac")>0&&navigator.userAgent.indexOf("Safari")>0&&(a=2*Math.random()+9,d("#footer-region").css("padding",""+a+"px 0")),(null!=(c=b.settings)?c.whitelabel:void 0)?this.$(".right").hide():void 0},c.prototype.templateHelpers=function(){return{showBack:function(){return this.title||this.question||d(".form-group").length?!0:!1},showContact:function(){var a;return null!=(a=b.settings)?a.contact:void 0}}},c.prototype.initialize=function(a){return this.topic=a.topic,this.inContact="contact"===a.type?!0:!1},c.prototype.contact=function(a){return a.preventDefault(),b.vent.trigger("load:contact:form"),this.render()},c.prototype.goBack=function(a){return a.preventDefault(),this.topic?b.vent.trigger("load:faq",this.topic.get("faq_id")):b.vent.trigger("load:home")},c}(c.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp",function(a,b,Backbone,c){var d;return this.startWithParent=!1,this.opened=!1,a.Router=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.appRoutes={"":"showIndex"},b}(c.AppRouter),d={showIndex:function(){return b.navigationRegion.close(),isMobile()?this.showHomeMobile():this.showHome(),this.showFooter()},showHome:function(){var c,d;return this.showSearch(),1===b.faqs.length?this.showFaq(b.faqs.at(0)):(null!=(d=b.settings)?d.faq:void 0)?this.showFaq(b.settings.faq):(c=new a.Home.List({collection:b.faqs}),b.contentRegion.show(c))},showHomeMobile:function(){var c;return c=new a.Home.Mobile,b.contentRegion.show(c)},showFaq:function(c,d){var e;return d||(d=b.faqs.get(c)),this.showHeader(d),this.showFooter(d),e=new a.Faq({model:d,collection:d.topics}),b.contentRegion.show(e)},showTopic:function(c){var d,e;return d=b.faqs.getTopic(c),e=new a.TopicItem({model:d}),b.contentRegion.show(e)},openQuestion:function(a,c){var d;return a&&(d=b.faqs.getQuestion(a))?isMobile()?this.redirectToQuestion(d):(b.logger.store("open:question",c.options,{id:a}),this.showQuestion(a,d)):this.showIndex()},showQuestion:function(a,c,d){return b.logger.store("show:question",b.settings,{id:a}),this.loadQuestion(a,c,d)},loadQuestion:function(c,d,e){var f,g;return f=new a.QuestionHeader({model:d,topic:e,collection:b.faqs}),b.navigationRegion.show(f),this.showFooter(d,e),g=new a.Question({model:d}),b.contentRegion.show(g)},redirectToQuestion:function(a){var c,d,e;return d=b.faqs.getTopic(a.pivot.topic_id),c=b.faqs.get(d.get("faq_id")),e="http://"+b.settings.domain+"/"+c.get("url")+"#"+d.get("slug")+"-"+a.id,b.widget.sendMessage({name:"redirect",url:e})},showEmailForm:function(){var c;return b.contactRegion.close(),b.navigationRegion.close(),c=new a.Contact.EmailForm,b.contentRegion.show(c)},doSearch:function(c){var d;return b.logger.store("search",b.settings,{term:c}),b.navigationRegion.close(),d=new a.Search.Loading,d.on("show",function(){var d,e;return d=new FaqSearch,e=new a.QuestionList({collection:d}),d.fetch({data:{q:c},success:function(){return b.contentRegion.show(e)}})}),b.contentRegion.show(d)},showSearch:function(){var c;return c=new a.Search.Form({collection:new FaqSearch}),c.on("perform:search",function(a){return function(b){return""===b?a.showIndex():a.doSearch(b)}}(this)),b.searchRegion.show(c)},showHeader:function(c,d){var e;return e=new a.FaqHeader({model:c,topic:d}),b.navigationRegion.show(e)},showFooter:function(c,d){var e;return e=new a.Footer.Navigation({model:c,topic:d}),b.footerRegion.show(e)},showContactFooter:function(){var c;return c=new a.Footer.Navigation({type:"contact"}),b.footerRegion.show(c)},showThankYou:function(){var c;return c=new a.Contact.Thanks,b.contentRegion.show(c)}},b.vent.on("widget:open",function(a){return b.faqs.fetch({parse:!0,async:!1}),a.options.lang?b.language.set({lang:a.options.lang}):b.language.fetch({async:!1}),d.showIndex(),b.logger.store("open",a.options),a.topicId?d.showTopic(a.topicId):a.faqId?d.showFaq(a.faqId):a.contact?(b.logger.store("open:contact",a.options),d.showEmailForm(),d.showContactFooter()):d.openQuestion(a.id,a)}),b.vent.on("load:home",function(){return d.showIndex()}),b.vent.on("load:faq",function(a,b){return d.showFaq(a,b)}),b.vent.on("load:question",function(a,b,c){return d.showQuestion(a,b,c)}),b.vent.on("load:contact:form",function(){return d.showEmailForm()}),b.vent.on("load:thanks",function(){return d.showThankYou()}),a.on("start",function(){return new a.Router({controller:d})})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp.Search",function(a,b,Backbone,c,d){return a.Form=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.tagName="form",b.prototype.template="templates/search",b.prototype.ui={search:"#search"},b.prototype.events={"keypress #search":"searchOnEnter"},b.prototype.onShow=function(){return d.placeholder.shim()},b.prototype.searchOnEnter=function(a){var b;return b=d.trim(encodeURIComponent(this.ui.search.val())),13===a.which?(a.preventDefault(),this.trigger("perform:search",b)):void 0},b}(c.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a
};this.SnappyWidget.module("WidgetApp.Search",function(a,b,Backbone,c,d,e){return a.Loading=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="loading",b.prototype.template=e.template("<span></span>"),b.prototype.onShow=function(){return this.$el.spin("small")},b}(Backbone.Marionette.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp",function(a,b,Backbone,c,d,e){return this.startWithParent=!1,a.Question=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.className="question",c.prototype.tagName="li",c.prototype.template=e.template(d("#question-item-template").html()),c.prototype.triggers={"click a":"question:clicked"},c.prototype.templateHelpers=function(){return{getTitle:function(){var a;return(null!=(a=b.settings)?a.debug:void 0)?"#"+this.id+" "+this.question:this.question}}},c}(c.ItemView),a.NoQuestions=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="question none",b.prototype.tagName="li",b.prototype.template=e.template(d("#no-questions").html()),b}(Backbone.Marionette.ItemView),a.QuestionList=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return __extends(d,c),d.prototype.tagName="ul",d.prototype.className="category",d.prototype.itemView=a.Question,d.prototype.emptyView=a.NoQuestions,d.prototype.initialize=function(a){return this.topic=a.topic,this.on("itemview:question:clicked",function(a){return function(c){return b.vent.trigger("load:question",c.model.id,c.model,a.topic)}}(this))},d}(Backbone.Marionette.CollectionView),a.TopicItem=function(c){function f(){return f.__super__.constructor.apply(this,arguments)}return __extends(f,c),f.prototype.template=e.template(d("#topic-item-template").html()),f.prototype.itemView=a.QuestionItem,f.prototype.className="topic",f.prototype.regions={questionRegion:"#questions-region"},f.prototype.templateHelpers=function(){return{getTitle:function(){var a;return(null!=(a=b.settings)?a.debug:void 0)?"#"+this.id+" "+this.topic:this.topic}}},f.prototype.onShow=function(){var b;return b=new a.QuestionList({collection:this.model.questions,topic:this.model}),this.questionRegion.show(b)},f.prototype.events={"click a":"loadTopic"},f.prototype.loadTopic=function(a){return a.preventDefault(),b.vent.trigger("load:topic",this.model.id,this.model)},f}(Backbone.Marionette.Layout),a.Faq=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.className="faq",c.prototype.itemView=a.TopicItem,c}(Backbone.Marionette.CollectionView),a.FaqHeader=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template=e.template(d("#faq-header-template").html()),b.prototype.events={"click a":"goBack"},b.prototype.templateHelpers=function(){return{getTitle:function(){return this.title?this.title:this.question}}},b.prototype.initialize=function(a){return this.topic=a.topic},b}(Backbone.Marionette.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp.Home",function(a,b,Backbone,c,d,e){return a.Item=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.tagName="li",c.prototype.template=e.template(d("#item-template").html()),c.prototype.events={"click a":"loadFaq"},c.prototype.templateHelpers=function(){return{getTitle:function(){var a;return(null!=(a=b.settings)?a.debug:void 0)?"#"+this.id+" "+this.title:this.title}}},c.prototype.loadFaq=function(a){return a.preventDefault(),b.vent.trigger("load:faq",this.model.id,this.model)},c}(c.ItemView),a.List=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.tagName="ul",c.prototype.className="category",c.prototype.itemView=a.Item,c}(c.CollectionView),a.Mobile=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.className="home-mobile",c.prototype.template=e.template(d("#faq-home-mobile").html()),c.prototype.events={"click a.contact":"contact"},c.prototype.templateHelpers=function(){return{faqUrl:function(){return"http://"+b.settings.domain},showContact:function(){var a;return null!=(a=b.settings)?a.contactForm:void 0}}},c.prototype.contact=function(a){return a.preventDefault(),b.vent.trigger("load:contact:form")},c}(c.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};this.SnappyWidget.module("WidgetApp",function(a,b,Backbone,c,d,e){return a.QuestionHeader=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.template=e.template(d("#faq-header-question-template").html()),b.prototype.templateHelpers=function(){return{hasTopic:function(a){return function(){var b;return null!=(null!=(b=a.model.pivot)?b.topic_id:void 0)}}(this),getUrl:function(a){return function(b){var c,d;return d=allTopics.get(a.model.pivot.topic_id),c=a.collection.get(d.get("faq_id")),"/"+c.get("url")+"#"+d.get("slug")+"-"+b}}(this)}},b.prototype.serializeData=function(){var a;return a=this.model.toJSON(),a.topic=this.topic,a},b.prototype.initialize=function(a){return this.topic=a.topic},b}(c.ItemView),a.Question=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.className="single-question",b.prototype.template=e.template(d("#question-template").html()),b.prototype.onShow=function(){return this.$("a").on("click",function(){return window.open(d(this).attr("href"),"_blank"),!1})},b}(c.ItemView)});var Widget,__bind=function(a,b){return function(){return a.apply(b,arguments)}};Widget=function(){function a(){this.receiveMessage=__bind(this.receiveMessage,this),this.init()}return a.prototype.init=function(){return this.iframeEl=document.getElementById(this.iframeId),window.addEventListener("message",this.receiveMessage,!1),this.sendMessage({name:"widget-ready"})},a.prototype.receiveMessage=function(a){switch(a=JSON.parse(a.data),SnappyWidget.vent.trigger(a.action,a),a.action){case"init":return this.initWidget(a.options);case"open":return this.open(a);case"close":return this.close(a)}},a.prototype.sendMessage=function(a){return parent.postMessage(JSON.stringify(a),"*")},a.prototype.initWidget=function(a){return SnappyWidget.vent.trigger("widget:init",a)},a.prototype.open=function(a){return SnappyWidget.vent.trigger("widget:open",a)},a.prototype.close=function(){return SnappyWidget.vent.trigger("widget:close")},a}();