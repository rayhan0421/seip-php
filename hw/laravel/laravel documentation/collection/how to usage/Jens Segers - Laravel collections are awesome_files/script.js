$(document).ready(function(){$("a[href^='http']").not("[href*='"+location.hostname+"']").attr("target","_blank"),$("textarea").autosize(),$("textarea").each(function(){if(id=$(this).data("post")){var t=$(this);$.get(base_path+"mentions/"+id,function(a){$(t).atwho({at:"@",limit:5,data:a})})}}),$(".confirm").click(function(){return confirm("Are you sure about this?")}),$(".share .twitter").click(function(){var t=600,a=300,e=($(window).width()-t)/2,n=($(window).height()-a)/2,i=this.href,o="status=1,width="+t+",height="+a+",top="+n+",left="+e;return window.open(i,"Twitter",o),!1}),$(".share .facebook").click(function(){var t=600,a=300,e=($(window).width()-t)/2,n=($(window).height()-a)/2,i=this.href,o="status=1,width="+t+",height="+a+",top="+n+",left="+e;return window.open(i,"Facebook",o),!1}),$("input[name=email]").on("keyup change",function(){var t=$(this).val();if(t&&!$("input[name=name]").val()){var a=new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);if(a.test(t)){var e=$("input[name=name]").attr("placeholder");$("input[name=name]").addClass("loading").attr("placeholder","Guessing name ..."),$.get(base_path+"autocomplete",{email:t},function(t){t.name&&$("input[name=name]").val(t.name),t.id&&$(".comment.new img").attr("src","http://www.gravatar.com/avatar/"+t.id+"?s=60&d=identicon")}).always(function(){$("input[name=name]").removeClass("loading").attr("placeholder",e)})}}})});